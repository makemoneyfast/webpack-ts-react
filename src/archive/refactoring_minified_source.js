(self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([
  [2222],
  {
    7957: function (e, t, n) {
      (window.__NEXT_P = window.__NEXT_P || []).push([
        "/checkout",
        function () {
          return n(49330);
        },
      ]);
    },
    67036: function (e, t, n) {
      "use strict";
      n.d(t, {
        K9: function () {
          return b;
        },
        M9: function () {
          return g;
        },
        Rt: function () {
          return I;
        },
        XP: function () {
          return S;
        },
        Xp: function () {
          return P;
        },
        YE: function () {
          return f;
        },
        bm: function () {
          return w;
        },
        kg: function () {
          return C;
        },
        oB: function () {
          return x;
        },
      });
      var o = n(75190),
        r = n(26021),
        i = n(87738),
        l = n(87061),
        a = n(81356);
      function s() {
        let e = (0, o.Z)([
          "\n  padding: ",
          " 0;\n  @media ",
          " {\n    padding: ",
          " 0;\n  }\n",
        ]);
        return (
          (s = function () {
            return e;
          }),
          e
        );
      }
      function d() {
        let e = (0, o.Z)([
          "\n  background: ",
          ";\n  padding: 0 ",
          ";\n  @media ",
          " {\n    margin: 0 -",
          ";\n  }\n  @media ",
          " {\n    padding: 0;\n  }\n  @media ",
          " {\n    height: 100%;\n  }\n",
        ]);
        return (
          (d = function () {
            return e;
          }),
          e
        );
      }
      function u() {
        let e = (0, o.Z)([
          "\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2;\n  background-color: white;\n",
        ]);
        return (
          (u = function () {
            return e;
          }),
          e
        );
      }
      function c() {
        let e = (0, o.Z)(["\n  margin-top: ", ";\n  ", "\n"]);
        return (
          (c = function () {
            return e;
          }),
          e
        );
      }
      function p() {
        let e = (0, o.Z)(["\n  ", "\n  ", ";\n  word-break: break-word;\n"]);
        return (
          (p = function () {
            return e;
          }),
          e
        );
      }
      function m() {
        let e = (0, o.Z)(["\n  position: relative;\n  height: 100%;\n"]);
        return (
          (m = function () {
            return e;
          }),
          e
        );
      }
      function v() {
        let e = (0, o.Z)(["\n  height: 100%;\n"]);
        return (
          (v = function () {
            return e;
          }),
          e
        );
      }
      function h() {
        let e = (0, o.Z)(["\n  @media ", " {\n    height: 100%;\n  }\n"]);
        return (
          (h = function () {
            return e;
          }),
          e
        );
      }
      function y() {
        let e = (0, o.Z)([
          "\n  legend {\n    margin-bottom: ",
          ";\n    color: ",
          ";\n  }\n\n  .MuiFormControl-root {\n    margin-top: ",
          ";\n    margin-bottom: ",
          ";\n  }\n",
        ]);
        return (
          (y = function () {
            return e;
          }),
          e
        );
      }
      let g = r.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-StylesCheckoutStylesMainContent",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-0",
          })(s(), i.zr.s8, l.rS.rdsDevice.tabletSmallMax, i.zr.s6),
        f = r.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-StylesCheckoutStylesSidebar",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-1",
          })(
          d(),
          l.rS.colorBackground.secondary.default,
          i.zr.s8,
          l.rS.rdsDevice.mobileLargeMax,
          i.zr.s6,
          l.rS.rdsDevice.tabletSmallMax,
          l.rS.rdsDevice.tabletSmallMin
        ),
        b = r.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-StylesCheckoutStylesCheckoutSpinnerContainer",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-2",
          })(u()),
        C = r.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-StylesCheckoutStylesCheckoutStepSummaryLabel",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-3",
          })(c(), i.zr.s4, l.rS.rdsText.body_300_bold),
        S = r.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-StylesCheckoutStylesCheckoutStepSummaryText",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-4",
          })(p(), l.rS.rdsText.body_300, (e) => {
          let { marginBottom: t } = e;
          return t && "margin-bottom: ".concat(i.zr.s3, ";");
        }),
        x = r.ZP.section
          .attrs((e) => ({
            className: "coles-targeting-StylesCheckoutStylesCheckoutWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-5",
          })(m()),
        w = (0, r.ZP)(a.rj)
          .attrs((e) => ({
            className: "coles-targeting-StylesCheckoutStylesCheckoutGrid",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-6",
          })(v()),
        I = (0, r.ZP)(a.X2)
          .attrs((e) => ({
            className: "coles-targeting-StylesCheckoutStylesCheckoutRow",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-7",
          })(h(), l.rS.rdsDevice.tabletSmallMin),
        P = r.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-CardRadioGroupContainer",
            ...e,
          }))
          .withConfig({
            componentId: "sc-822866a4-8",
          })(
          y(),
          i.zr.s3,
          l.rS.colorBackground.inverse.hover,
          i.zr.s6,
          i.zr.s2
        );
    },
    25950: function (e, t, n) {
      "use strict";
      n.d(t, {
        I: function () {
          return c;
        },
        $: function () {
          return p;
        },
      });
      var o = n(91497),
        r = n(35546),
        i = n(80500),
        l = n(2784),
        a = n(2021),
        s = n(21289),
        d = n(77566),
        u = n(2727);
      function c(e, t) {
        return [
          {
            pathname: e,
            query: {
              [i.a.OpenDrawer]: t,
            },
          },
          e,
        ];
      }
      function p() {
        let { push: e } = (0, r.tv)(),
          t = (function () {
            let { shoppingMethod: e } = (0, u.ub)(),
              [t] = (0, d.Vb)([u.ek.CollectFromDeliverToDrawers]);
            return (0, l.useCallback)(
              (n) =>
                n === a.B5.ShoppingMethod && t
                  ? e === s.jY.CLICK_AND_COLLECT
                    ? a.B5.CollectFrom
                    : a.B5.DeliverTo
                  : n,
              [t, e]
            );
          })();
        return function (n) {
          let r =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : o.nB.Browse;
          e(...c(r, t(n)));
        };
      }
    },
    49330: function (e, t, n) {
      "use strict";
      n.r(t),
        n.d(t, {
          default: function () {
            return lx;
          },
        });
      var o,
        r,
        i,
        l,
        a,
        s,
        d,
        u,
        c,
        p,
        m,
        v,
        h,
        y,
        g,
        f,
        b,
        C,
        S,
        x,
        w,
        I,
        P,
        T,
        k,
        j,
        A,
        E = n(52322),
        O = n(55351),
        D = n(2784),
        R = n(87738),
        L = n(86045),
        N = n(44384),
        M = n(38099),
        F = n(91497),
        B = n(35546),
        _ = n(77566),
        V = n(69911),
        U = n(96948),
        Z = n(53813),
        z = n(2021),
        G = n(25950);
      let Y = (e) => {
        let t = (0, G.$)();
        return () => t(z.B5.Trolley, e);
      };
      var q = n(75190),
        K = n(26021),
        W = n(87061);
      function Q() {
        let e = (0, q.Z)([
          "\n  height: 100px;\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  background-color: ",
          ";\n",
        ]);
        return (
          (Q = function () {
            return e;
          }),
          e
        );
      }
      function H() {
        let e = (0, q.Z)([""]);
        return (
          (H = function () {
            return e;
          }),
          e
        );
      }
      function X() {
        let e = (0, q.Z)([
          "\n  #footer-copyright {\n    @media ",
          " {\n      margin-bottom: 130px;\n    }\n  }\n",
        ]);
        return (
          (X = function () {
            return e;
          }),
          e
        );
      }
      K.ZP.div
        .attrs((e) => ({
          className: "coles-targeting-CheckoutLayoutPlaceholder",
          ...e,
        }))
        .withConfig({
          componentId: "sc-5c686e68-0",
        })(Q(), W.rS.colorBackground.primary.active);
      let J = K.ZP.main
          .attrs((e) => ({
            className: "coles-targeting-CheckoutLayoutMain",
            ...e,
          }))
          .withConfig({
            componentId: "sc-5c686e68-1",
          })(H()),
        $ = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-FooterContainerWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-5c686e68-2",
          })(X(), W.rS.rdsDevice.mobileLargeMax),
        ee = (e) => {
          let { children: t } = e,
            n = Y(F.nB.Home);
          return (0, E.jsxs)(Z.X, {
            "data-testid": "checkout-layout-container",
            attachGlobalDrawer: !1,
            children: [
              (0, E.jsx)(U.MA, {
                backToTrolley: n,
              }),
              (0, E.jsx)(J, {
                children: t,
              }),
              (0, E.jsx)($, {
                children: (0, E.jsx)(V.bk, {
                  isSimplified: !0,
                }),
              }),
            ],
          });
        };
      var et = n(36234),
        en = n(92762),
        eo = n(98616),
        er = n(81356),
        ei = n(29594),
        el = n(21289),
        ea = n(96780),
        es = n(61772),
        ed = n(97536),
        eu = n(2727),
        ec = n(84162),
        ep = n(61485),
        em = n(6823);
      let { promos: ev } = F.Vm,
        eh = (e) => {
          var t;
          let { checkoutDetails: n } = (0, ep.wo)(),
            o =
              null !== (t = null == n ? void 0 : n.orderId) && void 0 !== t
                ? t
                : "",
            r = (0, eu.ON)(),
            [i, { isLoading: l }] = (0, ed.zF)(),
            [a] = (0, _.Vb)([ec.G.CheckoutOrderDetailsV2]),
            s = (0, ep.xP)(n),
            d = null == s ? void 0 : s.appliedPromotions,
            u = async (t) =>
              t
                ? d && d.find((e) => e.promoCode === t && !e.qualified)
                  ? ((0, em.m)(ev.unqualifiedError), ev.unqualifiedError)
                  : await i({
                      body: {
                        storeId: r,
                      },
                      orderId: o,
                      promoCode: t,
                      shouldUseOrderDetailsV2: a,
                    })
                      .unwrap()
                      .then((n) => {
                        var o;
                        null == e || e(n);
                        let r =
                            null === (o = n.appliedPromotions) || void 0 === o
                              ? void 0
                              : o.find(
                                  (e) =>
                                    e.promoCode.toLowerCase() ===
                                    t.toLowerCase()
                                ),
                          i = "";
                        return (
                          (null == r ? void 0 : r.active) === !1
                            ? (i = ev.invalidPromoError)
                            : (null == r ? void 0 : r.qualified) === !1 &&
                              (i = ev.unqualifiedError),
                          i
                            ? (0, em.m)(i)
                            : (0, es.Kk)(es.tw.AddPromoCode, {
                                order: {
                                  order_details: n,
                                },
                              }),
                          i
                        );
                      })
                      .catch((e) => {
                        let { status: t } = e || {},
                          n = "";
                        switch (t) {
                          case 401:
                          case 403:
                            n = ev.invalidPromoError;
                            break;
                          case 400:
                            var o, r;
                            n =
                              (null ===
                                (o =
                                  null == e
                                    ? void 0
                                    : null === (r = e.data) || void 0 === r
                                    ? void 0
                                    : r.errors[0]) || void 0 === o
                                ? void 0
                                : o.message) || ev.genericError;
                            break;
                          default:
                            n = ev.genericError;
                        }
                        return (0, em.m)(n, t), n;
                      })
                : ((0, em.m)(ev.invalidPromoError), ev.invalidPromoError);
          return {
            applyPromo: u,
            isApplyingPromo: l,
          };
        },
        ey = (e) => {
          var t;
          let { checkoutDetails: n } = (0, ep.wo)(),
            o =
              null !== (t = null == n ? void 0 : n.orderId) && void 0 !== t
                ? t
                : "",
            r = (0, eu.ON)(),
            [i, { isLoading: l, isError: a }] = (0, ed.JR)(),
            [s] = (0, _.Vb)([ec.G.CheckoutOrderDetailsV2]),
            d = async (t) =>
              await i({
                body: {
                  storeId: r,
                },
                orderId: o,
                promoCode: t,
                shouldUseOrderDetailsV2: s,
              })
                .unwrap()
                .then((t) => {
                  null == e || e(t),
                    (0, es.Kk)(es.tw.RemovePromoCode, {
                      order: {
                        order_details: t,
                      },
                    });
                })
                .catch((e) => {
                  let { status: t } = e || {};
                  (0, em.m)(ev.removeError, t);
                });
          return {
            removePromo: d,
            isRemovingPromo: l,
            removePromoError: a,
          };
        };
      var eg = n(64494);
      let ef = (e) => {
        let t = (0, eu.ON)(),
          [n, { isLoading: o, isError: r }] = (0, eg.xQ)(),
          [i] = (0, _.Vb)([ec.G.CheckoutOrderDetailsV2]),
          l = (0, D.useCallback)(
            async (e) =>
              await n({
                body: {
                  ...e,
                },
                storeId: t,
                shouldUseOrderDetailsV2: i,
              }).unwrap(),
            [n, t, i]
          ),
          a = (0, D.useCallback)(
            (t) => {
              let n = {};
              return (
                t &&
                  (n.creditIdsToApply = t
                    .filter((e) => {
                      let { creditStatus: t } = e;
                      return "0" === t;
                    })
                    .map((e) => {
                      let { creditId: t } = e;
                      return t;
                    })),
                l(n).then((t) => (e && e(t), t))
              );
            },
            [l, e]
          );
        return {
          applyCredit: a,
          isOrderProcessSaving: o,
          isOrderProcessError: r,
        };
      };
      var eb = n(57714),
        eC = n(70285),
        eS = n(47717),
        ex = n(27308),
        ew = n(87317),
        eI = n(86212),
        eP = n(61451),
        eT = n(67036),
        ek = n(63955),
        ej = n(19831),
        eA = n(53251),
        eE = n(11905),
        eO = n(67309);
      let eD = (e, t) => ({
        checkout: {
          options: JSON.parse(
            JSON.stringify({
              deliveryOption: t,
              deliveryOptionId: e.deliveryOptionId,
              baggingOption: e.baggingOption,
              baggingOptionId: e.baggingOptionId,
              baggingOptionSaveToProfile: e.baggingOptionSaveToProfile,
              substitutionOptionId: e.substitutionOption,
              substitutionOptionSaveToProfile:
                e.substitutionOptionSaveToProfile,
              deliveryInstructions: e.deliveryInstructions,
            })
          ),
        },
      });
      var eR = n(66548);
      function eL() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  column-gap: ",
          ";\n  h3 {\n    ",
          ";\n    color: ",
          ";\n  }\n  p {\n    ",
          ";\n    ",
          ";\n    color: ",
          ";\n  }\n",
        ]);
        return (
          (eL = function () {
            return e;
          }),
          e
        );
      }
      function eN() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  align-items: center;\n  width: 40px;\n",
        ]);
        return (
          (eN = function () {
            return e;
          }),
          e
        );
      }
      function eM() {
        let e = (0, q.Z)([
          "\n  margin-bottom: -",
          ";\n  fieldset {\n    ",
          ";\n    legend {\n      color: ",
          ";\n      padding: ",
          " 0;\n      font-weight: 600;\n    }\n  }\n  .is-transparent {\n    max-width: initial;\n    ",
          ";\n  }\n",
        ]);
        return (
          (eM = function () {
            return e;
          }),
          e
        );
      }
      let eF = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-CheckoutCardRadioOptionLabel",
            ...e,
          }))
          .withConfig({
            componentId: "sc-65061ad9-0",
          })(
          eL(),
          R.zr.s4,
          W.rS.rdsText.body_200_bold,
          W.rS.colorForeground.primary,
          W.rS.rdsText.body_200,
          eR.XK.s1.top,
          W.rS.colorForeground.primary
        ),
        eB = K.ZP.div.withConfig({
          componentId: "sc-65061ad9-1",
        })(eN()),
        e_ = K.ZP.section
          .attrs((e) => ({
            className: "coles-targeting-CheckoutCardRadioCardRadioContainer",
            ...e,
          }))
          .withConfig({
            componentId: "sc-65061ad9-2",
          })(
          eM(),
          R.zr.s4,
          eR.XK.s4.top,
          W.rS.colorForeground.primary,
          R.zr.s3,
          eR.XK.s2.top
        );
      var eV = n(15123),
        eU = {
          src: "/_next/static/media/bag-image-paper-bag.3d33f44a.jpg",
          height: 80,
          width: 80,
          blurDataURL:
            "data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAeEAABBAEFAAAAAAAAAAAAAAACAAEDBBEGEhMxUf/EABQBAQAAAAAAAAAAAAAAAAAAAAP/xAAXEQADAQAAAAAAAAAAAAAAAAAAA0Fx/9oADAMBAAIRAxEAPwC0swcupgqkc7QDYE2Bpn25yxdZ9REQquish//Z",
          blurWidth: 8,
          blurHeight: 8,
        };
      let eZ = function () {
          let e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
          return e.find((e) => e.selected);
        },
        ez = function () {
          let e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
          if (0 === e.length) return;
          if (1 === e.length) return e[0];
          let t = e.filter((e) => 1 !== e.optionId);
          return t[0];
        },
        eG = function () {
          let e =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : [],
            t = eZ(e);
          return t || ez(e);
        },
        eY = (e) =>
          (null == e ? void 0 : e.optionId) === 8 ||
          (null == e ? void 0 : e.optionId) === 32,
        eq = (e) =>
          (null == e ? void 0 : e.optionId) === 4 ||
          (null == e ? void 0 : e.optionId) === 16 ||
          (null == e ? void 0 : e.optionId) === 128,
        eK = (e, t) => {
          if (!t || !e) return null;
          let n = (0, eV.aO)(t);
          return "Get your order in a reusable Swap-a-box for "
            .concat(n, " per order at check out. Earn a ")
            .concat(n, " credit when you return the boxes to us.");
        },
        eW = (e, t) => {
          switch (!0) {
            case eq(e):
              return "Now packed for you in shorter 100% recycled bags that carry the same weight as our standard paper bags while reducing product breakage";
            case eY(e):
              return eK(t, e.unitPrice);
            case null == e ? void 0 : e.isFlatFee:
            case !(null == e ? void 0 : e.quantity):
              return null;
            default:
              return "We estimate your order will need "
                .concat(e.quantity, " ")
                .concat((0, B._6)("bag", e.quantity), ".");
          }
        },
        eQ = (e) => {
          switch (!0) {
            case 0 === e.unitPrice:
              return "Free";
            case eY(e):
            case e.isFlatFee:
              return "".concat((0, eV.aO)(e.unitPrice), " per order");
            default:
              return "".concat((0, eV.aO)(e.unitPrice), " each");
          }
        },
        eH = (e) => (eY(e) ? "Try me" : null),
        eX = (e) =>
          e
            ? ""
                .concat(F.YM.PRODUCT_IMAGE_URL, "/")
                .concat(e[0], "/")
                .concat(e, ".jpg")
            : eU,
        eJ = (e) => {
          switch (!0) {
            case e.length >= 3:
              return W.rS.rdsDevice.desktopSmallMin;
            case 2 === e.length:
              return W.rS.rdsDevice.tabletLargeMin;
            default:
              return W.rS.rdsDevice.tabletSmallMin;
          }
        },
        e$ = () => {
          var e, t, n, o, r, i;
          let { checkoutDetails: l } = (0, ep.wo)(),
            [a, s] = (0, D.useState)(
              null == l
                ? void 0
                : null === (e = l.orderAttributes) || void 0 === e
                ? void 0
                : null === (t = e.baggingOptions) || void 0 === t
                ? void 0
                : t.find((e) => e.selected)
            );
          return {
            options:
              null == l
                ? void 0
                : null === (n = l.orderAttributes) || void 0 === n
                ? void 0
                : n.baggingOptions,
            selectedBaggingOption: a,
            setSelectedBaggingOption: s,
            defaultSelectedOptionId:
              null ===
                (o = eG(
                  null == l
                    ? void 0
                    : null === (r = l.orderAttributes) || void 0 === r
                    ? void 0
                    : r.baggingOptions
                )) || void 0 === o
                ? void 0
                : o.optionId,
            shouldSetDefaultOption: !eZ(
              null == l
                ? void 0
                : null === (i = l.orderAttributes) || void 0 === i
                ? void 0
                : i.baggingOptions
            ),
          };
        };
      var e0 = n(86205),
        e1 = n(92022),
        e2 = n(34225),
        e6 = n(42864);
      function e4() {
        let e = (0, q.Z)([
          "\n  ",
          ";\n  display: flex;\n  border-radius: ",
          ";\n  padding: ",
          ";\n  align-items: center;\n  background-color: ",
          ";\n  img {\n    margin-right: ",
          ";\n  }\n  b {\n    ",
          ";\n  }\n",
        ]);
        return (
          (e4 = function () {
            return e;
          }),
          e
        );
      }
      function e3() {
        let e = (0, q.Z)([
          "\n  position: absolute;\n  top: -10px;\n  line-height: 1;\n",
        ]);
        return (
          (e3 = function () {
            return e;
          }),
          e
        );
      }
      K.ZP.figure
        .attrs((e) => ({
          className: "coles-targeting-BaggingOptionsTogetherToZero",
          ...e,
        }))
        .withConfig({
          componentId: "sc-3518ae6a-0",
        })(
        e4(),
        W.rS.rdsText.body_200,
        R.zr.s2,
        R.zr.s4,
        W.rS.colorBackground.secondary.default,
        R.zr.s4,
        W.rS.rdsText.body_200_bold
      );
      let e5 = K.ZP.span.withConfig({
          componentId: "sc-3518ae6a-1",
        })(e3()),
        e8 = (e) => {
          var t;
          let [n, o] = (0, _.Vb)([
              M.GO.ShowSwapaboxBaggingDescription,
              M.GO.ShowBaggingOptionBadges,
            ]),
            {
              isShoppingMethodDelivery: r,
              setSelectedBaggingOption: i,
              selectedBaggingOption: l,
              setBaggingPreference: a,
              deliveryOptionPref: s,
            } = e,
            { options: d = [] } = e$();
          (0, D.useEffect)(() => {
            l || i(d[0]);
          }, [d, i, l]);
          let u = (e) => {
              let t = d.find((t) => {
                var n;
                return (
                  (null === (n = t.optionId) || void 0 === n
                    ? void 0
                    : n.toString()) === e
                );
              });
              i(t),
                (0, es.Kk)(es.tw.Interaction, {
                  interaction: {
                    location: "checkout",
                    component: "packing preference",
                    description: null == t ? void 0 : t.displayName,
                  },
                });
            },
            c = Number(s) === el.TP.Unattended,
            p = eW(l, n),
            m = eJ(d);
          return (0, E.jsxs)(eT.Xp, {
            children: [
              (0, E.jsx)(e0.w, {
                defaultValue:
                  null == l
                    ? void 0
                    : null === (t = l.optionId) || void 0 === t
                    ? void 0
                    : t.toString(),
                legend: "Your packing preference",
                name: "bagging-options",
                onChange: u,
                horizontal: !0,
                wrap: !1,
                breakpoint: m,
                margin: !0,
                children: d
                  .filter((e) => !(1 === e.optionId && c))
                  .map((e) => {
                    let t = o && eH(e),
                      n = eX(e.bagSKU),
                      r = 1 !== e.optionId;
                    return (0, E.jsx)(
                      e1.p,
                      {
                        dataTestId: "bagging-options",
                        breakpoint: m,
                        ariaDescribedBy: "bagging-option-description-".concat(
                          e.optionId
                        ),
                        label: (0, E.jsxs)(eF, {
                          children: [
                            r &&
                              (0, E.jsx)(eB, {
                                children: (0, E.jsx)(eE.fg, {
                                  width: 96,
                                  height: 40,
                                  src: n,
                                  alt: "",
                                  "aria-hidden": "true",
                                }),
                              }),
                            (0, E.jsxs)("div", {
                              children: [
                                (0, E.jsx)("h3", {
                                  children: e.displayName,
                                }),
                                (0, E.jsx)("p", {
                                  children: eQ(e),
                                }),
                              ],
                            }),
                            t &&
                              (0, E.jsx)(e5, {
                                children: (0, E.jsx)(e2.C, {
                                  label: t,
                                  type: "guidance",
                                  size: "small",
                                }),
                              }),
                          ],
                        }),
                        value: e.optionId ? e.optionId.toString() : "",
                      },
                      e.optionId
                    );
                  }),
              }),
              (0, E.jsx)(e6.J, {
                name: "remember-bagging-pref",
                label: "Remember my packing preference",
                onChange: a,
              }),
              p &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  "data-testid": "bagging-preference-notification",
                  message: p,
                  type: "guidance",
                  role: "none",
                  ariaId: "bagging-option-description-".concat(
                    null == l ? void 0 : l.optionId
                  ),
                }),
              r &&
                (null == l ? void 0 : l.optionId) === 1 &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  "data-testid": "no-bags-notification",
                  message:
                    "We’ll unpack your order in your chosen spot, such as on a table or by the door",
                  type: "guidance",
                }),
            ],
          });
        };
      var e7 = n(60016);
      function e9() {
        let e = (0, q.Z)([
          "\n  margin-top: ",
          ";\n  .MuiFormHelperText-root {\n    margin-top: ",
          ";\n  }\n",
        ]);
        return (
          (e9 = function () {
            return e;
          }),
          e
        );
      }
      let te = K.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-DeliveryInstructionsDeliveryInstruction",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dff83501-0",
          })(e9(), R.zr.s3, R.zr.none),
        tt = (e) =>
          (0, E.jsx)(te, {
            children: (0, E.jsx)(e7.o, {
              id: "deliveryInstructionsTextInput",
              label: "Delivery instructions (optional)",
              dataTestid: "deliveryInstructionsTextInput",
              fullWidth: !0,
              maxLength: e.maxLength,
              value:
                null !== (y = e.deliveryInstructions) && void 0 !== y ? y : "",
              onChange: (t) => e.setDeliveryInstructions(t.currentTarget.value),
              description:
                "Add a note for the driver, e.g. leave my order around the side of the house.",
            }),
          });
      var tn = n(56756),
        to = n(26309),
        tr = n(70183),
        ti = n(47168);
      let tl = (e) => {
        var t;
        let [n, o] = (0, _.Vb)([
            M.GO.CheckoutOrderDetailsV2,
            eI.TP.TrolleyApiSaveSubstitutions,
          ]),
          [r] = (0, eg.Rf)(),
          [i, l] = (0, D.useState)(!1),
          [a, s] = (0, D.useState)(!1),
          [d, u] = (0, D.useState)(!1),
          [c, p] = (0, D.useState)(!1),
          {
            data: { allItems: m },
            refetch: v,
          } = (0, eI.K9)(!1, o),
          { checkoutDetails: h, refetch: y } = (0, ep.wo)(),
          [g] = (0, eg.xQ)(),
          f = (0, eu.ON)(),
          { data: b } = (0, N.xR)(),
          C = (0, D.useMemo)(() => (0, eA.oO)(m, e), [e, m]),
          S =
            null !== (t = null == h ? void 0 : h.minOrderValue) && void 0 !== t
              ? t
              : 0,
          x = async (e) => {
            let t = (0, tr.aP)(b);
            p(!0), l(!1);
            try {
              await r({
                body: {
                  items: e.map((e) => ({
                    productId: e.productId.toString(),
                    orderItemId: e.orderItemId,
                    quantity: "0",
                  })),
                  ageGateVerified: !!t,
                },
                storeId: f,
              }).unwrap(),
                await g({
                  storeId: f,
                  shouldUseOrderDetailsV2: n,
                }).unwrap();
              let o = await v();
              if (C < S || 0 === C) {
                u(!0);
                return;
              }
              (0, ti.Hm)(o.data), await y().unwrap();
            } catch (i) {
              s(!0);
            } finally {
              p(!1);
            }
          };
        return {
          setIsRemovingRestrictedItems: p,
          isRemovingRestrictedItems: c,
          isRestrictedItemsErrorModalOpen: a,
          setIsRestrictedItemsErrorModalOpen: s,
          onRemoveRestrictedItems: x,
          isRestrictedItemsModalOpen: i,
          setIsRestrictedItemsModalOpen: l,
          remainingTotalValue: C,
          isMOVModalOpen: d,
          minOrderValue: S,
        };
      };
      var ta = n(64321);
      function ts() {
        let e = (0, q.Z)(["\n  margin-bottom: ", ";\n"]);
        return (
          (ts = function () {
            return e;
          }),
          e
        );
      }
      function td() {
        let e = (0, q.Z)(["\n  color: ", ";\n  cursor: 'pointer';\n"]);
        return (
          (td = function () {
            return e;
          }),
          e
        );
      }
      function tu() {
        let e = (0, q.Z)(["\n  margin-bottom: ", ";\n"]);
        return (
          (tu = function () {
            return e;
          }),
          e
        );
      }
      function tc() {
        let e = (0, q.Z)([
          "\n  margin-top: ",
          ";\n  legend {\n    margin-bottom: ",
          ";\n    color: ",
          ";\n  }\n",
        ]);
        return (
          (tc = function () {
            return e;
          }),
          e
        );
      }
      let tp = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionsSpinnerWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-b185d566-0",
          })(ts(), R.zr.s8),
        tm = (0, K.ZP)(eo.Qj)
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionsButton",
            ...e,
          }))
          .withConfig({
            componentId: "sc-b185d566-1",
          })(td(), W.rS.colorForeground.primary),
        tv = (0, K.ZP)(L.T)
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionsSpinner",
            ...e,
          }))
          .withConfig({
            componentId: "sc-b185d566-2",
          })(tu(), (0, ta.Q1)(336)),
        th = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-b185d566-3",
          })(tc(), R.zr.s6, R.zr.s3, W.rS.colorBackground.inverse.hover),
        ty = (e) => {
          if (1 === e.length) return e[0].optionId == el.TP.Unattended;
          if (2 === e.length) {
            let t = e.find((e) => e.optionId === el.TP.Signed);
            return t && !t.enabled;
          }
          return !1;
        },
        tg = (e) => {
          let {
              onDeliveryOptionChange: t,
              deliveryOptionPref: n,
              restrictedItems: o,
              slot: r,
              availableDeliveryOptions: i,
              setSelectedBaggingOption: l,
            } = e,
            {
              isRemovingRestrictedItems: a,
              onRemoveRestrictedItems: s,
              isRestrictedItemsModalOpen: d,
              setIsRestrictedItemsModalOpen: u,
              setIsRestrictedItemsErrorModalOpen: c,
              isRestrictedItemsErrorModalOpen: p,
              isMOVModalOpen: m,
              minOrderValue: v,
              remainingTotalValue: h = 0,
            } = tl(o),
            y = Y(),
            { options: g = [] } = e$(),
            f = null == r ? void 0 : r.windowType,
            b = (e) => {
              t(e), Number(e) === el.TP.Unattended && l(ez(g));
            };
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(th, {
                children: (0, E.jsx)(e0.w, {
                  defaultValue: String(n),
                  legend: "Delivery type",
                  name: "delivery-options",
                  onChange: b,
                  horizontal: !0,
                  margin: !0,
                  children: i.map((e) =>
                    (0, E.jsx)(
                      e1.p,
                      {
                        isDisabled:
                          !e.enabled ||
                          (o.length > 0 && e.optionId === el.TP.Unattended),
                        dataTestId: "delivery-options",
                        label: (0, E.jsx)(eF, {
                          children: (0, E.jsxs)("div", {
                            children: [
                              (0, E.jsxs)("h3", {
                                children: [
                                  e.optionId === el.TP.Unattended
                                    ? "Unattended delivery"
                                    : "Sign for delivery",
                                  !e.enabled && " (Unavailable)",
                                ],
                              }),
                              (0, E.jsx)("p", {
                                children:
                                  e.optionId === el.TP.Unattended
                                    ? "We’ll follow your instructions to safely leave your order"
                                    : "Someone must be at the address and show age/ID",
                              }),
                            ],
                          }),
                        }),
                        value: String(e.optionId),
                      },
                      e.optionId
                    )
                  ),
                }),
              }),
              ty(i) &&
                Number(n) === el.TP.Unattended &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  message:
                    f === ea.kW.windowType.PARTNERDELIVERY ||
                    f === ea.kW.windowType.PARTNERRAPID
                      ? (0, E.jsxs)(E.Fragment, {
                          children: [
                            "They’ll leave your order in a safe place at your delivery address.",
                            " ",
                            (0, E.jsx)(eo.rU, {
                              href: F.Ce.coles.Help.Delivery,
                              label: "More about our partner drivers.",
                              openInNewTab: !0,
                              variant: "inline",
                              size: "small",
                            }),
                          ],
                        })
                      : (0, E.jsx)(E.Fragment, {
                          children:
                            "Your order will be left in a safe place at your delivery address.",
                        }),
                  name:
                    f === ea.kW.windowType.PARTNERDELIVERY ||
                    f === ea.kW.windowType.PARTNERRAPID
                      ? "A Partner driver will deliver your order"
                      : "You've selected an unattended only slot",
                  type: "guidance",
                }),
              !ty(i) &&
                f === ea.kW.windowType.PARTNERDELIVERY &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  message: (0, E.jsxs)(E.Fragment, {
                    children: [
                      "Partner drivers are given your name, address and contact details.",
                      " ",
                      (0, E.jsx)(eo.rU, {
                        href: F.Ce.coles.Help.Delivery,
                        label: "More about our partner drivers.",
                        openInNewTab: !0,
                        variant: "inline",
                        size: "small",
                      }),
                    ],
                  }),
                  name: "A Partner driver will deliver your order",
                  type: "guidance",
                }),
              Number(n) === el.TP.Signed &&
                o.length > 0 &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eE.P_, {
                      hasIcon: !0,
                      isTransparent: !0,
                      message: (0, E.jsxs)(E.Fragment, {
                        children: [
                          "If you'd like your delivery left unattended, some items will need to be removed from your trolley.\xa0",
                          (0, E.jsx)(tm, {
                            label: "Review items",
                            size: "small",
                            variant: "light",
                            onClick: () => u(!0),
                          }),
                        ],
                      }),
                      name: "Some items need to be signed for",
                      type: "guidance",
                    }),
                    (0, E.jsx)(to.mId, {
                      isOpen: !a && d,
                      onCancelClick: () => u(!1),
                      assetsUrl:
                        "https://productimages.coles.com.au/productimages",
                      onRemoveItemsClick: () => s(o),
                      onModalClose: () => u(!1),
                      products: o,
                    }),
                  ],
                }),
              (0, E.jsx)(M.e3, {
                minimumOrderValue: v.toString(),
                onBackToTrolleyClick: y,
                spendMoreValue: v - h,
                isOpen: m,
              }),
              (0, E.jsx)(eE.eW, {
                title: "Something went wrong",
                description:
                  "Sorry, we couldn't remove the item. Try again later, or you can choose sign for order to keep them item.",
                btnText: "Return to checkout",
                isOpen: p,
                onBtnClick: () => c(!1),
                onClose: () => c(!1),
              }),
              (0, E.jsx)(tn.u, {
                isOpen: a,
                title: "",
                dividers: !1,
                isMobileFullScreen: !0,
                children: (0, E.jsx)(tp, {
                  children: (0, E.jsx)(tv, {
                    title: "Just a moment",
                    description: "Removing items",
                    ariaLabel: "Removing items",
                    size: "30",
                  }),
                }),
              }),
            ],
          });
        },
        tf = (e) => {
          let { className: t } = e;
          return (0, E.jsx)(eE.P_, {
            className: t,
            hasIcon: !0,
            isFullWidth: !0,
            message: (0, E.jsx)("p", {
              children:
                "Select continue to complete this step before placing your order.",
            }),
            type: "error",
          });
        };
      function tb() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (tb = function () {
            return e;
          }),
          e
        );
      }
      function tC() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (tC = function () {
            return e;
          }),
          e
        );
      }
      let tS = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-OrderDetailsOrderDetailsContainer",
            ...e,
          }))
          .withConfig({
            componentId: "sc-2761f330-0",
          })(tb(), eR.XK.s6.top),
        tx = (0, K.ZP)(tf)
          .attrs((e) => ({
            className:
              "coles-targeting-OrderDetailsStyledStepErrorNotification",
            ...e,
          }))
          .withConfig({
            componentId: "sc-2761f330-1",
          })(tC(), eR.XK.s6.top);
      var tw = n(35196),
        tI = n(28465);
      ((o = g || (g = {})).CC = "CC"),
        (o.SD = "SD"),
        (o.MC = "MC"),
        (o.SL = "SL"),
        (o.CE = "CE"),
        (o.UD = "UD"),
        (o.HD = "HD"),
        (o.RD = "RD");
      let tP = (e, t) => {
          var n, o, r, i, l, a, s, d, u, c, p, m, v;
          let h;
          let y = null == e ? void 0 : e.shoppingConfiguration.shoppingMethod;
          y === el.jY.CLICK_AND_COLLECT
            ? (h = ""
                .concat(
                  null == e
                    ? void 0
                    : null === (u = e.location) || void 0 === u
                    ? void 0
                    : u.locationName,
                  "\n"
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (c = e.location) || void 0 === c
                    ? void 0
                    : c.address,
                  ", "
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (p = e.location) || void 0 === p
                    ? void 0
                    : p.suburb,
                  " "
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (m = e.location) || void 0 === m
                    ? void 0
                    : m.state,
                  " "
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (v = e.location) || void 0 === v
                    ? void 0
                    : v.postcode
                ))
            : (y === el.jY.DELIVERY || y === el.jY.REMOTE_DELIVERY) &&
              (null == e ? void 0 : e.addressProfile) &&
              (h = (0, eu.yd)(null == e ? void 0 : e.addressProfile));
          let { badgeText: g, badgeTooltipText: f } = tT({
            shoppingMethod: y,
            windowType:
              null == e
                ? void 0
                : null === (n = e.orderAttributes) || void 0 === n
                ? void 0
                : null === (o = n.slot) || void 0 === o
                ? void 0
                : o.windowType,
            windowTypeDesc:
              null == e
                ? void 0
                : null === (r = e.orderAttributes) || void 0 === r
                ? void 0
                : null === (i = r.slot) || void 0 === i
                ? void 0
                : i.windowTypeDesc,
            subShoppingMethod:
              null == e
                ? void 0
                : null === (l = e.orderAttributes) || void 0 === l
                ? void 0
                : l.subShoppingMethod,
            subShoppingMethodDesc:
              null == e
                ? void 0
                : null === (a = e.orderAttributes) || void 0 === a
                ? void 0
                : a.subShoppingMethodDesc,
          });
          return {
            badgeText: g,
            badgeTooltipText: f,
            deliveryNote:
              null == e
                ? void 0
                : null === (s = e.orderAttributes) || void 0 === s
                ? void 0
                : null === (d = s.delivery) || void 0 === d
                ? void 0
                : d.instructions,
            shoppingMethodType:
              null == e ? void 0 : e.shoppingConfiguration.shoppingMethod,
            selectedLocation: h,
            ...(y === el.jY.REMOTE_DELIVERY &&
              t && {
                remoteProvider: (0, eu.cK)(t),
              }),
            selectedSlot:
              null == e ? void 0 : e.orderAttributes.slot.windowTime,
            slotWindowType:
              null == e ? void 0 : e.orderAttributes.slot.windowType,
            slotWindowTypeDisplayBadge:
              null == e
                ? void 0
                : e.orderAttributes.slot.windowTypeDisplayBadge,
          };
        },
        tT = (e) => {
          let {
              shoppingMethod: t,
              windowType: n,
              windowTypeDesc: o,
              subShoppingMethod: r,
              subShoppingMethodDesc: i,
            } = e,
            l = t === el.jY.CLICK_AND_COLLECT && i;
          switch (!0) {
            case l && r === g.CC:
              return {
                badgeText: i,
                badgeTooltipText:
                  "Park in a Click & Collect bay and we'll bring your order to your car.",
              };
            case l && r === g.MC:
              return {
                badgeText: i,
                badgeTooltipText: "Collect your order from Coles van.",
              };
            case l && r === g.SL:
              return {
                badgeText: i,
                badgeTooltipText:
                  "Collect your order from a temperature-controlled locker.",
              };
            default:
              return {
                badgeText: "",
                badgeTooltipText: "",
              };
          }
        },
        tk = (e, t) =>
          (null == e
            ? void 0
            : e.map((e) => {
                var n;
                return {
                  ...e,
                  selected:
                    (null == t ? void 0 : t.toString()) ===
                    (null == e
                      ? void 0
                      : null === (n = e.optionId) || void 0 === n
                      ? void 0
                      : n.toString()),
                };
              })) || [],
        tj = function (e, t) {
          let { storeId: n, orderId: o, shouldUseOrderDetailsV2: r } = t,
            i =
              arguments.length > 2 && void 0 !== arguments[2]
                ? arguments[2]
                : [];
          return ed.l9.util.updateQueryData(
            "getCheckoutOrderDetails",
            {
              orderId: o,
              storeId: n,
              colesIdBarcode: String((0, tw.getCookie)(tI.LJ.ColesIdBarcode)),
              shouldUseOrderDetailsV2: r,
            },
            (t) => {
              if (null == t ? void 0 : t.orderAttributes) {
                var n, o, r, l, a, s, d, u, c, p;
                (null === (n = t.shoppingConfiguration) || void 0 === n
                  ? void 0
                  : n.shoppingMethod) === el.jY.REMOTE_DELIVERY
                  ? (t.orderAttributes = {
                      ...t.orderAttributes,
                      delivery: {
                        options: i.length
                          ? i
                          : (null === (o = t.orderAttributes) || void 0 === o
                              ? void 0
                              : null === (r = o.delivery) || void 0 === r
                              ? void 0
                              : r.options) || [],
                        instructions:
                          null !== (s = e.deliveryInstructions) && void 0 !== s
                            ? s
                            : void 0,
                        remote: {
                          providerAccount:
                            null == e
                              ? void 0
                              : null === (l = e.remote) || void 0 === l
                              ? void 0
                              : l.providerAccount,
                          deliveryAddress:
                            null == e
                              ? void 0
                              : null === (a = e.remote) || void 0 === a
                              ? void 0
                              : a.deliveryAddress,
                        },
                      },
                    })
                  : (t.orderAttributes = {
                      ...t.orderAttributes,
                      delivery: {
                        options: i.length
                          ? i
                          : (null === (d = t.orderAttributes) || void 0 === d
                              ? void 0
                              : null === (u = d.delivery) || void 0 === u
                              ? void 0
                              : u.options) || [],
                        instructions:
                          null !== (p = e.deliveryInstructions) && void 0 !== p
                            ? p
                            : void 0,
                      },
                      baggingOptions:
                        null === (c = t.orderAttributes.baggingOptions) ||
                        void 0 === c
                          ? void 0
                          : c.map((t) => ({
                              ...t,
                              selected:
                                Number(e.baggingOptionId) ===
                                Number(t.optionId),
                            })),
                    });
              }
            }
          );
        };
      var tA = n(28117);
      function tE() {
        let e = (0, q.Z)([
          "\n  margin: ",
          " 0 0 0;\n\n  .MuiInputBase-root {\n    max-width: 443px;\n  }\n  .notification {\n    margin-top: ",
          ";\n  }\n",
        ]);
        return (
          (tE = function () {
            return e;
          }),
          e
        );
      }
      function tO() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  align-items: center;\n  margin-bottom: ",
          ";\n  ",
          "\n",
        ]);
        return (
          (tO = function () {
            return e;
          }),
          e
        );
      }
      let tD = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-DeliveryDetails",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f1cf797c-0",
          })(tE(), R.zr.s6, R.zr.s4),
        tR = K.ZP.h2
          .attrs((e) => ({
            className: "coles-targeting-DeliveryDetailsSubheading",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f1cf797c-1",
          })(tO(), R.zr.s3, W.rS.rdsText.body_500_bold),
        tL = (e) => {
          let { control: t, register: n } = e,
            o = t._defaultValues;
          return (0, E.jsxs)(tD, {
            children: [
              (0, E.jsx)(tR, {
                children: "For delivery orders",
              }),
              (0, E.jsx)(ek.Qr, {
                name: "finalAddress",
                control: t,
                render: (e) => {
                  let {
                    field: { value: t },
                    fieldState: { error: r },
                  } = e;
                  return (0, E.jsx)(e7.o, {
                    id: "finalAddress",
                    label: "Confirm your final address",
                    dataTestid: "delivery-final-address",
                    fullWidth: !0,
                    maxLength: 128,
                    defaultValue: o.finalAddress,
                    value: t,
                    description:
                      "Add small details to your address to help delivery drivers find you, i.e. Lot 4 to Lot 4a.",
                    error: !!r,
                    helperText: r && r.message,
                    ...n("finalAddress", {
                      required:
                        "This doesn't look right. Make sure your address is populated",
                      minLength: {
                        value: 15,
                        message:
                          "This doesn't look right. Make sure your address is populated",
                      },
                    }),
                  });
                },
              }),
              (0, E.jsx)(ek.Qr, {
                name: "customerAccountNumber",
                control: t,
                render: (e) => {
                  let {
                    field: { value: t },
                    fieldState: { error: r },
                  } = e;
                  return (0, E.jsx)(e7.o, {
                    id: "customerAccountNumber",
                    label: "Customer account number (optional)",
                    dataTestid: "customer-account-number",
                    fullWidth: !0,
                    maxLength: 20,
                    defaultValue: o.customerAccountNumber,
                    value: t,
                    description:
                      "This is your account number with the delivery provider.",
                    ...n("customerAccountNumber"),
                    error: !!r,
                    helperText: r && r.message,
                  });
                },
                rules: {
                  validate: (e) =>
                    (0, tA.$0)(e, "Enter a valid customer account number"),
                },
              }),
              (0, E.jsx)(eE.P_, {
                hasIcon: !0,
                isTransparent: !0,
                "data-testid": "remote-delivery-desclaimer",
                name: "Third-party freight costs",
                message:
                  "Charges exclude freight costs from the third-party provider you choose. Contact the provider to organise payment separately. ",
                type: "guidance",
                className: "notification",
              }),
            ],
          });
        },
        tN = (e) => {
          var t, n, o, r, i;
          let {
              shoppingMethodSummary: l,
              restrictedItems: a,
              orderDetailsPreferences: s,
              continueBtnProps: d,
              showStepError: u,
            } = e,
            {
              setSelectedBaggingOption: c,
              selectedBaggingOption: p,
              defaultSelectedOptionId: m,
              shouldSetDefaultOption: v,
            } = e$(),
            { refetch: h, checkoutDetails: y } = (0, ep.wo)(),
            [g] = (0, _.Vb)([M.GO.CheckoutOrderDetailsV2]),
            f = l.shoppingMethodType === el.jY.DELIVERY,
            b = l.shoppingMethodType === el.jY.REMOTE_DELIVERY,
            [C, S] = (0, D.useState)(
              (null == y
                ? void 0
                : null === (t = y.addressProfile) || void 0 === t
                ? void 0
                : t.deliveryInstructions) ||
                (null === (n = s.delivery) || void 0 === n
                  ? void 0
                  : n.instructions)
            ),
            x = null === (o = s.delivery) || void 0 === o ? void 0 : o.remote,
            w = null == x ? void 0 : x.deliveryAddress,
            I = w || (l.selectedLocation ? l.selectedLocation : ""),
            P = (0, ej.TL)(),
            [T, k] = (0, D.useState)(!1),
            j = (0, G.$)(),
            [A, O] = (0, D.useState)(
              (0, eA.FT)(
                null == s
                  ? void 0
                  : null === (r = s.delivery) || void 0 === r
                  ? void 0
                  : r.options,
                a
              )
            ),
            R = (0, eu.ON)(),
            [L, { isLoading: N, error: F, reset: B }] = (0, ed.hr)(),
            [V] = (0, eg.xQ)(),
            {
              control: U,
              handleSubmit: Z,
              register: Y,
            } = (0, ek.cI)({
              defaultValues: {
                finalAddress: I,
                customerAccountNumber: null == x ? void 0 : x.providerAccount,
              },
              mode: "onChange",
              shouldFocusError: !0,
            }),
            q = (e) => {
              var t;
              let n;
              let o = (0, eu.uz)(),
                r = {
                  deliveryOptionId: String(A),
                  deliveryInstructions: null != C ? C : "",
                  baggingOptionSaveToProfile: T,
                  baggingOptionId:
                    (null == p
                      ? void 0
                      : null === (t = p.optionId) || void 0 === t
                      ? void 0
                      : t.toString()) || (null == m ? void 0 : m.toString()),
                  remote: {
                    deliveryAddress: e.finalAddress,
                    providerAccount: e.customerAccountNumber,
                  },
                };
              if (b) {
                let { baggingOptionId: i, ...l } = r;
                n = l;
              } else {
                let { remote: a, ...s } = r;
                n = s;
              }
              return (
                o.shoppingMethod === el.jY.CLICK_AND_COLLECT &&
                  (delete n.deliveryOptionId, delete n.deliveryInstructions),
                n
              );
            },
            K = async (t) => {
              var n, o, r, i, l;
              if (N) return;
              let a = q(t),
                d = tk(
                  (null == s
                    ? void 0
                    : null === (n = s.delivery) || void 0 === n
                    ? void 0
                    : n.options) || [],
                  A
                ),
                u =
                  (null ===
                    (o =
                      null == s
                        ? void 0
                        : null === (r = s.delivery) || void 0 === r
                        ? void 0
                        : null === (i = r.options) || void 0 === i
                        ? void 0
                        : i.find((e) => e.optionId === A)) || void 0 === o
                    ? void 0
                    : o.displayName) || "";
              try {
                await L({
                  orderId: (null == y ? void 0 : y.orderId) || "",
                  body: {
                    ...{
                      storeId: R,
                      ...a,
                    },
                    storeId: R,
                    addressId:
                      (null == y
                        ? void 0
                        : null === (l = y.shoppingConfiguration) || void 0 === l
                        ? void 0
                        : l.addressId) || "",
                  },
                }).unwrap(),
                  P(
                    tj(
                      {
                        storeId: R,
                        ...a,
                      },
                      {
                        storeId: R,
                        orderId: (null == y ? void 0 : y.orderId) || "",
                        shouldUseOrderDetailsV2: g,
                      },
                      d
                    )
                  ),
                  (0, es.Kk)(es.tw.CheckoutUpdatePreference, eD(a, u)),
                  (v || m !== (null == p ? void 0 : p.optionId)) &&
                    (await V({
                      storeId: R,
                      shouldUseOrderDetailsV2: g,
                    }).unwrap(),
                    h()),
                  e.continueBtnProps.onComplete();
              } catch (c) {}
            },
            { deliveryNote: W, ...Q } = l;
          return (0, E.jsxs)(tS, {
            children: [
              (0, E.jsxs)(e_, {
                children: [
                  (0, E.jsx)(eO.G3, {
                    ...Q,
                    isEditable: !0,
                    showSlot: !0,
                    onClickEditLocation: () => j(z.B5.ShoppingMethod),
                    onClickEditSlot: () => j(z.B5.SlotSelector),
                    isCheckout: !0,
                  }),
                  b &&
                    (0, E.jsx)(tL, {
                      control: U,
                      register: Y,
                    }),
                  f &&
                    (0, E.jsx)(tg, {
                      slot: s.slot,
                      restrictedItems: a,
                      availableDeliveryOptions:
                        (null == s
                          ? void 0
                          : null === (i = s.delivery) || void 0 === i
                          ? void 0
                          : i.options) || [],
                      deliveryOptionPref: A,
                      onDeliveryOptionChange: O,
                      setSelectedBaggingOption: c,
                    }),
                  (f || b) &&
                    (0, E.jsx)(tt, {
                      deliveryInstructions: C,
                      setDeliveryInstructions: S,
                      maxLength: b ? 200 : 400,
                    }),
                  !b &&
                    (0, E.jsx)(e8, {
                      deliveryOptionPref: A,
                      isShoppingMethodDelivery: f,
                      setSelectedBaggingOption: c,
                      selectedBaggingOption: p,
                      setBaggingPreference: k,
                    }),
                ],
              }),
              u && (0, E.jsx)(tx, {}),
              (0, E.jsx)(M.qk, {
                title: d.title,
                isLoading: N,
                onComplete: () => Z(K)(),
                label: "Continue to trolley & substitutions",
              }),
              (0, E.jsx)(tM, {
                isOpen: Boolean(F),
                closeModal: () => {
                  B();
                },
              }),
            ],
          });
        },
        tM = (e) => {
          let { isOpen: t, closeModal: n } = e;
          return (0, E.jsx)(eE.eW, {
            title: "Something went wrong",
            description: (0, E.jsxs)(E.Fragment, {
              children: [
                "Sorry, we couldn't save your order details. Try again later, and if that doesn't work contact",
                " ",
                (0, E.jsx)(eo.rU, {
                  label: "Customer Care",
                  variant: "inline",
                  href: F.Ce.coles.help,
                  children: "Customer Care",
                }),
                ".",
              ],
            }),
            btnText: "Return to checkout",
            isOpen: t,
            onBtnClick: n,
            onClose: n,
          });
        };
      tN.ErrorModal = tM;
      let tF = (e) => ({
          checkout: {
            errors: e,
          },
        }),
        tB = (e, t) => {
          var n;
          if (!e)
            return {
              firstName: "",
              lastName: "",
              email: "",
              phone: "",
            };
          if (t)
            return {
              ...e.contactDetails,
              phone: e.contactDetails.phone || "",
            };
          let o = null == e ? void 0 : e.shoppingConfiguration.shoppingMethod,
            r = null == e ? void 0 : e.addressProfile;
          return o === el.jY.DELIVERY || o === el.jY.REMOTE_DELIVERY
            ? {
                firstName: null == r ? void 0 : r.recipientFirstName,
                lastName: null == r ? void 0 : r.recipientLastName,
                email: null == r ? void 0 : r.email,
                phone:
                  (null == r ? void 0 : r.phone) ||
                  (null == e ? void 0 : e.contactDetails.phone) ||
                  "",
              }
            : {
                ...(null == e ? void 0 : e.contactDetails),
                phone:
                  (null == e
                    ? void 0
                    : null === (n = e.contactDetails) || void 0 === n
                    ? void 0
                    : n.phone) || "",
              };
        },
        t_ = (e, t) =>
          e === el.jY.DELIVERY || e === el.jY.REMOTE_DELIVERY
            ? {
                email: t.email,
                firstName: t.firstName,
                lastName: t.lastName,
                phone: t.mobile || t.phone,
              }
            : {
                mobile: t.mobile,
                phone: t.phone,
              };
      ((r = f || (f = {})).orderDetails = "your_order_details"),
        (r.trolleySummary = "review_your_trolley"),
        (r.contactDetails = "check_your_details"),
        (r.paymentMethod = "choose_payment_method");
      let tV = {
          orderDetails: 0,
          trolleySummary: 1,
          contactDetails: 2,
          paymentMethod: 3,
          customerAgreement: 4,
        },
        tU = (e) =>
          Object.keys(e).reduce((t, n) => {
            let o = Object.keys(tV).find((e) => tV[e] === parseInt(n));
            return (t[f[o]] = e[tV[o]]), t;
          }, {}),
        tZ = {
          [tV.orderDetails]: (e) =>
            e === el.jY.CLICK_AND_COLLECT ? "Click & Collect" : "Delivery",
          [tV.trolleySummary]: () => "Review trolley & substitutions",
          [tV.contactDetails]: () => "Check your details",
          [tV.paymentMethod]: (e, t) => {
            if ((null == t ? void 0 : t.isActive) === !0)
              return "Choose a payment method";
            switch (e) {
              case el.uG.BillMeLater:
                return "Pay with credit account";
              case el.uG.Card:
                return "Pay with debit or credit card";
              case el.uG.PayPal:
                return "Pay with PayPal";
              case el.uG.Flypay:
                return "Pay with flypay";
              default:
                return "Choose a payment method";
            }
          },
          [tV.customerAgreement]: (e, t) => "Customer agreement",
        },
        tz = (e) => Object.keys(e).every((t) => e[t]),
        tG = (e, t) => {
          let n = tB(e, t);
          return Boolean(
            (null == n ? void 0 : n.firstName) &&
              (null == n ? void 0 : n.lastName) &&
              (null == n ? void 0 : n.phone) &&
              (null == n ? void 0 : n.email)
          );
        },
        tY = (e, t) => {
          if (
            e === el.uG.Flypay &&
            (null == t ? void 0 : t.name) === el.SE.SavedFlypay
          ) {
            var n, o;
            return (
              !!(null == t
                ? void 0
                : null === (n = t.data) || void 0 === n
                ? void 0
                : n.flypayPaymentOrderId) &&
              !!(null == t
                ? void 0
                : null === (o = t.data) || void 0 === o
                ? void 0
                : o.flypaySessionId)
            );
          }
          return null != e;
        },
        tq = (e, t) => {
          var n, o;
          return (
            !t &&
            ((null != e &&
              null !== (n = e.orderAttributes) &&
              void 0 !== n &&
              !!n.orderLevelPreference) ||
              (null !==
                (o =
                  null == e ? void 0 : e.orderAttributes.substituteOptions) &&
              void 0 !== o
                ? o
                : []
              ).some((e) => e.selected))
          );
        },
        tK = (e) => {
          var t, n, o, r;
          if (
            null == e
              ? void 0
              : null === (t = e.orderAttributes) || void 0 === t
              ? void 0
              : t.orderLevelPreference
          )
            return !0;
          let i = null == e ? void 0 : e.shoppingConfiguration.shoppingMethod,
            l = (
              null !==
                (r = null == e ? void 0 : e.orderAttributes.baggingOptions) &&
              void 0 !== r
                ? r
                : []
            ).some((e) => e.selected),
            a =
              null === (n = null == e ? void 0 : e.orderAttributes.delivery) ||
              void 0 === n
                ? void 0
                : null === (o = n.options) || void 0 === o
                ? void 0
                : o.find((e) => e.selected);
          return (
            (i === el.jY.DELIVERY && !!l && !!a) ||
            i === el.jY.REMOTE_DELIVERY ||
            (i === el.jY.CLICK_AND_COLLECT && !!l)
          );
        },
        tW = (e, t) => {
          let n = Object.keys(e).map(Number),
            o = n.length,
            r = n.filter((t) => e[t]),
            { activeId: i } = (0, M.ON)(r, t, o);
          return i;
        },
        tQ = (e, t, n, o, r) => ({
          [tV.orderDetails]: tK(e),
          [tV.trolleySummary]: tq(e, o),
          [tV.contactDetails]: tG(e, r),
          [tV.paymentMethod]: tY(t, n),
        }),
        tH = (e, t, n) => {
          let o = (0, D.useRef)(!1),
            [r, i] = (0, D.useState)(null);
          return (
            (0, D.useEffect)(() => {
              var r, l, a, s;
              let d =
                  (null == n
                    ? void 0
                    : null === (r = n.shoppingConfiguration) || void 0 === r
                    ? void 0
                    : r.shoppingMethod) === el.jY.REMOTE_DELIVERY,
                u =
                  null == n
                    ? void 0
                    : null === (l = n.orderAttributes) || void 0 === l
                    ? void 0
                    : null === (a = l.delivery) || void 0 === a
                    ? void 0
                    : null === (s = a.remote) || void 0 === s
                    ? void 0
                    : s.deliveryAddress;
              t ||
                o.current ||
                ((o.current = !0), d ? u || i(0) : i(tW(e, null)));
            }, [t, e, n, i]),
            [r, i]
          );
        },
        tX = (e) => {
          let {
              isPageLoaded: t,
              completedPaymentType: n,
              savedPaymentMethodForOrder: o,
              reviewTrolley: r = !1,
            } = e,
            [i, l] = (0, D.useState)(!1),
            [a, s] = (0, D.useState)(!1),
            { checkoutDetails: d } = (0, ep.wo)(!1),
            [u, c] = (0, _.Vb)([
              M.GO.CheckoutReviewTrolley,
              M.GO.CheckoutOrderDetailsV2,
            ]),
            p = tQ(d, n, o, !!u && r, c),
            m = tz(p),
            [v, h] = tH(p, !t, d),
            y = (e) => {
              h(e), s(!0);
            },
            g = (0, D.useMemo)(
              () =>
                Object.keys(p)
                  .filter((e) => !1 === p[Number(e)])
                  .map(Number),
              [p]
            ),
            f = (e) => {
              (0, es.Kk)(
                es.tw.CheckoutErrors,
                tF(
                  e.map((e) => ({
                    error_description: tZ[e](
                      null == d
                        ? void 0
                        : d.shoppingConfiguration.shoppingMethod
                    ),
                    error_type: Object.keys(tV)[e],
                  }))
                )
              );
            },
            b = (e) => {
              let t = tW(p, null);
              if (null !== t) {
                l(!0), y(t), f(g);
                return;
              }
              e();
            },
            C = (e) => g.includes(e) && i;
          return {
            isAllStepsComplete: m,
            activeStepInd: v,
            isActive: (e) => v === e,
            completedSteps: p,
            setActiveStepInd: y,
            isSubmitted: i,
            validateAndSubmitSteps: b,
            shouldShowStepError: C,
            unCompletedSteps: g,
            isDirty: a,
          };
        };
      function tJ() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (tJ = function () {
            return e;
          }),
          e
        );
      }
      let t$ = (0, K.ZP)(tf)
          .attrs((e) => ({
            className:
              "coles-targeting-ContactDetailsStyledStepErrorNotification",
            ...e,
          }))
          .withConfig({
            componentId: "sc-be1f76be-0",
          })(tJ(), eR.XK.s4.vertical),
        t0 = (e) => {
          var t;
          let {
              checkoutDetails: n,
              completeStep: o,
              continueButtonTitle: r,
              showStepError: i,
            } = e,
            [l, a] = (0, D.useState)(!1),
            [s, d] = (0, D.useState)(!1),
            u = null == n ? void 0 : n.shoppingConfiguration.shoppingMethod,
            [c, { isLoading: p }] = (0, ed.z5)(),
            [m, { isLoading: v }] = (0, ed.NG)(),
            h = null == n ? void 0 : n.addressProfile,
            [y] = (0, _.Vb)([M.GO.CheckoutOrderDetailsV2]),
            g = (null == n ? void 0 : n.orderId) || "",
            f =
              (null == n
                ? void 0
                : null === (t = n.shoppingConfiguration) || void 0 === t
                ? void 0
                : t.fulfillmentStoreId) || "",
            { contactDetails: b, defaultFormValues: C } = (0, D.useMemo)(() => {
              let e = tB(n, y) || {
                  firstName: "",
                  lastName: "",
                  email: "",
                  phone: "",
                },
                t = (0, B.mh)(e.phone) === el.sw.MOBILE,
                o = {
                  firstName: e.firstName,
                  lastName: e.lastName,
                  email: e.email,
                  mobile: t ? e.phone : "",
                  phone: t ? "" : e.phone,
                };
              return {
                contactDetails: e,
                defaultFormValues: o,
              };
            }, [n, y]),
            {
              control: S,
              reset: x,
              handleSubmit: w,
              trigger: I,
              formState: P,
              setFocus: T,
            } = (0, ek.cI)({
              defaultValues: C,
              mode: "all",
              shouldUnregister: !0,
            });
          if (
            ((0, D.useEffect)(() => {
              x(C);
            }, [x, C]),
            (0, D.useEffect)(() => {
              i && !P.isValid && I();
            }, [P, I, i]),
            !n)
          )
            return null;
          let k = s || !b.phone,
            j = async (e) => {
              try {
                u === el.jY.CLICK_AND_COLLECT
                  ? await m({
                      body: {
                        contacts: t_(el.jY.CLICK_AND_COLLECT, e),
                      },
                      shouldUseOrderDetailsV2: y
                        ? {
                            useOrderDetailsV2Flag: y,
                            storeId: f,
                            orderId: g,
                          }
                        : void 0,
                    }).unwrap()
                  : (u === el.jY.DELIVERY || u === el.jY.REMOTE_DELIVERY) &&
                    (await c({
                      addressId: null == h ? void 0 : h.id,
                      body: t_(u, e),
                      useOrderDetailsV2Flag: y,
                      storeId: f,
                      orderId: g,
                    }).unwrap()),
                  (0, es.Kk)(es.tw.CheckoutUpdateCustomerDetails),
                  o();
              } catch (t) {
                a(!0);
              }
            };
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(eE.eW, {
                title: "Your contact details couldn't be updated",
                description:
                  "Sorry, we can't update your contact details right now. Please try again in a few minutes.",
                btnText: "Return to checkout",
                isOpen: l,
                onBtnClick: () => a(!1),
                onClose: () => a(!1),
              }),
              k
                ? (0, E.jsxs)(E.Fragment, {
                    children: [
                      (0, E.jsx)(M.x4, {
                        shoppingMethod: u,
                        control: S,
                        reset: x,
                        setFocus: T,
                      }),
                      i && P.isValid && (0, E.jsx)(t$, {}),
                      (0, E.jsx)(M.qk, {
                        title: "contact-details",
                        onComplete: () => w(j)(),
                        isLoading: p || v,
                        label: "Continue to payment",
                      }),
                    ],
                  })
                : (0, E.jsxs)(E.Fragment, {
                    children: [
                      (0, E.jsx)(M.wO, {
                        name: "".concat(b.firstName, " ").concat(b.lastName),
                        email: b.email,
                        phone: b.phone,
                        onChangeButtonClick: () => d(!0),
                        contactDetailsToolTip:
                          "Contact details can be updated in account settings",
                        shoppingMethod: u,
                      }),
                      i && P.isValid && (0, E.jsx)(t$, {}),
                      (0, E.jsx)(M.qk, {
                        title: "contact-details",
                        onComplete: o,
                        label: "Continue to payment",
                      }),
                    ],
                  }),
            ],
          });
        };
      function t1() {
        let e = (0, q.Z)(["\n  margin: ", " 0;\n"]);
        return (
          (t1 = function () {
            return e;
          }),
          e
        );
      }
      function t2() {
        let e = (0, q.Z)([
          "\n  &:not(:last-child) {\n    display: inline-block;\n    margin-right: ",
          ";\n  }\n",
        ]);
        return (
          (t2 = function () {
            return e;
          }),
          e
        );
      }
      let t6 = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-OrderDetailsSummaryWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f6f3bec1-0",
          })(t1(), R.zr.s4),
        t4 = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-OrderDetailsSummarySelectedSlotWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f6f3bec1-1",
          })(t2(), R.zr.s2),
        t3 = (e) => {
          var t, n, o, r, i, l, a, s, d, u, c, p, m, v, h, y, g;
          let {
              shoppingMethodSummary: f,
              setActiveStep: b,
              restrictedItems: C = [],
            } = e,
            { checkoutDetails: S } = (0, ep.wo)(),
            x = (0, eA.FT)(
              null == S
                ? void 0
                : null === (t = S.orderAttributes) || void 0 === t
                ? void 0
                : null === (n = t.delivery) || void 0 === n
                ? void 0
                : n.options,
              C
            ),
            w =
              null == S
                ? void 0
                : null === (o = S.orderAttributes) || void 0 === o
                ? void 0
                : null === (r = o.delivery) || void 0 === r
                ? void 0
                : null === (i = r.options) || void 0 === i
                ? void 0
                : i.find((e) => e.optionId === x),
            I =
              (null == f ? void 0 : f.shoppingMethodType) === el.jY.DELIVERY ||
              (null == f ? void 0 : f.shoppingMethodType) ===
                el.jY.REMOTE_DELIVERY,
            P =
              (null == f ? void 0 : f.shoppingMethodType) ===
              el.jY.REMOTE_DELIVERY,
            T = (0, B.kK)((null == f ? void 0 : f.selectedLocation) || ""),
            k = (
              null == S
                ? void 0
                : null === (l = S.orderAttributes) || void 0 === l
                ? void 0
                : null === (a = l.delivery) || void 0 === a
                ? void 0
                : null === (s = a.remote) || void 0 === s
                ? void 0
                : s.deliveryAddress
            )
              ? S.orderAttributes.delivery.remote.deliveryAddress
              : null == f
              ? void 0
              : f.selectedLocation,
            j = (
              null == S
                ? void 0
                : null === (d = S.orderAttributes) || void 0 === d
                ? void 0
                : null === (u = d.delivery) || void 0 === u
                ? void 0
                : null === (c = u.remote) || void 0 === c
                ? void 0
                : c.providerAccount
            )
              ? null == S
                ? void 0
                : null === (p = S.orderAttributes) || void 0 === p
                ? void 0
                : null === (m = p.delivery) || void 0 === m
                ? void 0
                : null === (v = m.remote) || void 0 === v
                ? void 0
                : v.providerAccount
              : "Not provided",
            A = (0, G.$)();
          return (0, E.jsxs)(t6, {
            children: [
              (0, E.jsx)(eT.kg, {
                children:
                  (null == f ? void 0 : f.shoppingMethodType) ===
                  el.jY.CLICK_AND_COLLECT
                    ? "Click & Collect"
                    : (null == f ? void 0 : f.shoppingMethodType) ===
                      el.jY.DELIVERY
                    ? "Delivery"
                    : "Remote delivery",
              }),
              (null == f ? void 0 : f.shoppingMethodType) ===
              el.jY.REMOTE_DELIVERY
                ? (0, E.jsxs)(E.Fragment, {
                    children: [
                      (0, E.jsxs)(eT.XP, {
                        children: [
                          (0, E.jsx)("b", {
                            children: "For",
                          }),
                          " ",
                          (null == f ? void 0 : f.selectedLocation) || "",
                        ],
                      }),
                      (0, E.jsxs)(eT.XP, {
                        children: [
                          (0, E.jsx)("b", {
                            children: "Via",
                          }),
                          " ",
                          (null == f ? void 0 : f.remoteProvider) || "",
                        ],
                      }),
                    ],
                  })
                : (0, E.jsx)(eT.XP, {
                    children: T,
                  }),
              (0, E.jsx)(eo.Qj, {
                onClick: () => A(z.B5.ShoppingMethod),
                label: "Change ".concat(
                  (null == f ? void 0 : f.shoppingMethodType) ===
                    el.jY.CLICK_AND_COLLECT
                    ? "Click & Collect location"
                    : "delivery address"
                ),
              }),
              (null == f ? void 0 : f.selectedSlot) &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "When",
                    }),
                    (0, E.jsxs)(eT.XP, {
                      children: [
                        (0, E.jsx)(t4, {
                          children: null == f ? void 0 : f.selectedSlot,
                        }),
                        (0, E.jsx)(eE.bs, {
                          windowType: null == f ? void 0 : f.slotWindowType,
                          windowTypeDisplayBadge:
                            null == f ? void 0 : f.slotWindowTypeDisplayBadge,
                        }),
                      ],
                    }),
                  ],
                }),
              (0, E.jsx)(eo.Qj, {
                onClick: () => A(z.B5.SlotSelector),
                label: "Change ".concat(
                  (null == f ? void 0 : f.shoppingMethodType) ===
                    el.jY.CLICK_AND_COLLECT
                    ? "Click & Collect"
                    : "delivery",
                  " slot"
                ),
              }),
              I &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Delivery type",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children: (0, E.jsx)(t4, {
                        children:
                          (null == w ? void 0 : w.optionId) === el.TP.Unattended
                            ? "Unattended delivery"
                            : "Sign for delivery",
                      }),
                    }),
                    (0, E.jsx)(eo.Qj, {
                      onClick: () => b(0),
                      label: "Change delivery type",
                    }),
                  ],
                }),
              P &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Final delivery address",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children: k,
                    }),
                    (0, E.jsx)(eT.kg, {
                      children: "Customer account number",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children: j,
                    }),
                  ],
                }),
              I &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Delivery instructions",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children:
                        (null == f ? void 0 : f.deliveryNote) ||
                        "No instructions set",
                    }),
                  ],
                }),
              !P &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Packing preference",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children:
                        null ===
                          (h =
                            null == S
                              ? void 0
                              : null === (y = S.orderAttributes) || void 0 === y
                              ? void 0
                              : null === (g = y.baggingOptions) || void 0 === g
                              ? void 0
                              : g.find((e) =>
                                  null == e ? void 0 : e.selected
                                )) || void 0 === h
                          ? void 0
                          : h.displayName,
                    }),
                    (0, E.jsx)(eo.Qj, {
                      onClick: () => {
                        b(0),
                          (0, es.Kk)(es.tw.Interaction, {
                            interaction: {
                              location: "checkout",
                              component: "packing preference",
                              description: "change packing preference",
                            },
                          });
                      },
                      label: "Change packing preference",
                    }),
                  ],
                }),
            ],
          });
        },
        t5 = (e) => {
          let t,
            { trolleyItems: n = [] } = e,
            o = 0,
            r = 0;
          for (let i of n)
            "Substitutable" === i.itemSubstitutionSelected
              ? (o += i.quantity)
              : (r += i.quantity);
          return (
            (t =
              0 === r
                ? (0, E.jsxs)(E.Fragment, {
                    children: [
                      "Allow substitutions for out-of-stock items (",
                      o,
                      ")",
                    ],
                  })
                : 0 === o
                ? (0, E.jsxs)(E.Fragment, {
                    children: ["Don't allow substitutions for ", r, " items"],
                  })
                : (0, E.jsxs)(E.Fragment, {
                    children: [
                      "Allow substitutions for out-of-stock items (",
                      o,
                      ") ",
                      (0, E.jsx)("br", {}),
                      "Don't allow substitutions for ",
                      r,
                      " items",
                    ],
                  })),
            (0, E.jsx)(E.Fragment, {
              children: t,
            })
          );
        };
      var t8 = n(76510);
      let t7 = (e, t) => {
        let n = [];
        if (
          (e &&
            e.forEach((e) => {
              n.push({
                promoCode: "AUTO APPLIED",
                description: null == e ? void 0 : e.description,
                active: !0,
                qualified: !0,
                type: e.type,
                promoDiscount: e.promoDiscount,
              });
            }),
          e && t)
        ) {
          let o = [
            ...n,
            ...t.filter((e) => {
              let { active: t, qualified: n } = e;
              return t && n;
            }),
          ];
          return o;
        }
        return !e && t
          ? t.filter((e) => {
              let { active: t, qualified: n } = e;
              return t && n;
            })
          : n;
      };
      function t9() {
        let e = (0, q.Z)([
          "\n  @media ",
          " {\n    top: ",
          ";\n    position: sticky;\n  }\n",
        ]);
        return (
          (t9 = function () {
            return e;
          }),
          e
        );
      }
      let ne = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-SummaryStickySummary",
            ...e,
          }))
          .withConfig({
            componentId: "sc-37855f80-0",
          })(t9(), W.rS.rdsDevice.tabletSmallMin, U.iH),
        nt = (e) => {
          var t, n, o, r, i, l;
          let {
              checkoutDetails: a,
              customerContinuity: s,
              totalContinuityCreditsRequired: d,
            } = (0, ep.wo)(),
            [u] = (0, _.Vb)([eI.TP.FlybuyContinuity]),
            c = (0, ep.xP)(a),
            {
              totalPrice: p,
              subTotalPrice: m,
              totalQuantity: v,
              shipCharge: h,
              totalSaving: y,
              baggingType: g,
              baggingQuantity: f,
              baggingTotalPrice: b,
              windowType: C,
              shoppingMethod: S,
              windowTypeDescription: x,
              appliedPromotions: w,
              totalOrderDiscount: I,
              autoAppliedPromotions: P,
              freeDelivery: T,
            } = null != c ? c : {};
          return (0, E.jsx)(ne, {
            children: (0, E.jsx)(t8.H, {
              isCheckout: !0,
              totalCredits: Number(
                null == a
                  ? void 0
                  : null === (t = a.customerCredits) || void 0 === t
                  ? void 0
                  : t.totalAvailableAmount
              ),
              creditApplied:
                null !==
                  (l = null == a ? void 0 : a.totalAppliedCreditAmount) &&
                void 0 !== l
                  ? l
                  : 0,
              totalQuantity: v || 0,
              baggingType: g,
              baggingQuantity: f,
              baggingTotalPrice: b,
              flybuysNumber:
                null == a ? void 0 : a.orderAttributes.flybuysNumber,
              flybuysBarcode:
                null == a ? void 0 : a.orderAttributes.flybuysBarcode,
              myColesNumber:
                null == a ? void 0 : a.orderAttributes.staffDiscountNum,
              shipCharge: h,
              totalOrderDiscount: I,
              orderTotal: p,
              orderSubTotal: m,
              orderSaving: y,
              onPlaceOrderClick: e.onPlaceOrderClick,
              unCompletedSteps: e.unCompletedSteps,
              showStepError: e.showStepError,
              isAllStepsComplete: e.isAllStepsComplete,
              isAllStepsInactive: e.isAllStepsInactive,
              activeStepInd: e.activeStepInd,
              hasAgreed: e.hasAgreed,
              shoppingMethod:
                S === el.jY.DELIVERY
                  ? el.jY.DELIVERY
                  : S === el.jY.REMOTE_DELIVERY
                  ? el.jY.REMOTE_DELIVERY
                  : el.jY.CLICK_AND_COLLECT,
              windowType: C,
              windowTypeDescription: x,
              appliedPromosItems: t7(P, w),
              freeDelivery: T,
              checkoutStepTitles: e.checkoutStepTitles,
              customerContinuity: s,
              showContinuityFlag: u,
              totalContinuityCreditsRequired: d,
              campaignoptStatus:
                null == a
                  ? void 0
                  : null === (n = a.campaigns) || void 0 === n
                  ? void 0
                  : null === (o = n[0]) || void 0 === o
                  ? void 0
                  : o.optIn,
              campaignoptEligibility:
                (null == a
                  ? void 0
                  : null === (r = a.campaigns) || void 0 === r
                  ? void 0
                  : null === (i = r[0]) || void 0 === i
                  ? void 0
                  : i.optEligibility) || !1,
              overrideSubmitWithWalletButton: e.overrideSubmitWithWalletButton,
              placeFlypayOrderButtonRef: e.placeFlypayOrderButtonRef,
              showFlyPayButtonError: e.showFlyPayButtonError,
              orderProcessHook: e.orderProcessHook,
              applyPromoHook: e.applyPromoHook,
              removePromoHook: e.removePromoHook,
            }),
          });
        };
      var nn = n(9907),
        no = n.n(nn),
        nr = n(51149),
        ni = n(37057),
        nl = n(49255),
        na = n(81219);
      function ns() {
        let e = (0, q.Z)(["\n  ", ";\n  ", "\n"]);
        return (
          (ns = function () {
            return e;
          }),
          e
        );
      }
      function nd() {
        let e = (0, q.Z)([
          "\n  ",
          ";\n  .MuiFormGroup-root {\n    margin-top: ",
          ";\n",
        ]);
        return (
          (nd = function () {
            return e;
          }),
          e
        );
      }
      function nu() {
        let e = (0, q.Z)(["\n  height: ", ";\n"]);
        return (
          (nu = function () {
            return e;
          }),
          e
        );
      }
      function nc() {
        let e = (0, q.Z)(["\n  ", ";\n  color: ", ";\n"]);
        return (
          (nc = function () {
            return e;
          }),
          e
        );
      }
      function np() {
        let e = (0, q.Z)(["\n  ", ";\n  ", "\n"]);
        return (
          (np = function () {
            return e;
          }),
          e
        );
      }
      function nm() {
        let e = (0, q.Z)([
          "\n  h3 {\n    ",
          ";\n    color: ",
          ";\n  }\n  p {\n    ",
          "\n    color: ",
          ";\n  }\n",
        ]);
        return (
          (nm = function () {
            return e;
          }),
          e
        );
      }
      let nv = (0, K.ZP)(e6.J)
        .attrs((e) => ({
          className: "coles-targeting-SubstitutePreferenceRememberCheckbox",
          ...e,
        }))
        .withConfig({
          componentId: "sc-ae4f7cd7-0",
        })(ns(), eR.XK.s1.top, eR.XK.s4.bottom);
      (0, K.ZP)(e_)
        .attrs((e) => ({
          className: "coles-targeting-SubstitutePreferenceRadioContainer",
          ...e,
        }))
        .withConfig({
          componentId: "sc-ae4f7cd7-1",
        })(nd(), eR.XK.s6.top, R.zr.s3),
        (0, K.ZP)(e1.p).withConfig({
          componentId: "sc-ae4f7cd7-2",
        })(nu(), (0, ta.Q1)(70));
      let nh = K.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-SubstitutePreferenceRememberCheckboxLabel",
            ...e,
          }))
          .withConfig({
            componentId: "sc-ae4f7cd7-3",
          })(nc(), W.rS.rdsText.body_300, W.rS.colorForeground.primary),
        ny = (0, K.ZP)(e6.J)
          .attrs((e) => ({
            className:
              "coles-targeting-SubstitutePreferenceAllowSubstitutionsCheckbox",
            ...e,
          }))
          .withConfig({
            componentId: "sc-ae4f7cd7-4",
          })(np(), eR.XK.s1.top, eR.XK.s4.bottom),
        ng = K.ZP.span
          .attrs((e) => ({
            className:
              "coles-targeting-SubstitutePreferenceAllowSubstitutionsCheckboxLabel",
            ...e,
          }))
          .withConfig({
            componentId: "sc-ae4f7cd7-5",
          })(
          nm(),
          W.rS.rdsText.body_300_bold,
          W.rS.colorForeground.primary,
          W.rS.rdsText.body_300,
          W.rS.colorForeground.secondary
        );
      ((i = b || (b = {})).DontAllowSubstitute = "0"),
        (i.AllowSubstitute = "1");
      let nf = (e) => {
        let {
            substitutableItemsCount: t,
            substitutableItemsTotal: n,
            substitutePref: o,
            setSubstitutePref: r,
          } = e,
          [i] = (0, _.Vb)([M.GO.CheckoutPreferenceSubstitutionsCheckboxes]);
        return (0, E.jsxs)(E.Fragment, {
          children: [
            (0, E.jsx)(ny, {
              name: "substitute-preference",
              isChecked: o === b.AllowSubstitute,
              isDisabled: 0 === n,
              label: (0, E.jsxs)(ng, {
                children: [
                  (0, E.jsxs)("h3", {
                    children: ["Allow substitutions (", t, "/", n, ")"],
                  }),
                  (0, E.jsx)("p", {
                    children:
                      "We'll replace with available substitutions and remember your preferences for next time. You won't be charged for unavailable items.",
                  }),
                ],
              }),
              onChange: r,
            }),
            !i &&
              (0, E.jsx)(nv, {
                name: "remember-substitute-pref",
                isChecked: e.rememberPref,
                label: (0, E.jsx)(nh, {
                  children: "Remember my substitution preference",
                }),
                onChange: e.setRememberPref,
              }),
          ],
        });
      };
      var nb = n(96712);
      function nC() {
        let e = (0, q.Z)(["\n  ", ";\n"]);
        return (
          (nC = function () {
            return e;
          }),
          e
        );
      }
      function nS() {
        let e = (0, q.Z)([
          "\n  .product-quantity-wrapper {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    .MuiCheckbox-root {\n      padding-bottom: 0;\n    }\n    .coles-targeting-CheckBoxCheckboxContainer {\n      display: flex;\n      align-items: center;\n    }\n\n    .MuiFormControlLabel-root {\n      align-items: center;\n    }\n    > p {\n      margin-top: ",
          ";\n    }\n  }\n\n  .coles-targeting-ProductInTrolleyImageWrapper {\n    width: ",
          ";\n  }\n\n  .quantity-utils-wrapper {\n    display: flex;\n    flex-direction: row;\n    @media ",
          " {\n      flex-direction: column;\n      margin-top: ",
          ";\n    }\n  }\n\n  [role='alert'] {\n    margin-bottom: ",
          ";\n  }\n",
        ]);
        return (
          (nS = function () {
            return e;
          }),
          e
        );
      }
      function nx() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  .coles-targeting-CheckoutStepperUndoButton {\n    margin: ",
          " ",
          ";\n  }\n\n  @media ",
          " {\n    flex-direction: column-reverse;\n    margin-top: ",
          ";\n    gap: ",
          ";\n    & > div,\n    .coles-targeting-CheckoutStepperUndoButton {\n      margin: 0;\n    }\n  }\n",
        ]);
        return (
          (nx = function () {
            return e;
          }),
          e
        );
      }
      let nw = K.ZP.ul
          .attrs((e) => ({
            className: "coles-targeting-TrolleyReviewContinuityListWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-6961ae48-0",
          })(nC(), (e) =>
          e.showSubstitutionCheckboxes ? "".concat(eR.XK.s8.left, ";}") : ""
        ),
        nI = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-TrolleyReviewWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-6961ae48-1",
          })(
          nS(),
          R.zr.s3,
          (0, ta.Q1)(60),
          nb.j.tabletSmallMax,
          R.zr.s2,
          R.zr.s3
        ),
        nP = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-TrolleyReviewButtonsWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-6961ae48-2",
          })(nx(), R.zr.s6, R.zr.s3, nb.j.mobileMax, R.zr.s2, R.zr.s3);
      var nT = n(16596);
      function nk() {
        let e = (0, q.Z)(["\n  margin-bottom: ", ";\n"]);
        return (
          (nk = function () {
            return e;
          }),
          e
        );
      }
      let nj = (0, K.ZP)(eE.P_).withConfig({
          componentId: "sc-5294666c-0",
        })(nk(), R.zr.s6),
        nA = (0, D.forwardRef)((e, t) => {
          let { minOrderValue: n, totalPrice: o } = e,
            r = (0, G.$)(),
            i = (0, D.useRef)(null),
            l = (0, D.useCallback)(
              (e) => {
                e.preventDefault(), r(z.B5.ShopCategories);
              },
              [r]
            );
          return ((0, D.useImperativeHandle)(t, () => ({
            focusOnMov() {
              var e;
              null === (e = i.current) || void 0 === e || e.focus();
            },
            scrollToMov() {
              (0, B.hE)(i.current, 400);
            },
          })),
          o < n)
            ? (0, E.jsx)(nj, {
                "data-testid": "trolley-review-mov-notification",
                type: "warning",
                hasIcon: !0,
                isFullWidth: !0,
                role: "status",
                message: (0, E.jsxs)("div", {
                  tabIndex: -1,
                  ref: i,
                  children: [
                    (0, E.jsxs)("p", {
                      children: [
                        "Spend ",
                        (0, eV.aO)(n - o),
                        " more to meet the $",
                        n,
                        " order minimum. Minimum order value required to place your order.",
                      ],
                    }),
                    (0, E.jsx)(eo.rU, {
                      label: "Shop Products",
                      variant: "inline",
                      size: "small",
                      onClick: l,
                      href: "#",
                    }),
                  ],
                }),
              })
            : null;
        });
      function nE() {
        let e = (0, q.Z)(["\n  ", ";\n  margin-bottom: ", ";\n"]);
        return (
          (nE = function () {
            return e;
          }),
          e
        );
      }
      function nO() {
        let e = (0, q.Z)(["\n  margin-bottom: -", ";\n"]);
        return (
          (nO = function () {
            return e;
          }),
          e
        );
      }
      let nD = K.ZP.p.withConfig({
          componentId: "sc-1a72ad43-0",
        })(nE(), W.rS.rdsText.body_200_bold, R.zr.s3),
        nR = (0, K.ZP)(eE.P_).withConfig({
          componentId: "sc-1a72ad43-1",
        })(nO(), R.zr.s5),
        nL = (e, t) =>
          t.filter((t) => e.find((e) => e.productId === t.productId + "")),
        nN = (e) => {
          var t;
          let n = {
            [ea.qj.validationCode.AGE_RESTRICTION]: "Age restricted product",
            [ea.qM.failedCode.OUT_OF_RANGE]: "Out of range",
            [ea.qM.failedCode.OUT_OF_STOCK]: "Out of stock",
            [ea.qM.failedCode.NO_VALID_PRICE]: "No valid price",
            [ea.qM.failedCode.NOT_BUYABLE]: "No valid price",
          };
          return null !== (t = n[e]) && void 0 !== t ? t : "No valid price";
        },
        nM = (e) => {
          let {
              assetsUrl: t,
              failedItems: n,
              items: o,
              onCloseModal: r,
              onRemoveAndContinue: i,
              isLoading: l,
            } = e,
            a = Y(),
            s = nL(n, o);
          return 0 == s.length
            ? null
            : (0, E.jsxs)(tn.u, {
                isMobileFullScreen: !0,
                title: "Review items",
                "data-testid": "trolley-review-unavailable-items-modal",
                dividers: !1,
                footer: (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(nr.zx, {
                      label: "Back to trolley",
                      size: "large",
                      variant: "link",
                      onClick: a,
                    }),
                    (0, E.jsx)(nr.zx, {
                      label: "Remove items(s) and continue",
                      size: "large",
                      variant: "primary",
                      onClick: i,
                      isLoading: l,
                    }),
                  ],
                }),
                isOpen: !0,
                closeHandler: r,
                children: [
                  (0, E.jsx)(nR, {
                    "data-testid":
                      "trolley-review-unavailable-items-notification",
                    type: "warning",
                    hasIcon: !0,
                    isFullWidth: !0,
                    role: "status",
                    message: (0, E.jsxs)(E.Fragment, {
                      children: [
                        (0, E.jsx)(nD, {
                          children: "There are some issues with your items.",
                        }),
                        (0, E.jsx)("p", {
                          children: "You can remove these items to continue.",
                        }),
                      ],
                    }),
                  }),
                  (0, E.jsx)("ul", {
                    children: s.map((e) => {
                      var o, r, i;
                      return (0, E.jsx)(
                        "li",
                        {
                          children: (0, E.jsx)(to.gxx, {
                            assetsUrl: (
                              null == e
                                ? void 0
                                : null === (o = e.product) || void 0 === o
                                ? void 0
                                : null === (r = o.restrictions) || void 0 === r
                                ? void 0
                                : r.tobaccoAgeRestrictionFlag
                            )
                              ? null !== B.kD && void 0 !== B.kD
                                ? B.kD
                                : ""
                              : t,
                            shoppingItem: {
                              ...e,
                              validation: {
                                validationDescription: (0, E.jsx)(eE.BK, {
                                  unavailableItemDisplayText: nN(
                                    null ===
                                      (i = n.find((t) => {
                                        let { productId: n } = t;
                                        return e.productId + "" === n;
                                      })) || void 0 === i
                                      ? void 0
                                      : i.failedCode
                                  ),
                                }),
                              },
                            },
                            skipValidationCodeCheck: !0,
                            actionsUtilsButtonGroup: [],
                            showQtyPicker: !1,
                          }),
                        },
                        "product-in-trolley-unavailable-".concat(e.productId)
                      );
                    }),
                  }),
                ],
              });
        },
        nF = (e) => {
          var t, n, o, r, i, l, a, s;
          let {
              assetsUrl: d = "",
              continueBtnProps: u,
              showStepError: c,
              showSubstitutionCheckboxes: p,
              showFlybuyContinuity: m,
              setShouldReviewTrolley: v,
              onTrolleyUpdate: h,
              minItemsShown: y = 10,
            } = e,
            [g, f, C] = (0, _.Vb)([
              M.GO.CheckoutQuantityPicker,
              M.GO.CheckoutOrderDetailsV2,
              eI.TP.TrolleyApiSaveSubstitutions,
            ]),
            S = (0, eI.K9)(!1, C),
            x = (0, to.x4v)(),
            { checkoutDetails: w, refetch: I, isLoading: P } = (0, ep.wo)(!1),
            { allItems: T, minOrderValue: k } = S.data,
            [j, A] = (0, D.useState)(no()(T)),
            O = (0, D.useRef)([]),
            [R, L] = (0, D.useState)(!0),
            [N, V] = (0, D.useState)(!1),
            [U, Z] = (0, D.useState)([]),
            [Y, { isLoading: q }] = (0, ed.hr)(),
            [K, { isLoading: W }] = (0, ed.OL)(),
            [Q, { isLoading: H }] = (0, ed.Iq)(),
            [X, { isLoading: J }] = (0, eg.F5)(),
            $ = (0, G.$)(),
            [ee, et] = (0, D.useState)(!1),
            en = R ? (null == j ? void 0 : j.slice(0, y)) : j,
            { continuityItems: er, regularItems: ei } = (0, eI.K5)(en || []),
            {
              customerCredits: el,
              isCustomerContinuityOptedIn: ec,
              customerContinuityOptError: em,
            } = (0, nl.O)(
              null === (t = S.data) || void 0 === t
                ? void 0
                : t.customerContinuityData
            ),
            ev = !el || !ec || em,
            eh = (0, ej.TL)(),
            ey = (0, eu.ON)(),
            ef = (0, D.useRef)(null),
            eb = (0, D.useRef)([]);
          eb.current = [];
          let eC = (0, D.useCallback)((e) => {
              A((t) => (0, nT.SR)(t, e));
            }, []),
            eS = (0, D.useMemo)(
              () =>
                null == j
                  ? void 0
                  : j
                      .filter((e) => {
                        var t;
                        return !(null === (t = e.product) || void 0 === t
                          ? void 0
                          : t.excludedFromSubstitution);
                      })
                      .filter(
                        (e) =>
                          e.itemSubstitutionSelected ===
                          ea.gV.itemSubstitutionSelected.SUBSTITUTABLE
                      )
                      .filter((e) => 0 !== e.quantity).length,
              [j]
            ),
            ex = (0, D.useMemo)(
              () =>
                null == j
                  ? void 0
                  : j
                      .filter((e) => {
                        var t;
                        return !(null == e
                          ? void 0
                          : null === (t = e.product) || void 0 === t
                          ? void 0
                          : t.excludedFromSubstitution);
                      })
                      .filter((e) => 0 !== e.quantity).length,
              [j]
            ),
            ew = (0, D.useMemo)(
              () => JSON.stringify(T) !== JSON.stringify(j),
              [T, j]
            ),
            eT = eS > 0 ? b.AllowSubstitute : b.DontAllowSubstitute;
          (0, D.useEffect)(() => {
            var e;
            let t = (0, nT.VX)(
              null == w
                ? void 0
                : null === (e = w.orderAttributes) || void 0 === e
                ? void 0
                : e.substituteOptions
            );
            t === b.DontAllowSubstitute && A((e) => (0, nT.SR)(e, !1));
          }, [
            null == w
              ? void 0
              : null === (n = w.orderAttributes) || void 0 === n
              ? void 0
              : n.substituteOptions,
            ey,
          ]);
          let ek = (e) =>
              e &&
              (null == eb ? void 0 : eb.current) &&
              (null == eb ? void 0 : eb.current.push(e)),
            eA = () => {
              L(!R),
                j &&
                  (null == j ? void 0 : j.length) > y - 1 &&
                  R &&
                  setTimeout(() => {
                    let e = null == eb ? void 0 : eb.current[y];
                    e && e.focus();
                  }, 10);
            },
            eO = ((null == j ? void 0 : j.length) && j.length > y) || !1,
            [eR, eL] = (0, D.useState)(!1),
            eN = async () => {
              var e, t, n, o, r, i;
              let l = null == w ? void 0 : w.orderId;
              if (void 0 === eT || !l) return;
              let a = {
                storeId: ey,
                substitutionOptionId: eT,
                ...(p
                  ? {}
                  : {
                      substitutionOptionSaveToProfile: eR,
                    }),
                deliveryInstructions:
                  (null ===
                    (e = null == w ? void 0 : w.orderAttributes.delivery) ||
                  void 0 === e
                    ? void 0
                    : e.instructions) || "",
              };
              try {
                if (p) {
                  if (g) {
                    if (eB < k) {
                      Z([]),
                        null === (t = ef.current) ||
                          void 0 === t ||
                          t.scrollToMov(),
                        null === (n = ef.current) ||
                          void 0 === n ||
                          n.focusOnMov();
                      return;
                    }
                    let s = (0, nT.b$)(j, T);
                    try {
                      let d = await Q({
                          orderId: l,
                          body: {
                            storeId: ey,
                            substitutionOptionId: eT,
                            orderItems: s,
                          },
                        }).unwrap(),
                        c =
                          null !== (o = d.failedItems) && void 0 !== o ? o : [];
                      if (
                        (Z(
                          c.map((e) => ({
                            productId: e.productId,
                            failedCode: e.failedCode,
                          }))
                        ),
                        c.length > 0)
                      ) {
                        (O.current = j),
                          A((e) =>
                            (0, nT.QU)(
                              e,
                              c.map((e) => e.productId)
                            )
                          );
                        return;
                      }
                    } catch (m) {
                      V(!0);
                      return;
                    }
                    let y =
                      s.filter((e) => (null == e ? void 0 : e.quantity) >= 0)
                        .length > 0;
                    if (y)
                      try {
                        let S = await X({
                            storeId: ey,
                            processOrder: !0,
                          }).unwrap(),
                          x =
                            null !==
                              (i =
                                null === (r = S.orderValidations) ||
                                void 0 === r
                                  ? void 0
                                  : r.actionRequiredOrderItems) && void 0 !== i
                              ? i
                              : [],
                          P = x.map((e) => ({
                            productId: e.productId,
                            failedCode: e.validationCode,
                          }));
                        if ((Z(P), x.length > 0)) {
                          (O.current = j),
                            A((e) =>
                              (0, nT.QU)(
                                e,
                                P.map((e) => e.productId)
                              )
                            );
                          return;
                        }
                      } catch (E) {
                        V(!0);
                        return;
                      }
                    I(),
                      (0, na.Yu)(
                        eh(
                          eg.Qd.endpoints.getTrolleyDetails.initiate(
                            {
                              storeId: ey,
                              sortBy: ni.j,
                              saveSubstitutions: C,
                            },
                            {
                              forceRefetch: !0,
                            }
                          )
                        )
                      ).then(
                        (e) => {
                          A(null == e ? void 0 : e.allItems);
                        },
                        (e) => {
                          V(!0);
                        }
                      );
                  } else {
                    let D = await K({
                      orderId: l,
                      body: {
                        storeId: ey,
                        substitutionOptionId: eT,
                        orderItems: (0, nT.MQ)(j),
                      },
                    });
                    if (D.error) return V(!0);
                    eh(
                      (0, nT.DL)(a, {
                        storeId: ey,
                        orderId: l || "",
                        shouldUseOrderDetailsV2: f,
                      })
                    );
                  }
                } else
                  await Y({
                    orderId: l || "",
                    body: {
                      ...a,
                      storeId: ey,
                    },
                  }).unwrap(),
                    eh(
                      (0, nT.DL)(a, {
                        storeId: ey,
                        orderId: l || "",
                        shouldUseOrderDetailsV2: f,
                      })
                    );
                ew && (et(!0), await h(), et(!1)),
                  v(!1),
                  (0, es.Kk)(
                    es.tw.CheckoutUpdatePreference,
                    eD({
                      substitutionOption:
                        Object.keys(b)[
                          Object.values(b).indexOf(a.substitutionOptionId)
                        ].toLowerCase(),
                      substitutionOptionSaveToProfile:
                        a.substitutionOptionSaveToProfile,
                      deliveryInstructions: a.deliveryInstructions,
                    })
                  ),
                  u.onComplete();
              } catch (R) {
                V(!0);
              }
            },
            eM = (e, t) => {
              A((n) => (0, nT.Eo)(n, e.orderItemId, t));
            },
            eF = (e) => {
              var t, n, o, r, i;
              let { item: l, ...a } = e;
              return (0, E.jsx)(to.gxx, {
                ref: ek,
                assetsUrl: (
                  null == l
                    ? void 0
                    : null === (t = l.product) || void 0 === t
                    ? void 0
                    : null === (n = t.restrictions) || void 0 === n
                    ? void 0
                    : n.tobaccoAgeRestrictionFlag
                )
                  ? B.kD
                  : d,
                withCheckbox: !0,
                limitOverride: x,
                showQtyPicker: g,
                isReadOnly: !g,
                checkboxProps: {
                  isInvisible:
                    null === (o = l.product) || void 0 === o
                      ? void 0
                      : o.excludedFromSubstitution,
                  onChange: (0, D.useCallback)((e) => eM(l, e), [l]),
                  isChecked:
                    !(null === (r = l.product) || void 0 === r
                      ? void 0
                      : r.excludedFromSubstitution) &&
                    (null == l ? void 0 : l.itemSubstitutionSelected) ===
                      ea.gV.itemSubstitutionSelected.SUBSTITUTABLE,
                  label: "Allow substitution",
                  size: "small",
                },
                subText:
                  (null === (i = l.product) || void 0 === i
                    ? void 0
                    : i.excludedFromSubstitution) && p
                    ? "No available substitute for this item"
                    : "",
                shoppingItem: l,
                updateTrolleyItemHandler: (e, t, n, o) => {
                  A((e) => (0, nT.hT)(e, n, t));
                },
                onRemoveProduct: (e) => {
                  let { orderItemId: t } = e;
                  A((e) => (0, nT.hT)(e, t, 0));
                },
                isCheckout: !0,
                showPromotionFlag: to.wcj.NotShow,
                ...a,
              });
            },
            eB = (0, D.useMemo)(
              () => j.map((e) => e.itemTotal).reduce((e, t) => e + t, 0),
              [j]
            ),
            e_ = j.reduce((e, t) => e + t.quantity, 0),
            eV =
              (null === (o = S.slot) || void 0 === o ? void 0 : o.maxItems) ||
              Number.MAX_VALUE;
          return (0, E.jsxs)(nI, {
            children: [
              (0, E.jsx)(eI.HC, {
                maxItemQuantity: eV,
                deliverySlotWindowType:
                  null === (r = S.slot) || void 0 === r ? void 0 : r.windowType,
                onClickSelectSlot: () => $(z.B5.SlotSelector),
                totalQuantity: e_,
              }),
              (0, E.jsx)(nA, {
                totalPrice: eB,
                minOrderValue: k,
                ref: ef,
              }),
              j &&
                (0, E.jsx)(nf, {
                  substitutePref: eT,
                  setSubstitutePref: (e) => {
                    eC(e);
                  },
                  rememberPref: eR,
                  showSubstitutableItemsCount: p,
                  substitutableItemsCount: eS,
                  substitutableItemsTotal: ex,
                  setRememberPref: eL,
                }),
              m &&
                er.length > 0 &&
                (0, E.jsx)(nw, {
                  showSubstitutionCheckboxes: p,
                  "data-testid": "continuity-product-in-trolley-review",
                  children:
                    null ===
                      (i =
                        null == er
                          ? void 0
                          : er.filter((e) =>
                              null == e ? void 0 : e.quantity
                            )) || void 0 === i
                      ? void 0
                      : i.map((e) => {
                          var t;
                          return S.isFetching
                            ? (0, E.jsx)(
                                to.lR,
                                {},
                                "product-in-trolley-loader-".concat(e.productId)
                              )
                            : (0, E.jsx)(
                                "li",
                                {
                                  children: (0, E.jsx)(eF, {
                                    item: e,
                                    promotionalCreditsCost: ev
                                      ? ""
                                      : null ===
                                          (t = e.totalContinuityCredits) ||
                                        void 0 === t
                                      ? void 0
                                      : t.toString(),
                                    creditsBadgeType: ec ? "badge" : "neutral",
                                  }),
                                },
                                e.productId
                              );
                        }),
                }),
              (0, E.jsx)("ul", {
                children:
                  null ===
                    (l =
                      null === (a = m ? ei : en) || void 0 === a
                        ? void 0
                        : a.filter((e) => (null == e ? void 0 : e.quantity))) ||
                  void 0 === l
                    ? void 0
                    : l.map((e) =>
                        S.isFetching
                          ? (0, E.jsx)(
                              to.lR,
                              {},
                              "product-in-trolley-loader-".concat(e.productId)
                            )
                          : (0, E.jsx)(
                              "li",
                              {
                                children: (0, E.jsx)(eF, {
                                  item: e,
                                  withCheckbox: p,
                                }),
                              },
                              e.productId
                            )
                      ),
              }),
              eO &&
                (0, E.jsx)(eo.Qj, {
                  label: R ? "View all items" : "View less items",
                  size: "small",
                  iconEnd: R
                    ? "IconChevronDownOutline"
                    : "IconChevronUpOutline",
                  onClick: eA,
                }),
              c && (0, E.jsx)(tf, {}),
              (0, E.jsx)(eP._, {
                collectables:
                  null == w
                    ? void 0
                    : null === (s = w.orderAttributes) || void 0 === s
                    ? void 0
                    : s.collectableData,
                hasTitle: !0,
              }),
              (0, E.jsxs)(nP, {
                children: [
                  g &&
                    ew &&
                    (0, E.jsx)(nr.zx, {
                      className: "coles-targeting-CheckoutStepperUndoButton",
                      label: "Undo changes",
                      size: "medium",
                      variant: "secondary",
                      "data-testid": "undo-change-button",
                      onClick: () => {
                        A(T),
                          (0, es.Kk)(es.tw.Interaction, {
                            interaction: {
                              location: "checkout",
                              component: "trolley",
                              description: "undo changes",
                            },
                          });
                      },
                    }),
                  (0, E.jsx)(M.qk, {
                    title: u.title,
                    onComplete: eN,
                    isLoading: W || q || H || J || P || ee,
                    label: "Continue to your details",
                    isDisabled: e_ > eV,
                  }),
                ],
              }),
              N &&
                (0, E.jsx)(eE.eW, {
                  title: "Something went wrong",
                  dataTestId: "trolley-review-error-modal",
                  description: (0, E.jsxs)(E.Fragment, {
                    children: [
                      "Sorry, we couldn't save your order details. Try again later, and if that doesn't work contact",
                      " ",
                      (0, E.jsx)(eo.rU, {
                        label: "Customer Care",
                        variant: "inline",
                        href: F.Ce.coles.help,
                        children: "Customer Care",
                      }),
                      ".",
                    ],
                  }),
                  btnText: "Return to checkout",
                  isOpen: !0,
                  onBtnClick: () => V(!1),
                  onClose: () => V(!1),
                }),
              U.length > 0 &&
                (0, E.jsx)(nM, {
                  assetsUrl: d,
                  failedItems: U,
                  items: j,
                  onCloseModal: () => {
                    A(O.current), Z([]);
                  },
                  onRemoveAndContinue: eN,
                  isLoading: W || q || H || J || ee,
                }),
            ],
          });
        };
      var nB = n(16257);
      let n_ = (e) => {
        var t, n, o;
        let { onComplete: r, modalState: i, paymentMethod: l, onError: a } = e,
          [s] = (0, _.Vb)([ec.G.EnablePaymentMethodsV2InCheckout]),
          { checkoutDetails: d } = (0, ep.wo)(),
          u =
            null !== (o = null == d ? void 0 : d.orderId) && void 0 !== o
              ? o
              : "",
          [c, { isLoading: p }] = (0, ed.y7)(),
          m = (0, eu.ON)(),
          v = (0, eb.uD)(l.paymentMethods, [el.SE.BillMeLater]),
          h = (0, eb.H3)({
            paymentMethods: l.paymentMethods,
            selectedPaymentMethod: el.uG.BillMeLater,
          }),
          y = l.refetchGetPaymentMethod,
          g = (0, D.useCallback)(async () => {
            try {
              if (!h && s) {
                (0, eS.tz)(
                  Error("No payment orchestrator found for SAP"),
                  eS.NI.ThirdpartyApi,
                  {},
                  [],
                  {
                    [eS.Qy.errorSubtype]: "no-orchestrator",
                    [eS.Qy.processName]: eS.tv.Paydock,
                  }
                );
                return;
              }
              await c(
                s
                  ? {
                      body: {
                        paymentOrchestrator: h,
                      },
                      orderId: u,
                      shouldUseV2: !0,
                    }
                  : {
                      body: {
                        storeId: m,
                      },
                      orderId: u,
                      shouldUseV2: !1,
                    }
              ).unwrap(),
                await y(),
                r && r();
            } catch (e) {
              a && a(),
                i.setErrorModal({
                  isOpen: !0,
                  type: el.t.saveCreditAccountError,
                });
            }
          }, [h, s, a, r, i, u, y, c, m]);
        return {
          isSavingCreditAccount: p,
          sapAccount: {
            sapAccountLevel:
              null == v
                ? void 0
                : null === (t = v.data) || void 0 === t
                ? void 0
                : t.sapAccountLevel,
            sapAccountNumber:
              null == v
                ? void 0
                : null === (n = v.data) || void 0 === n
                ? void 0
                : n.sapAccountNumber,
          },
          continueCreditAccount: g,
        };
      };
      function nV(e, t) {
        let [n, o] = (0, D.useState)({
            flow: e,
            type: null,
            isOpen: !1,
          }),
          [r, i] = (0, D.useState)({
            type: null,
            isOpen: !1,
          });
        return (
          (0, D.useEffect)(() => {
            Boolean(t.isError) &&
              !t.isLoading &&
              i({
                isOpen: !0,
                type: el.t.getPaymentMethodsError,
              });
          }, [t.isError, t.isLoading, i]),
          {
            confirmModal: n,
            setConfirmModal: o,
            errorModal: r,
            setErrorModal: i,
          }
        );
      }
      var nU = n(52488),
        nZ = n(84202),
        nz = n(69125);
      let nG = (e, t, n, o, r) => {
        var i, l;
        let { checkoutDetails: a } = (0, ep.wo)(),
          [s] = (0, _.Vb)([nz.G.EnablePaymentMethodsV2InCheckout]),
          d =
            null !== (l = null == a ? void 0 : a.orderId) && void 0 !== l
              ? l
              : "",
          u = (0, ej.TL)(),
          c = (0, ej.CG)(nU.B),
          p = (0, eb.uD)(e.paymentMethods, eb.Rb),
          [m, v] = (0, D.useState)(Boolean(p)),
          [h, { isLoading: y }] = (0, ed.mE)(),
          g = y || e.isFetching,
          f = (0, eu.ON)(),
          b = e.refetchGetPaymentMethod,
          C = (0, eb.H3)({
            paymentMethods: e.paymentMethods,
            selectedPaymentMethod: el.uG.Card,
          }),
          S = (0, D.useCallback)(
            async (e) => {
              if (!C && s) {
                (0, eS.tz)(
                  Error("No payment orchestrator found for credit card"),
                  eS.NI.ThirdpartyApi,
                  {},
                  [],
                  {
                    [eS.Qy.errorSubtype]: "no-orchestrator",
                    [eS.Qy.processName]: eS.tv.Paydock,
                  }
                );
                return;
              }
              await h({
                body: {
                  ...e,
                  storeId: f,
                  ...(s
                    ? {
                        paymentOrchestrator: C,
                      }
                    : {}),
                },
                orderId: d,
                shouldUseV2: s,
              }).unwrap(),
                await b();
            },
            [h, f, d, b, s, C]
          ),
          x = (e) => {
            r && r();
            let n = (0, eA.d1)(e);
            t.setErrorModal({
              isOpen: !0,
              type: n,
            });
          };
        return (
          (0, D.useEffect)(() => {
            var e;
            if (
              c.submitStatus === nB.S.submitSuccess &&
              (null === (e = c.successData) || void 0 === e
                ? void 0
                : e.sessionId)
            ) {
              let t = {
                orderId: d,
                storeId: f,
                identifier: c.successData.sessionId,
                saveToProfile: c.saveToProfile,
                name: el.SE.Card,
              };
              S(t)
                .then(() => {
                  v(!0), o && o(t), n(o ? t : void 0);
                })
                .catch(x);
            } else c.submitStatus === nB.S.submitFail && r && r();
          }, [
            v,
            null === (i = c.successData) || void 0 === i ? void 0 : i.sessionId,
            c.submitStatus,
          ]),
          {
            paymentData: p,
            saveCreditCard: S,
            isSavingCreditCard: g,
            showCardPaymentData: m,
            setShowCardPaymentData: v,
            mpgs: c,
            continueCard: function () {
              if (m) {
                if (p) {
                  if (!(null == p ? void 0 : p.isSelectedForCurrentOrder))
                    return S({
                      storeId: f,
                      name: p.name,
                    })
                      .then(() => n())
                      .catch(x);
                  n();
                } else
                  r && r(),
                    (0, eS.tz)(
                      "Continue_Card invalid state",
                      eS.NI.UnexpectedCondition
                    );
              } else u((0, nZ.R2)());
            },
          }
        );
      };
      var nY = n(84204);
      let nq = (e) => {
        var t;
        let { className: n } = e,
          { data: o } = (0, N.qt)(),
          r = null == o ? void 0 : o.isB2B,
          i =
            null == o
              ? void 0
              : null === (t = o.b2bAttributes) || void 0 === t
              ? void 0
              : t.hasSapAccount;
        return r && !i
          ? (0, E.jsx)(eE.P_, {
              className: n,
              "data-testid": "apply-creditaccount-guidance",
              hasIcon: !0,
              isTransparent: !0,
              isFullWidth: !0,
              message: (0, E.jsxs)(E.Fragment, {
                children: [
                  (0, E.jsx)("span", {
                    children: "We offer business credit accounts.",
                  }),
                  " ",
                  (0, E.jsx)(eo.rU, {
                    label: "Learn more about credit accounts",
                    ariaLabel: "Learn more about credit accounts",
                    href: "https://www.coles.com.au/help/business-accounts/apply-credit-account",
                    size: "small",
                    variant: "light",
                    openInNewTab: !0,
                  }),
                ],
              }),
              type: "guidance",
            })
          : null;
      };
      function nK() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (nK = function () {
            return e;
          }),
          e
        );
      }
      let nW = (0, K.ZP)(nq)
        .attrs((e) => ({
          className: "coles-targeting-ApplyCreditAccountGuidance",
          ...e,
        }))
        .withConfig({
          componentId: "sc-58a5899c-0",
        })(nK(), eR.XK.s6.vertical);
      var nQ = n(65114);
      function nH() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (nH = function () {
            return e;
          }),
          e
        );
      }
      function nX() {
        let e = (0, q.Z)(["\n  margin-top: ", ";\n  display: block;\n"]);
        return (
          (nX = function () {
            return e;
          }),
          e
        );
      }
      function nJ() {
        let e = (0, q.Z)(["\n  margin-top: ", ";\n"]);
        return (
          (nJ = function () {
            return e;
          }),
          e
        );
      }
      let n$ = (0, K.ZP)(tf)
        .attrs((e) => ({
          className: "coles-targeting-PaymentMethodStyledStepErrorNotification",
          ...e,
        }))
        .withConfig({
          componentId: "sc-16e8656a-0",
        })(nH(), eR.XK.s6.vertical);
      K.ZP.span
        .attrs((e) => ({
          className: "coles-targeting-flypayNotification",
          ...e,
        }))
        .withConfig({
          componentId: "sc-16e8656a-1",
        })(nX(), R.zr.s4);
      let n0 = (0, K.ZP)(nQ.v)
        .attrs((e) => ({
          ...e,
        }))
        .withConfig({
          componentId: "sc-16e8656a-2",
        })(nJ(), R.zr.s4);
      var n1 = n(92128),
        n2 = n(64753);
      let n6 = (e) => ({
        order: {
          payment_type: e.toLowerCase(),
        },
      });
      var n4 = n(80086);
      function n3(e) {
        let {
            paymentMethodFlow: t,
            payPal: n,
            creditCard: o,
            paymentMethod: r,
            modalState: i,
            paymentTypeState: l,
            sapAccount: a,
            isLoading: s,
            restrictedItems: d = [],
            mpgsVersion: u,
          } = e,
          [c] = (0, _.Vb)([M.GO.CheckoutShowFlypayRetirementMessage]),
          p = c
            ? r.supportedPaymentTypes.filter((e) => e !== el.uG.Flypay)
            : r.supportedPaymentTypes,
          m = p.map((e) => ({
            label: n5(e, t),
            ariaLabel: n8(e, t),
            key: e,
            value: e,
            content: n7({
              type: e,
              payPal: n,
              creditCard: o,
              modalState: i,
              paymentMethodFlow: t,
              sapAccount: a,
              restrictedItems: d,
              mpgsVersion: u,
            }),
          }));
        return (0, E.jsx)(ei.n, {
          isLoaded: !s,
          skeletonLayout: (0, E.jsx)(n2.O, {
            height: "25px",
            width: "256px",
            mt: "16px",
          }),
          children: (0, E.jsx)(eE.q5, {
            id: "checkout-payment-methods",
            radioGroupAriaLabel: "Select payment method",
            defaultValue: l.selectedPaymentType,
            itemsList: m,
            onChange: (e) => {
              (0, es.Kk)(es.tw.CheckoutUpdatePayment, n6(e)),
                l.setSelectedPaymentType(e);
            },
          }),
        });
      }
      let n5 = (e, t) =>
          e === el.uG.Card
            ? (0, E.jsx)(ex._g, {
                label: n8(e, t),
              })
            : e === el.uG.PayPal
            ? (0, E.jsx)(ex.Zu, {})
            : e === el.uG.Flypay
            ? (0, E.jsx)(ex.oz, {})
            : e === el.uG.BillMeLater
            ? (0, E.jsx)(ex.PL, {})
            : void 0,
        n8 = (e, t) =>
          e === el.uG.Card
            ? t === el.sQ.SUBSCRIPTION
              ? "Add credit or debit card"
              : "Debit/credit card"
            : e === el.uG.PayPal
            ? "PayPal"
            : e === el.uG.Flypay
            ? "flypay"
            : e === el.uG.BillMeLater
            ? "Credit account"
            : "",
        n7 = (e) => {
          var t, n;
          let {
            type: o,
            payPal: r,
            creditCard: i,
            sapAccount: l,
            modalState: a,
            paymentMethodFlow: s,
            mpgsVersion: d,
          } = e;
          if (o === el.uG.BillMeLater)
            return (0, E.jsx)(ex.bD, {
              sapAccount: l,
            });
          if (o === el.uG.Card)
            return (0, E.jsx)(ex.Wg, {
              showSavedCard: i.showCardPaymentData,
              onBackToSaved: () => {
                i.setShowCardPaymentData(!0);
              },
              onSwapToPaymentCapture: () => {
                i.setShowCardPaymentData(!1);
              },
              savedCard:
                null === (t = i.paymentData) || void 0 === t ? void 0 : t.data,
              cardCapturePanel: (0, E.jsx)(n4.m, {
                mpgsVersion: d,
                showSaveToProfile: s === el.sQ.CHECKOUT,
                onError: () =>
                  a.setErrorModal({
                    isOpen: !0,
                    type: el.t.mpgsLoadError,
                  }),
              }),
            });
          if (o === el.uG.PayPal) {
            let u =
              null === (n = r.paymentData) || void 0 === n ? void 0 : n.data;
            return (0, E.jsx)(ex.MK, {
              onLinkPayPal: r.onLinkPayPal,
              savedPayPal: u,
              showSavedAccount: Boolean(u),
              paypal: r.paypal,
              onUseDifferentAccount: () =>
                a.setConfirmModal({
                  flow: s,
                  type: el.QZ.linkDifferentPaypal,
                  isOpen: !0,
                  onConfirm: r.onLinkPayPal,
                }),
              closeLinkPayPalPopup: r.closeLinkPayPalPopup,
            });
          }
          return null;
        },
        n9 = (e) => {
          let {
              paymentMethodFlow: t,
              continueBtnProps: n,
              showStepError: o,
              paymentTypeState: r,
              paymentMethod: i,
              isPaymentsLoading: l,
              restrictedItems: a = [],
              mpgsVersion: s,
            } = e,
            [d] = (0, _.Vb)([M.GO.CheckoutShowFlypayRetirementMessage]),
            [u, c] = (0, D.useState)(d);
          (0, D.useEffect)(() => {
            c(d);
          }, [d]);
          let p = nV(t, i),
            {
              isSavingCreditAccount: m,
              continueCreditAccount: v,
              sapAccount: h,
            } = n_({
              onComplete: n.onComplete,
              modalState: p,
              paymentMethod: i,
            }),
            y = (0, ex.Sj)(t, i, r, p, n.onComplete),
            g = nG(i, p, n.onComplete),
            f =
              y.paypalSaveLoading ||
              g.mpgs.submitStatus === nB.S.submitting ||
              g.isSavingCreditCard ||
              m ||
              l;
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(nW, {}),
              (0, E.jsx)(n3, {
                restrictedItems: a,
                isLoading: f,
                paymentMethodFlow: t,
                payPal: y,
                creditCard: g,
                paymentMethod: i,
                modalState: p,
                paymentTypeState: r,
                sapAccount: h,
                mpgsVersion: s,
              }),
              o && (0, E.jsx)(n$, {}),
              u &&
                (0, E.jsx)(n0, {
                  onClose: () => {
                    c(!1);
                  },
                  hasIcon: !0,
                  isFullWidth: !0,
                  type: "guidance",
                  name: "flypay is currently unavailable",
                  message:
                    "flypay is temporarily unavailable as we're improving the experience. We apologise for any inconvenience this may cause. Please choose another payment method to complete your order. Thank you.\xa0",
                }),
              (0, E.jsx)(M.qk, {
                title: n.title,
                label: "Continue to review order summary",
                isLoading: f,
                onComplete: () => {
                  let e = r.selectedPaymentType;
                  e === el.uG.BillMeLater && v(),
                    e === el.uG.Card
                      ? g.continueCard()
                      : e === el.uG.PayPal && y.continuePaypal();
                },
              }),
              (0, E.jsx)(n1.j, {
                flow: t,
                type: p.confirmModal.type,
                isOpen: p.confirmModal.isOpen,
                onClose: () => {
                  p.confirmModal.onClose && p.confirmModal.onClose(),
                    p.setConfirmModal({
                      flow: t,
                      type: null,
                      isOpen: !1,
                    });
                },
                onConfirm: () => {
                  p.confirmModal.onConfirm && p.confirmModal.onConfirm(),
                    p.setConfirmModal({
                      flow: t,
                      type: null,
                      isOpen: !1,
                    });
                },
              }),
              (0, E.jsx)(nY.w, {
                flow: t,
                type: p.errorModal.type,
                isOpen: p.errorModal.isOpen,
                onClose: () => {
                  p.setErrorModal({
                    type: p.errorModal.type,
                    isOpen: !1,
                  });
                },
                refetchGetPaymentMethod: i.refetchGetPaymentMethod,
                resetPaypalSaveState: y.resetPaypalSaveState,
              }),
            ],
          });
        };
      ((l = C || (C = {})).creditAccountCheckError = "creditAccountCheckError"),
        (l.internalOrTimeoutError = "internalOrTimeoutError"),
        (l.slotReservationError = "slotReservationError"),
        (l.deliverySlotExpiredError = "deliverySlotExpiredError"),
        (l.creditCardInvalidError = "creditCardInvalidError"),
        (l.threeDSAuthenticationCheckFail = "threeDSAuthenticationCheckFail"),
        (l.threeDSAuthenticationDoNotProceed =
          "threeDSAuthenticationDoNotProceed"),
        (l.threeDSAuthenticationCouldNotCompleteOrder =
          "threeDSAuthenticationCouldNotCompleteOrder"),
        (l.rapid60InvalidError = "rapid60InvalidError"),
        (l.mpgsPreAuthError_FCI001 = "mpgsPreAuthError_FCI001"),
        (l.mpgsPreAuthError_FSF001 = "mpgsPreAuthError_FSF001"),
        (l.mpgsPreAuthError_FIS001 = "mpgsPreAuthError_FIS001"),
        (l.mpgsPreAuthError_TEC001 = "mpgsPreAuthError_TEC001"),
        (l.mpgsPreAuthError_ETC001 = "mpgsPreAuthError_ETC001"),
        (l.mpgsPreAuthError_GENERIC = "mpgsPreAuthError_GENERIC");
      let oe = (e) => {
          let { type: t, isOpen: n, onClose: o, sapAccountNumber: r } = e,
            i = (0, G.$)();
          if (null === t) return null;
          let l = {
            [C.creditAccountCheckError]: o,
            [C.creditCardInvalidError]: o,
            [C.internalOrTimeoutError]: o,
            [C.slotReservationError]: () => {
              i(z.B5.SlotSelector);
            },
            [C.threeDSAuthenticationDoNotProceed]: o,
            [C.threeDSAuthenticationCouldNotCompleteOrder]: o,
            [C.mpgsPreAuthError_FCI001]: o,
            [C.mpgsPreAuthError_FIS001]: o,
            [C.mpgsPreAuthError_ETC001]: o,
            [C.mpgsPreAuthError_FSF001]: o,
            [C.mpgsPreAuthError_TEC001]: o,
            [C.mpgsPreAuthError_GENERIC]: o,
            [C.threeDSAuthenticationCheckFail]: o,
            [C.deliverySlotExpiredError]: () => {
              i(z.B5.SlotSelector);
            },
            [C.rapid60InvalidError]: () => {
              i(z.B5.SlotSelector);
            },
          };
          return (0, E.jsx)(eE.eW, {
            ...ot(t, r),
            isOpen: n,
            onBtnClick: l[t],
            onClose: () => o(),
          });
        },
        ot = (e, t) => {
          switch (e) {
            case C.internalOrTimeoutError:
              return {
                title: "Something went wrong",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "Sorry, we couldn't place your order. Try again later, and if that doesn't work contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Customer Care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      openInNewTab: !0,
                      children: "Customer Care",
                    }),
                    ".",
                  ],
                }),
                btnText: "Return to checkout",
              };
            case C.slotReservationError:
              return {
                title: "Your delivery slot expired",
                description: (0, E.jsx)(E.Fragment, {
                  children: "Select a new day and time for your order.",
                }),
                btnText: "Find a slot",
              };
            case C.threeDSAuthenticationCouldNotCompleteOrder:
              return {
                title: "Something went wrong",
                description: (0, E.jsx)(E.Fragment, {
                  children:
                    "We couldn't complete your order. Please try checking out again in a few minutes.",
                }),
                btnText: "Return to checkout",
              };
            case C.deliverySlotExpiredError:
              return {
                title: "Your delivery slot expired",
                description: (0, E.jsx)(E.Fragment, {
                  children: "Select a new day and time for your order.",
                }),
                btnText: "Find a slot",
              };
            case C.threeDSAuthenticationDoNotProceed:
              return {
                title: "Payment unsuccessful",
                description: (0, E.jsx)(E.Fragment, {
                  children:
                    "There was an issue with your card. Talk to your card issuer or add a new card.",
                }),
                btnText: "Return to checkout",
              };
            case C.creditCardInvalidError:
              return {
                title: "Payment method error",
                description: (0, E.jsx)(E.Fragment, {
                  children:
                    "We were unable to process your payment. Please contact your card issuer or try again by choosing a different payment method.",
                }),
                btnText: "Return to payment section",
              };
            case C.creditAccountCheckError:
              return {
                title: "This order exceeds your credit account limit",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "To resolve this issue, please ask the person responsible for managing your credit account to call us on 1800 159 159 (weekdays from 9am to 4pm) or email",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Customer.Accounts@coles.com.au",
                      variant: "inline",
                      href: "mailto:Customer.Accounts@coles.com.au?subject=Reference number ".concat(
                        t
                      ),
                      openInNewTab: !0,
                      children: "Customer.Accounts@coles.com.au",
                    }),
                    (0, E.jsx)("br", {}),
                    (0, E.jsx)("br", {}),
                    "Be sure to mention your account number ".concat(t),
                  ],
                }),
                btnText: "Return to payment section",
              };
            case C.mpgsPreAuthError_FCI001:
              return {
                title: "Unable to place your order",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "There's an issue with your payment method. Try again or select a different payment option. For support, contact your card issuer. To discuss your order, contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "customer care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      openInNewTab: !0,
                    }),
                    ".",
                  ],
                }),
                btnText: "Return to payments",
              };
            case C.mpgsPreAuthError_FSF001:
              return {
                title: "There's an issue with your card",
                description: (0, E.jsx)(E.Fragment, {
                  children:
                    "To complete your payment, use a valid card or select a different payment method. For support, contact your card issuer.",
                }),
                btnText: "Return to payments",
              };
            case C.mpgsPreAuthError_FIS001:
              return {
                title: "There's an issue with your card",
                description: (0, E.jsx)(E.Fragment, {
                  children:
                    "Check your card details are correct and try again or select a different payment method. For support, contact your card issuer.",
                }),
                btnText: "Return to payments",
              };
            case C.mpgsPreAuthError_TEC001:
            case C.mpgsPreAuthError_ETC001:
            case C.mpgsPreAuthError_GENERIC:
            case C.threeDSAuthenticationCheckFail:
              return {
                title: "Something went wrong",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "We're having issues processing your payment. Try again in a few moments or select a different payment method. For support, contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "customer care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      openInNewTab: !0,
                    }),
                    ".",
                  ],
                }),
                btnText: "Return to payments",
              };
            case C.rapid60InvalidError:
              return {
                title: "Time slot is no longer available",
                description: (0, E.jsx)(E.Fragment, {
                  children: "Select a new day and time for your order",
                }),
                btnText: "Pick a new slot",
              };
          }
        },
        on = (e) =>
          "COLRS_ERR_SPC_ACCOUNT_CREDIT_CHECK" === e
            ? C.creditAccountCheckError
            : [
                "COLRS-ERR-OSUB-DELADD-INVLD-001",
                "COLRS-ERR-OSUB-SLT-EXPRD-001",
                "COLRS-ERR-OSUB-SLT-CUTOFF-FAIL-001",
              ].includes(e)
            ? C.deliverySlotExpiredError
            : "COLRS-ERR-OSUB-SLTCONF-FAIL-001" === e
            ? C.slotReservationError
            : [
                "COLRS-ERR-OSUB-PAYMNT-INVLD-001",
                "COLRS-ERR-PAY-021",
                "COLRS-ERR-PAY-023",
              ].includes(e)
            ? C.creditCardInvalidError
            : "COLRS-ERR-PAY-036" === e
            ? C.threeDSAuthenticationCheckFail
            : "COLRS-ERR-PAY-021-FCI001" === e
            ? C.mpgsPreAuthError_FCI001
            : "COLRS-ERR-PAY-021-FSF001" === e
            ? C.mpgsPreAuthError_FSF001
            : "COLRS-ERR-PAY-021-FIS001" === e
            ? C.mpgsPreAuthError_FIS001
            : "COLRS-ERR-PAY-021-TEC001" === e
            ? C.mpgsPreAuthError_TEC001
            : "COLRS-ERR-PAY-021-ETC001" === e
            ? C.mpgsPreAuthError_ETC001
            : e.includes("COLRS-ERR-PAY-021")
            ? C.mpgsPreAuthError_GENERIC
            : "COLRS-ERR-R60-ETA-NA-001" === e
            ? C.rapid60InvalidError
            : C.internalOrTimeoutError;
      var oo = n(9134);
      let or = (e) => {
          let t = (0, eb.Ch)(e);
          return (null == t ? void 0 : t.name) === el.SE.Card
            ? e.find((e) => e.name === el.SE.SavedCard)
            : (null == t ? void 0 : t.name) !== el.uG.Flypay
            ? t
            : void 0;
        },
        oi = () => {
          var e, t, n, o;
          let [r, i] = (0, _.Vb)([
              F.TP.ColesPlusSingleClickSignUp,
              F.TP.ColesPlusSeasonalMarketing,
            ]),
            {
              data: l,
              isColesPlusMember: a,
              isEligibleForFreeTrial: s,
              isLoading: d,
              isError: u,
            } = (0, ew.x9)(),
            { data: c } = (0, N.xR)(),
            { flybuysDetails: p } = (0, oo._h)(),
            {
              paymentMethods: m,
              isLoading: v,
              isError: h,
            } = (0, eb.Vc)(el.sQ.CHECKOUT, !0),
            y = or(m),
            { data: g, isLoading: f, isError: b } = (0, eI.K9)(),
            C = i && !!p && g.totalPrice >= 180 && g.totalPrice < 250,
            { checkoutDetails: S, isLoading: x, error: w } = (0, ep.wo)(),
            I = Boolean(d || !c || v || f || x),
            P = Boolean(u || !c || h || b || w),
            T = Boolean(null == S ? void 0 : S.freeDelivery),
            k =
              (null === (e = g.shoppingConfiguration) || void 0 === e
                ? void 0
                : e.shoppingMethod) === ea.Qn.shoppingMethod.DELIVERY,
            j = Boolean(
              (null == c
                ? void 0
                : null === (t = c.contacts) || void 0 === t
                ? void 0
                : t.mobile) ||
                (null == c
                  ? void 0
                  : null === (n = c.contacts) || void 0 === n
                  ? void 0
                  : n.phone)
            ),
            A = Boolean(y);
          if (P || !r || a || !k || !j || !A || T)
            return {
              show: !1,
              isLoading: I,
              isColesPlusSeasonalMarketingEnabled: C,
            };
          let E =
              null == l
                ? void 0
                : null === (o = l.subscription) || void 0 === o
                ? void 0
                : o.nextBillingDate,
            O = null == S ? void 0 : S.shipCharge;
          return {
            show: !0,
            isLoading: !1,
            isColesPlusSeasonalMarketingEnabled: C,
            details: {
              selectedPaymentMethod: y,
              subscriptionRate: 19,
              isEligibleForFreeTrial: s,
              nextBillingDate: E,
              shipCharge: O,
            },
          };
        };
      function ol() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: ",
          ";\n\n  @media ",
          " {\n    margin-top: ",
          ";\n    margin-left: ",
          ";\n    max-width: 80%;\n  }\n",
        ]);
        return (
          (ol = function () {
            return e;
          }),
          e
        );
      }
      let oa = K.ZP.div
        .attrs({
          className: "coles-targeting-CheckoutPlusSingleSignUpContainer",
        })
        .withConfig({
          componentId: "sc-4c297109-0",
        })(
        ol(),
        R.zr.s7,
        W.rS.rdsDevice.tabletSmallMin,
        R.zr.s9,
        (0, ta.Q1)(56)
      );
      var os = n(95404),
        od = n(7420),
        ou = n(67700);
      function oc() {
        let e = (0, q.Z)([""]);
        return (
          (oc = function () {
            return e;
          }),
          e
        );
      }
      let op = K.ZP.div
          .attrs({
            className: "coles-targeting-CheckoutPlusSingleSignUpPlaceOrder",
          })
          .withConfig({
            componentId: "sc-753f6d81-0",
          })(oc()),
        om = (e) => {
          let {
            shouldUse3ds: t,
            showThreeDSModal: n,
            subscriptionResponse: o,
            shouldUseThreeDSServiceWorker: r,
            isLoading: i,
            setShowThreeDSModal: l,
            continueSubscriptionOrder: a,
            hasError: s,
            setHasError: d,
          } = e;
          return (0, E.jsxs)(op, {
            children: [
              t &&
                n &&
                (null == o ? void 0 : o.recurringOrderId) &&
                (0, E.jsx)(ou.A, {
                  useServiceWorker: r,
                  orderId: o.recurringOrderId,
                  flow: el.sQ.SUBSCRIPTION,
                  onClose: (e) => {
                    l(!1), e && d(!0);
                  },
                  onCancel: () => l(!1),
                  onSuccess: () => a(),
                }),
              (0, E.jsx)(tn.u, {
                isOpen: i && !n,
                modalMaxWidth: "25rem",
                children: (0, E.jsx)(os.Z, {
                  my: 8,
                  children: (0, E.jsx)(L.T, {
                    title: "Signing you up",
                    description: "This may take a few moments",
                  }),
                }),
              }),
              (0, E.jsx)(eE.eW, {
                title: "We couldn’t sign you up to Coles Plus",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "Sorry, we’ve run into a technical issue.",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Try signing up on a separate page",
                      variant: "inline",
                      openInNewTab: !0,
                      href: F.nB.ColesPlusLandingPage,
                      iconEnd: (0, E.jsx)(od.default, {}),
                      children: "Try signing up on a separate page",
                    }),
                    (0, E.jsx)("br", {}),
                    "before completing your order or continue without subscribing.",
                  ],
                }),
                btnText: "Return to checkout",
                isOpen: s,
                onBtnClick: () => d(!1),
                onClose: () => d(!1),
              }),
            ],
          });
        };
      var ov = n(39341);
      let oh = () =>
          (0, es.Kk)(es.tw.Interaction, {
            interaction: {
              location: es.f.Checkout,
              component: es.g2.ColesPlus,
              description: "sign up to coles plus",
            },
          }),
        oy = (e) =>
          (0, es.Kk)(es.tw.Interaction, {
            interaction: {
              location: es.f.Checkout,
              component: es.g2.ColesPlus,
              description: e ? "start my free trial" : "start my membership",
            },
          }),
        og = (e, t) =>
          (0, es.Kk)(es.tw.SubscriptionCreate, {
            customer: {
              coles_plus: {
                subscriptionId: e,
                billingFrequency: ea.b6.billingFrequency.MONTHLY,
                paymentMethod: t.name,
              },
            },
          }),
        of = (e) =>
          (0, es.Kk)(es.tw.Error, {
            error: {
              location: es.f.Checkout,
              component: es.g2.ColesPlusSingleClickSignUpModal,
              description: e,
            },
          }),
        ob = (e) => {
          let {
              selectedPaymentMethod: t,
              paymentMethodCreateRequest: n,
              shipCharge: o,
              storeId: r,
              isEligibleForFreeTrial: i,
              onSuccess: l,
            } = e,
            [a, s, d] = (0, _.Vb)([
              ew.eV.PlaceSignUpOrder3DS,
              M.GO.PlaceOrder3DSServiceWorker,
              M.GO.CheckoutOrderDetailsV2,
            ]),
            [u, { isLoading: c }] = (0, ov.vm)(),
            [p, { isLoading: m }] = (0, ov.e)(),
            [v, h] = (0, D.useState)(!1),
            [y, g] = (0, D.useState)(!1),
            [f, b] = (0, D.useState)(!1),
            [C, S] = (0, D.useState)(null),
            x = (0, D.useCallback)(async () => {
              if (!t) return;
              let e = ea.b6.billingFrequency.MONTHLY;
              if (eb.Rb.includes(t.name))
                return {
                  billingFrequency: e,
                  paymentMethod: {
                    name: ea.xW.name.SAVED_CARD,
                    data: {
                      identifier: null == n ? void 0 : n.identifier,
                    },
                  },
                };
              if (eb.jT.includes(t.name)) {
                let o = t.clientToken,
                  r = await (0, ex.Tb)(await (0, ex.xo)(o || ""));
                return {
                  billingFrequency: e,
                  paymentMethod: {
                    name: t.name,
                    data: {
                      deviceData: r,
                    },
                  },
                };
              }
            }, [null == n ? void 0 : n.identifier, t]),
            w = async (e) => {
              try {
                let t = await u({
                  body: e,
                }).unwrap();
                a && t.isThreedsRequired ? (b(!0), S(t)) : O(t.subscriptionId);
              } catch (n) {
                (0, eS.tz)(n, eS.NI.FetchRequest), of(JSON.stringify(n)), h(!0);
              }
            },
            I = async () => {
              if ((b(!1), C))
                try {
                  await p({
                    body: {
                      recurringOrderId: C.recurringOrderId,
                    },
                  }).unwrap(),
                    O(C.subscriptionId);
                } catch (e) {
                  (0, eS.tz)(e, eS.NI.FetchRequest),
                    of(JSON.stringify(e)),
                    h(!0);
                }
            },
            { refetch: P } = (0, ep.wo)(),
            [T] = (0, eg.xQ)(),
            [k, j] = (0, D.useState)(null),
            A = () => {
              let e = (0, eV.uI)(o);
              j({
                name: "Yay! You’re a Coles Plus member",
                message: "We’ve removed your ".concat(
                  e,
                  " delivery fee. Linked your Flybuys? You’ll also earn extra points."
                ),
                type: "success",
              });
            },
            E = async () => {
              try {
                await T({
                  storeId: r,
                  shouldUseOrderDetailsV2: d,
                }).unwrap();
              } catch (e) {
                (0, eS.tz)(e, eS.NI.FetchRequest), of(JSON.stringify(e)), h(!0);
              }
              P();
            },
            O = async (e) => {
              g(!0), l(), A(), og(e, t), await E();
            },
            R = async () => oh(),
            L = async () => {
              oy(i);
              let e = await x();
              if (!e) return null;
              w(e);
            };
          return {
            isLoading: c || m,
            shouldUse3ds: a,
            shouldUseThreeDSServiceWorker: s,
            subscriptionResponse: C,
            isSuccess: y,
            showThreeDSModal: f,
            createSubscriptionRequestPayload: x,
            startSubscriptionOrder: w,
            continueSubscriptionOrder: I,
            onStartMembershipClick: L,
            onComponentClick: R,
            notification: k,
            setNotification: j,
            setShowThreeDSModal: b,
            hasError: v,
            setHasError: h,
          };
        },
        oC = (e) => {
          var t, n;
          let { paymentMethodCreateRequest: o, storeId: r, onSuccess: i } = e,
            {
              details: l,
              show: a,
              isColesPlusSeasonalMarketingEnabled: s,
            } = oi(),
            d = ob({
              selectedPaymentMethod:
                null == l ? void 0 : l.selectedPaymentMethod,
              paymentMethodCreateRequest: o,
              shipCharge:
                null !== (t = null == l ? void 0 : l.shipCharge) && void 0 !== t
                  ? t
                  : 0,
              storeId: r,
              isEligibleForFreeTrial:
                null !== (n = null == l ? void 0 : l.isEligibleForFreeTrial) &&
                void 0 !== n &&
                n,
              onSuccess: i,
            }),
            u = !d.isSuccess && l && a,
            c = !d.showThreeDSModal && l && l.shipCharge > 0;
          return (0, E.jsxs)(E.Fragment, {
            children: [
              u &&
                (0, E.jsx)(oa, {
                  children:
                    c &&
                    (0, E.jsx)(ew.TA, {
                      subscriptionRate: l.subscriptionRate,
                      isEligibleForFreeTrial: l.isEligibleForFreeTrial,
                      nextBillingDate: l.nextBillingDate,
                      onStartMembershipClick: d.onStartMembershipClick,
                      onComponentClick: d.onComponentClick,
                      shipCharge: l.shipCharge,
                      isColesPlusSeasonalMarketingEnabled: s,
                    }),
                }),
              (0, E.jsx)(om, {
                shouldUse3ds: d.shouldUse3ds,
                showThreeDSModal: d.showThreeDSModal,
                subscriptionResponse: d.subscriptionResponse,
                shouldUseThreeDSServiceWorker: d.shouldUseThreeDSServiceWorker,
                isLoading: d.isLoading,
                setShowThreeDSModal: d.setShowThreeDSModal,
                continueSubscriptionOrder: d.continueSubscriptionOrder,
                hasError: d.hasError,
                setHasError: d.setHasError,
              }),
              d.notification &&
                (0, E.jsx)(eE.yS, {
                  notification: d.notification,
                  onClose: () => {
                    d.setNotification(null);
                  },
                }),
            ],
          });
        };
      var oS = n(80500);
      let ox = (e) => {
          let t = [];
          if (e) {
            if ("string" == typeof e)
              t = [
                {
                  error_name: e,
                  error_value: e,
                  error_code: e,
                },
              ];
            else if ((0, el.xH)(e))
              t = [
                {
                  error_name: e.name || "",
                  error_value: e.message || "",
                  error_code: e.code || "",
                },
              ];
            else if ((0, el.f2)(e)) {
              var n;
              t =
                (null === (n = e.errors) || void 0 === n
                  ? void 0
                  : n.map((e) => ({
                      error_name: e.message || "",
                      error_value: e.message || "",
                      error_code: e.errorCode || "",
                    }))) || [];
            }
          }
          return t;
        },
        ow = (e, t, n) => ({
          state: {
            ...e,
            coles_plus_sign_up: t,
          },
          options: [],
          messages: [],
          errors: ox(n),
        });
      var oI = n(75522);
      let oP = (e) => {
        var t, n, o, r;
        return {
          slot_date: "",
          slot_day: "",
          days_to_delivery: "",
          slots: [
            {
              section: "",
              type: e.orderAttributes.slot.windowType,
              price: "",
              time: e.orderAttributes.slot.reservationExpirationTime,
              duration: e.orderAttributes.slot.windowTime,
              min_order_value:
                e.orderAttributes.slot.minOrderValueFreeShipCharge,
              max_items: e.orderAttributes.slot.maxItems,
              is_unattended:
                null ===
                  (t =
                    null === (n = e.orderAttributes) || void 0 === n
                      ? void 0
                      : null === (o = n.delivery) || void 0 === o
                      ? void 0
                      : null === (r = o.options) || void 0 === r
                      ? void 0
                      : r.find((e) => e.selected)) || void 0 === t
                  ? void 0
                  : t.displayName,
              delivery_restrictions:
                e.orderAttributes.slot.deliveryRestrictions,
            },
          ],
        };
      };
      var oT = n(25025),
        ok = n(26267),
        oj = n(61198);
      let oA = (e) => ({
          page: {
            url: window.location.href,
            name: "checkout",
            type: "checkout",
            brand: "coles",
          },
          localisation: (0, oT.g)({
            shoppingMethod: e.shoppingMethod,
          }),
          customer: (0, oI.Ir)({
            authenticated: !0,
          }),
          trolley: (0, oj.g)({
            storeId: e.storeId,
            trolley: e.trolleySummary,
          }),
          checkout: ow(e.completedSteps, e.colesPlusSignUp, e.error),
          order: (0, ok.D)(
            e.orderDetails,
            e.paymentType,
            e.trolleyItems,
            e.trolleySummary.orderId
          ),
          delivery: oP(e.orderDetails),
        }),
        oE = function () {
          let e =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : 1,
            t =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : "your order details";
          (0, es.Kk)(es.tw.Interaction, {
            interaction: {
              location: "checkout",
              component: t,
              description: "continue",
              position: e.toString(),
            },
          });
        },
        oO = (e) => {
          var t, n, o, r, i, l, a, s;
          let { assetsUrl: d = "" } = e,
            [u, c, p, m, v, h, y] = (0, _.Vb)([
              M.GO.PlaceOrder3DS,
              M.GO.PlaceOrder3DSServiceWorker,
              M.GO.CheckoutPreferenceSubstitutionsCheckboxes,
              eI.TP.FlybuyContinuity,
              M.GO.CheckoutOrderDetailsV2,
              M.GO.DeviceFingerprintingEnabled,
              eI.TP.TrolleyApiSaveSubstitutions,
            ]),
            {
              checkoutDetails: g,
              trolleyItems: f,
              error: b,
              isLoading: S,
              reviewTrolley: x,
            } = (0, ep.wo)(),
            {
              isRestrictedItemsError: w,
              restrictedItems: I,
              isRestrictedItemsLoading: P,
            } = (0, ep.LL)(),
            T = (0, ti.I0)(),
            {
              data: k,
              trolleyHasItems: j,
              remoteProvider: A,
            } = (0, eI.K9)(!1, y),
            O = (0, eC.ss)(),
            R = ef(),
            N = eh(),
            F = ey(),
            V = (0, eu.ub)(),
            [U, Z] = (0, D.useState)({
              type: null,
              isOpen: !1,
            }),
            [z, G] = (0, D.useState)(""),
            [Y, q] = (0, D.useState)(void 0),
            { trackSubmission: K } = (0, M.iS)({
              proceed: h,
              onGeneration: (e) => {
                G(e);
              },
              onFailure: (e) => {
                q(e);
              },
              beaconCreationTimeout: 1e4,
              collectorInstantiationTimeout: 5e3,
              fingerprintGenerationTimeout: 6e4,
              instantiationPollRate: 100,
            }),
            W = (0, B.tv)(),
            [Q, H] = (0, D.useState)(x || !1),
            [X, J] = (0, D.useState)(!1),
            $ = (0, D.useRef)(null),
            [ee, ed] = (0, D.useState)(!1),
            [, ec] = (0, B._)(B.BU.Local.NudgingModalLastShownDate),
            [, , { removeItem: em }] = (0, en.Z)(B.BU.Local.UpfrontMethod),
            ev = (0, eb.Vc)(el.sQ.CHECKOUT, !0),
            {
              isSuccess: eg,
              isLoading: ek,
              savedPaymentMethodForOrder: ej,
              paymentMethods: eA,
              refetchGetPaymentMethod: eE,
              mpgsVersion: eO,
            } = ev,
            eD = (0, eb.A1)(eA),
            {
              selectedPaymentType: eR,
              completedPaymentType: eL,
              setCompletedPaymentType: eN,
            } = eD,
            [eM, eF] = (0, D.useState)(void 0),
            { isSyncing: eB } = (0, ep.Ez)({
              startSyncing: !!T && j && !!I,
              restrictedItems: I,
              paydockFlypayOrderProcessHandler: () => void 0,
            }),
            { show: e_, isLoading: eV } = oi(),
            eU = !S && !!(eg && eR) && !eB && !b && !eV && !P && !w,
            eZ = null == g ? void 0 : g.orderId,
            ez = tX({
              isPageLoaded: eU,
              completedPaymentType: eL,
              savedPaymentMethodForOrder: ej,
              reviewTrolley: Q,
            }),
            { completedSteps: eG, setActiveStepInd: eY } = ez,
            eq = (0, D.useRef)(!1),
            eK = async () => {
              await eE(), J(!0);
            };
          (0, D.useEffect)(() => {
            void 0 === x || eq.current || ((eq.current = !0), H(x));
          }, [x]),
            (0, D.useEffect)(() => {
              if (X && !eg) {
                J(!1);
                let e = {
                  ...eG,
                  [tV.paymentMethod]: tY(eL, ej || null),
                };
                eY(tW(e, null));
              }
            }, [X, eG, eY, eE, eg, eL, ej]),
            (0, es.A4)(
              () => {
                let e =
                  null == g
                    ? void 0
                    : g.shoppingConfiguration.fulfillmentStoreId;
                return (
                  !!eZ &&
                  !!e &&
                  !!V &&
                  !!eR &&
                  !!f &&
                  !!eU && {
                    data: oA({
                      orderDetails: g,
                      trolleySummary: k,
                      shoppingMethod: V,
                      storeId: e,
                      error: null != b ? b : null,
                      trolleyItems: f,
                      paymentType: eR,
                      completedSteps: tU(ez.completedSteps),
                      colesPlusSignUp: e_,
                    }),
                    eventType: es.tw.CheckoutLoaded,
                  }
                );
              },
              [f, eZ, b, V, e_, eU],
              !0
            ),
            (0, es.A4)(
              () =>
                eU && {
                  data: {
                    checkout: {
                      state: {
                        coles_plus_sign_up: e_,
                      },
                    },
                  },
                  eventType: es.tw.CheckoutUpdateState,
                },
              [e_],
              !1
            );
          let eW = tB(g, v),
            eQ = tP(g, A),
            eH = (e) => (e === el.jY.CLICK_AND_COLLECT ? "View" : "Edit"),
            eX = (0, D.useMemo)(() => {
              let e = tZ[tV.orderDetails](
                  null == eQ ? void 0 : eQ.shoppingMethodType
                ),
                t = null == eQ ? void 0 : eQ.selectedSlot;
              return (
                t &&
                  ((t = t.replace(",", "")).includes("Tomorrow") &&
                    (t = t.replace("Tomorrow", "tomorrow")),
                  t.includes("Today") && (t = t.replace("Today", "today")),
                  (t = (t = t.replace(/:00/g, "")).replace(" to ", "-"))),
                e + ", " + (t ? " " + t : "")
              );
            }, [
              null == eQ ? void 0 : eQ.shoppingMethodType,
              null == eQ ? void 0 : eQ.selectedSlot,
            ]),
            eJ =
              "PARTNERRAPID60" === eQ.slotWindowType
                ? (null == eQ ? void 0 : eQ.selectedSlot) &&
                  (null == eQ
                    ? void 0
                    : eQ.selectedSlot
                        .replace("Estimated arrival", "")
                        .replace("today", ""))
                : "",
            [e$, e0] = (0, D.useState)(!1),
            e1 = [
              {
                title:
                  "PARTNERRAPID60" === eQ.slotWindowType
                    ? "Delivery, today " + eJ
                    : eX,
                inspectView: (e) => {
                  if (S || !g) return null;
                  let t = () => {
                    oE(tV.orderDetails + 1, "your order details"), e();
                  };
                  return (0, E.jsx)(tN, {
                    shoppingMethodSummary: eQ,
                    orderDetailsPreferences: {
                      delivery: g.orderAttributes.delivery,
                      slot: g.orderAttributes.slot,
                    },
                    restrictedItems: I || [],
                    showStepError: ez.shouldShowStepError(tV.orderDetails),
                    continueBtnProps: {
                      title: eX,
                      onComplete: t,
                    },
                    paydockFlypayOrderProcessHandler: (e) => void 0,
                  });
                },
                inspectButtonAriaLabel: "Edit your order details",
                summaryView: (0, E.jsx)(t3, {
                  restrictedItems: I,
                  shoppingMethodSummary: eQ,
                  setActiveStep: ez.setActiveStepInd,
                }),
                completed: ez.completedSteps[tV.orderDetails],
                active: ez.isActive(tV.orderDetails),
              },
              {
                title: tZ[tV.trolleySummary](),
                inspectView: (e) => {
                  let t = () => {
                    oE(tV.trolleySummary + 1, "Review trolley & substitutions"),
                      e();
                  };
                  return (0, E.jsx)(nF, {
                    setShouldReviewTrolley: H,
                    assetsUrl: d,
                    showSubstitutionCheckboxes: p,
                    showFlybuyContinuity: m,
                    showStepError: ez.shouldShowStepError(tV.trolleySummary),
                    continueBtnProps: {
                      title: tZ[tV.trolleySummary](),
                      onComplete: () => {
                        t();
                      },
                    },
                    onTrolleyUpdate: eK,
                  });
                },
                inspectButtonAriaLabel: "Edit your trolley",
                summaryView: (0, E.jsxs)(eT.XP, {
                  marginBottom: !0,
                  children: [
                    (null == g ? void 0 : g.totalQuantity) || 0,
                    " items in your trolley",
                    (0, E.jsx)("br", {}),
                    p &&
                      (0, E.jsx)(t5, {
                        trolleyItems: f,
                      }),
                    (0, E.jsx)("br", {}),
                    (0, E.jsx)(eo.Qj, {
                      label: "Change substitutions",
                      onClick: () => ez.setActiveStepInd(1),
                    }),
                    (0, E.jsx)(eP._, {
                      collectables:
                        null == g
                          ? void 0
                          : null === (t = g.orderAttributes) || void 0 === t
                          ? void 0
                          : t.collectableData,
                      hasTitle: !0,
                    }),
                  ],
                }),
                completed: ez.completedSteps[tV.trolleySummary],
                active: ez.isActive(tV.trolleySummary),
              },
              {
                title: tZ[tV.contactDetails](),
                inspectView: (e) => {
                  let t = tZ[tV.contactDetails](),
                    n = () => {
                      oE(tV.contactDetails + 1, "check your details"), e();
                    };
                  return (0, E.jsx)(t0, {
                    checkoutDetails: g,
                    showStepError: ez.shouldShowStepError(tV.contactDetails),
                    continueButtonTitle: t,
                    completeStep: n,
                  });
                },
                inspectLabel: eH(
                  null == k
                    ? void 0
                    : null === (n = k.shoppingConfiguration) || void 0 === n
                    ? void 0
                    : n.shoppingMethod
                ),
                inspectButtonAriaLabel:
                  ((s =
                    null == k
                      ? void 0
                      : null === (o = k.shoppingConfiguration) || void 0 === o
                      ? void 0
                      : o.shoppingMethod),
                  "".concat(eH(s), " your details")),
                summaryView: (0, E.jsx)(M.wO, {
                  email: eW.email,
                  name: "".concat(eW.firstName, " ").concat(eW.lastName),
                  phone: eW.phone,
                  shoppingMethod:
                    null == g ? void 0 : g.shoppingConfiguration.shoppingMethod,
                }),
                completed: ez.completedSteps[tV.contactDetails],
                active: ez.isActive(tV.contactDetails),
              },
              {
                title: tZ[tV.paymentMethod](eL, {
                  isActive: ez.isActive(tV.paymentMethod),
                }),
                inspectView: (e) => {
                  let t = (t) => {
                    eN(eR),
                      eF(t),
                      oE(tV.paymentMethod + 1, "choose payment method"),
                      e();
                  };
                  return (0, E.jsx)(n9, {
                    restrictedItems: I,
                    isPaymentsLoading: ek,
                    paymentMethod: ev,
                    paymentMethodFlow: el.sQ.CHECKOUT,
                    paymentTypeState: eD,
                    showStepError: ez.shouldShowStepError(tV.paymentMethod),
                    mpgsVersion: eO,
                    continueBtnProps: {
                      title: tZ[tV.paymentMethod](eL),
                      onComplete: t,
                    },
                  });
                },
                inspectButtonAriaLabel: "Edit payment method",
                summaryView: (0, E.jsxs)("div", {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children:
                        eL === el.uG.BillMeLater
                          ? "Coles for Business credit account"
                          : eL === el.uG.Card
                          ? "Card ending in ".concat(
                              null == ej
                                ? void 0
                                : null === (r = ej.data) || void 0 === r
                                ? void 0
                                : r.cardEndingNumber
                            )
                          : "Linked PayPal account",
                    }),
                    (0, E.jsx)(eT.XP, {
                      marginBottom: !0,
                      children:
                        eL === el.uG.BillMeLater
                          ? (0, ex.Xn)({
                              sapAccount: null == ej ? void 0 : ej.data,
                            })
                          : eL === el.uG.Card
                          ? "Expires ".concat(
                              null == ej
                                ? void 0
                                : null === (i = ej.data) || void 0 === i
                                ? void 0
                                : i.cardExpiry
                            )
                          : null == ej
                          ? void 0
                          : null === (l = ej.data) || void 0 === l
                          ? void 0
                          : l.email,
                    }),
                  ],
                }),
                completed: ez.completedSteps[tV.paymentMethod],
                active: ez.isActive(tV.paymentMethod),
              },
            ],
            e2 = () => {
              ez.validateAndSubmitSteps(() => {
                u && eL === el.uG.Card ? ed(!0) : e6();
              });
            },
            e6 = async () => {
              var e, t, n, o, r;
              (0, es.Kk)(es.tw.Interaction, {
                interaction: {
                  location: "checkout",
                  component: "cta",
                  description: "place order",
                },
              });
              try {
                let i = {
                  salesChannel: ea.Aw.salesChannel.CUSP,
                  flybuysBarcode:
                    (null == g
                      ? void 0
                      : null === (e = g.orderAttributes) || void 0 === e
                      ? void 0
                      : e.flybuysBarcode) || void 0,
                  staffDiscountNum:
                    (null == g
                      ? void 0
                      : null === (t = g.orderAttributes) || void 0 === t
                      ? void 0
                      : t.staffDiscountNum) || void 0,
                };
                z
                  ? (K(),
                    (0, eS.pb)("success", eS.tv.Fingerprinting),
                    (i.collectorPayload = z))
                  : void 0 !== Y
                  ? (0, eS.pb)(
                      "failure",
                      eS.tv.Fingerprinting,
                      "error",
                      void 0,
                      void 0,
                      {
                        [eS.Qy.errorSubtype]: Y.message,
                      }
                    )
                  : (0, eS.pb)(
                      "failure",
                      eS.tv.Fingerprinting,
                      "error",
                      void 0,
                      void 0,
                      {
                        [eS.Qy.errorSubtype]:
                          "Order submitted before fingerprinting completed",
                      }
                    ),
                  await O.placeOrder(i, (null == g ? void 0 : g.orderId) || ""),
                  ec(et.ou.now().toISODate()),
                  em();
                let l = e$ ? "?".concat(oS.a.SingleClickSignUp) : "";
                (0, ew.N$)(), W.replace("order-confirmation".concat(l));
              } catch (s) {
                let a =
                  (null == s
                    ? void 0
                    : null === (n = s.data) || void 0 === n
                    ? void 0
                    : null === (o = n.errors) || void 0 === o
                    ? void 0
                    : null === (r = o[0]) || void 0 === r
                    ? void 0
                    : r.errorCode) || "";
                Z({
                  type: on(a),
                  isOpen: !0,
                });
              }
            },
            e4 = O.isPlacingOrder || O.isOrderPlaced,
            e3 =
              !R.isOrderProcessSaving &&
              ez.isAllStepsComplete &&
              !N.isApplyingPromo &&
              !F.isRemovingPromo,
            e5 = e1.every((e) => !1 === e.active);
          return (0, E.jsx)(E.Fragment, {
            children: (0, E.jsxs)(eT.oB, {
              "data-pii": !0,
              children: [
                (0, E.jsx)("h1", {
                  className: "sr-only",
                  children: "Checkout",
                }),
                u &&
                  (null == g ? void 0 : g.orderId) &&
                  ee &&
                  (0, E.jsx)(ou.A, {
                    useServiceWorker: c,
                    orderId: g.orderId,
                    flow: el.sQ.CHECKOUT,
                    onClose: (e) => {
                      ed(!1), e && ez.setActiveStepInd(tV.paymentMethod);
                    },
                    onCancel: () => {
                      ed(!1);
                    },
                    onSuccess: () => {
                      ed(!1), e6();
                    },
                  }),
                e4 &&
                  (0, E.jsx)(eT.K9, {
                    children: (0, E.jsx)(L.T, {
                      title: "Just a few moments",
                      description: "Placing your order",
                    }),
                  }),
                (0, E.jsx)(eT.bm, {
                  "aria-hidden": e4,
                  children: (0, E.jsxs)(eT.Rt, {
                    children: [
                      (0, E.jsx)(er.JX, {
                        xs: 12,
                        md: 7,
                        lg: 8,
                        children: (0, E.jsx)(eT.M9, {
                          children: (0, E.jsxs)(ei.n, {
                            isLoaded: eU,
                            skeletonLayout: (0, E.jsx)(M.H2, {}),
                            children: [
                              (0, E.jsx)(M.Dd, {
                                steps: e1,
                                setActiveStep: ez.setActiveStepInd,
                                isFormDirty: ez.isDirty,
                              }),
                              (0, E.jsx)(oC, {
                                paymentMethodCreateRequest: eM,
                                storeId:
                                  null == g
                                    ? void 0
                                    : g.shoppingConfiguration
                                        .fulfillmentStoreId,
                                onSuccess: () => e0(!0),
                              }),
                            ],
                          }),
                        }),
                      }),
                      (0, E.jsx)(er.JX, {
                        xs: 12,
                        md: 5,
                        lg: 4,
                        children: (0, E.jsx)(eT.YE, {
                          ref: $,
                          children:
                            eU &&
                            (0, E.jsx)(nt, {
                              onPlaceOrderClick: e2,
                              unCompletedSteps: ez.unCompletedSteps,
                              showStepError: ez.isSubmitted,
                              isAllStepsComplete: e3,
                              isAllStepsInactive: e5,
                              activeStepInd: ez.activeStepInd,
                              checkoutStepTitles: tZ,
                              orderProcessHook: R,
                              applyPromoHook: N,
                              removePromoHook: F,
                            }),
                        }),
                      }),
                    ],
                  }),
                }),
                (0, E.jsx)(oe, {
                  type: U.type,
                  isOpen: U.isOpen,
                  sapAccountNumber:
                    null == ej
                      ? void 0
                      : null === (a = ej.data) || void 0 === a
                      ? void 0
                      : a.sapAccountNumber,
                  onClose: () => {
                    (U.type === C.threeDSAuthenticationDoNotProceed ||
                      U.type === C.creditCardInvalidError ||
                      U.type === C.creditAccountCheckError) &&
                      ez.setActiveStepInd(tV.paymentMethod),
                      Z({
                        type: U.type,
                        isOpen: !1,
                      });
                  },
                }),
              ],
            }),
          });
        };
      ((a = S || (S = {}))[(a.Continue = 100)] = "Continue"),
        (a[(a.SwitchingProtocols = 101)] = "SwitchingProtocols"),
        (a[(a.Processing = 102)] = "Processing"),
        (a[(a.Ok = 200)] = "Ok"),
        (a[(a.Created = 201)] = "Created"),
        (a[(a.Accepted = 202)] = "Accepted"),
        (a[(a.NonAuthoritativeInformation = 203)] =
          "NonAuthoritativeInformation"),
        (a[(a.NoContent = 204)] = "NoContent"),
        (a[(a.ResetContent = 205)] = "ResetContent"),
        (a[(a.PartialContent = 206)] = "PartialContent"),
        (a[(a.MultiStatus = 207)] = "MultiStatus"),
        (a[(a.AlreadyReported = 208)] = "AlreadyReported"),
        (a[(a.ImUsed = 226)] = "ImUsed"),
        (a[(a.MultipleChoices = 300)] = "MultipleChoices"),
        (a[(a.MovedPermanently = 301)] = "MovedPermanently"),
        (a[(a.Found = 302)] = "Found"),
        (a[(a.SeeOther = 303)] = "SeeOther"),
        (a[(a.NotModified = 304)] = "NotModified"),
        (a[(a.UseProxy = 305)] = "UseProxy"),
        (a[(a.SwitchProxy = 306)] = "SwitchProxy"),
        (a[(a.TemporaryRedirect = 307)] = "TemporaryRedirect"),
        (a[(a.PermanentRedirect = 308)] = "PermanentRedirect"),
        (a[(a.BadRequest = 400)] = "BadRequest"),
        (a[(a.Unauthorized = 401)] = "Unauthorized"),
        (a[(a.PaymentRequired = 402)] = "PaymentRequired"),
        (a[(a.Forbidden = 403)] = "Forbidden"),
        (a[(a.NotFound = 404)] = "NotFound"),
        (a[(a.MethodNotAllowed = 405)] = "MethodNotAllowed"),
        (a[(a.NotAcceptable = 406)] = "NotAcceptable"),
        (a[(a.ProxyAuthenticationRequired = 407)] =
          "ProxyAuthenticationRequired"),
        (a[(a.RequestTimeout = 408)] = "RequestTimeout"),
        (a[(a.Conflict = 409)] = "Conflict"),
        (a[(a.Gone = 410)] = "Gone"),
        (a[(a.LengthRequired = 411)] = "LengthRequired"),
        (a[(a.PreconditionFailed = 412)] = "PreconditionFailed"),
        (a[(a.PayloadTooLarge = 413)] = "PayloadTooLarge"),
        (a[(a.UriTooLong = 414)] = "UriTooLong"),
        (a[(a.UnsupportedMediaType = 415)] = "UnsupportedMediaType"),
        (a[(a.RangeNotSatisfiable = 416)] = "RangeNotSatisfiable"),
        (a[(a.ExpectationFailed = 417)] = "ExpectationFailed"),
        (a[(a.IAmATeapot = 418)] = "IAmATeapot"),
        (a[(a.MisdirectedRequest = 421)] = "MisdirectedRequest"),
        (a[(a.UnprocessableEntity = 422)] = "UnprocessableEntity"),
        (a[(a.Locked = 423)] = "Locked"),
        (a[(a.FailedDependency = 424)] = "FailedDependency"),
        (a[(a.UpgradeRequired = 426)] = "UpgradeRequired"),
        (a[(a.PreconditionRequired = 428)] = "PreconditionRequired"),
        (a[(a.TooManyRequests = 429)] = "TooManyRequests"),
        (a[(a.RequestHeaderFieldsTooLarge = 431)] =
          "RequestHeaderFieldsTooLarge"),
        (a[(a.UnavailableForLegalReasons = 451)] =
          "UnavailableForLegalReasons"),
        (a[(a.InternalServerError = 500)] = "InternalServerError"),
        (a[(a.NotImplemented = 501)] = "NotImplemented"),
        (a[(a.BadGateway = 502)] = "BadGateway"),
        (a[(a.ServiceUnavailable = 503)] = "ServiceUnavailable"),
        (a[(a.GatewayTimeout = 504)] = "GatewayTimeout"),
        (a[(a.HttpVersionNotSupported = 505)] = "HttpVersionNotSupported"),
        (a[(a.VariantAlsoNegotiates = 506)] = "VariantAlsoNegotiates"),
        (a[(a.InsufficientStorage = 507)] = "InsufficientStorage"),
        (a[(a.LoopDetected = 508)] = "LoopDetected"),
        (a[(a.NotExtended = 510)] = "NotExtended"),
        (a[(a.NetworkAuthenticationRequired = 511)] =
          "NetworkAuthenticationRequired");
      let oD = (e) => {
          let { statusCode: t } = e,
            { addressProfile: n } = (0, ep.wo)(),
            [o, r] = (0, D.useState)(!0),
            i = () => r(!1),
            l = () => n.refetch();
          return [S.InternalServerError, S.ServiceUnavailable].includes(t)
            ? (0, E.jsx)(eE.eW, {
                title: "Something went wrong",
                dataTestId: "address-profile-error-modal-1",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "Sorry, we're having issues loading some information. Please contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Customer Care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      children: "Customer Care",
                    }),
                    ".",
                  ],
                }),
                btnText: "Ok",
                isOpen: o,
                onBtnClick: i,
                onClose: i,
              })
            : [
                S.BadRequest,
                S.Unauthorized,
                S.Forbidden,
                S.NotFound,
                S.FailedDependency,
              ].includes(t)
            ? (0, E.jsx)(eE.eW, {
                title: "Something went wrong",
                dataTestId: "address-profile-error-modal-2",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "Sorry, we're having issues loading some information. Please try again, and if that doesn't work contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Customer Care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      children: "Customer Care",
                    }),
                    ".",
                  ],
                }),
                btnText: "Ok, try again",
                isOpen: o,
                onBtnClick: l,
                onClose: i,
              })
            : null;
        },
        oR = (e) => {
          let { statusCode: t } = e,
            { orderDetails: n } = (0, ep.wo)(),
            [o, r] = (0, D.useState)(!0),
            i = () => r(!1),
            l = () => n.refetch();
          return [S.BadRequest, S.FailedDependency].includes(t)
            ? (0, E.jsx)(eE.eW, {
                title: "Something went wrong",
                dataTestId: "order-details-error-modal",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "Sorry, we're having issues loading some information. Please try again, and if that doesn't work contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Customer Care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      children: "Customer Care",
                    }),
                    ".",
                  ],
                }),
                btnText: "Ok, try again",
                isOpen: o,
                onBtnClick: l,
                onClose: i,
              })
            : null;
        },
        oL = (e) => {
          let { statusCode: t } = e,
            { profileMe: n } = (0, ep.wo)(),
            [o, r] = (0, D.useState)(!0),
            i = () => r(!1),
            l = () => n.refetch();
          return [S.InternalServerError].includes(t)
            ? (0, E.jsx)(eE.eW, {
                title: "Something went wrong",
                dataTestId: "profile-me-error-modal-1",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "Sorry, we're having issues loading some information. Please contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Customer Care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      children: "Customer Care",
                    }),
                    ".",
                  ],
                }),
                btnText: "Ok",
                isOpen: o,
                onBtnClick: i,
                onClose: i,
              })
            : [S.BadRequest, S.Unauthorized, S.Forbidden, S.NotFound].includes(
                t
              )
            ? (0, E.jsx)(eE.eW, {
                title: "Something went wrong",
                dataTestId: "profile-me-error-modal-2",
                description: (0, E.jsxs)(E.Fragment, {
                  children: [
                    "Sorry, we're having issues loading some information. Please try again, and if that doesn't work contact",
                    " ",
                    (0, E.jsx)(eo.rU, {
                      label: "Customer Care",
                      variant: "inline",
                      href: F.Ce.coles.help,
                      children: "Customer Care",
                    }),
                    ".",
                  ],
                }),
                btnText: "Ok, try again",
                isOpen: o,
                onBtnClick: l,
                onClose: i,
              })
            : null;
        },
        oN = () => {
          var e, t, n;
          let {
              orderDetails: o,
              profileMe: r,
              addressProfile: i,
            } = (0, ep.wo)(),
            [l] = (0, _.Vb)([M.GO.CheckoutOrderDetailsV2]);
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(oR, {
                statusCode:
                  null == o
                    ? void 0
                    : null === (e = o.error) || void 0 === e
                    ? void 0
                    : e.status,
              }),
              !l &&
                (0, E.jsx)(oL, {
                  statusCode:
                    null == r
                      ? void 0
                      : null === (t = r.error) || void 0 === t
                      ? void 0
                      : t.status,
                }),
              (0, E.jsx)(oD, {
                statusCode:
                  null == i
                    ? void 0
                    : null === (n = i.error) || void 0 === n
                    ? void 0
                    : n.status,
              }),
            ],
          });
        },
        oM = (e) => {
          let { isOrderDetailsError: t, refetchOrderDetails: n } = e,
            [o, r] = (0, D.useState)(!1),
            i = () => r(!1);
          return (
            (0, D.useEffect)(() => {
              r(t);
            }, [t]),
            (0, E.jsx)(eE.eW, {
              title: "We're having issues loading your order details",
              dataTestId: "order-details-error-modal",
              description: (0, E.jsxs)(E.Fragment, {
                children: [
                  "Please try again. If still unsuccessful,",
                  " ",
                  (0, E.jsx)(eo.rU, {
                    label: "contact Customer Care",
                    variant: "inline",
                    href: F.Ce.coles.help,
                    children: "contact Customer Care",
                  }),
                  " ",
                  "for support",
                ],
              }),
              btnText: "Try again",
              isOpen: o,
              onClose: i,
              onBtnClick: () => {
                n(), i();
              },
            })
          );
        };
      var oF = n(95026),
        oB = n(7062),
        o_ = n(73918);
      let oV = (e) => {
          let t = e.find((e) => !e[1]);
          return t ? t[0] : null;
        },
        oU = (e) => {
          let {
              isOrderDetailsComplete: t,
              isTrolleyReviewComplete: n,
              isPaymentMethodComplete: o,
              isContactDetailsComplete: r,
            } = e,
            i = {
              0: t,
              1: n,
              2: r,
              3: o,
            },
            l = Object.keys(i)
              .filter((e) => !1 === i[Number(e)])
              .map(Number);
          return l;
        },
        oZ = (e) => {
          switch (e) {
            case "OrderDetails":
            default:
              return 0;
            case "TrolleyReview":
              return 1;
            case "ContactDetails":
              return 2;
            case "PaymentMethod":
              return 3;
            case null:
              return null;
          }
        },
        oz = {
          0: (e) =>
            e === el.jY.CLICK_AND_COLLECT ? "Click & Collect" : "Delivery",
          1: () => "Review trolley & substitutions",
          2: () => "Check your details",
          3: (e, t) => {
            if ((null == t ? void 0 : t.isActive) === !0)
              return "Choose a payment method";
            switch (e) {
              case el.uG.BillMeLater:
                return "Pay with credit account";
              case el.uG.Card:
                return "Pay with debit or credit card";
              case el.uG.PayPal:
                return "Pay with PayPal";
              case el.uG.Flypay:
                return "Pay with flypay";
              default:
                return "Choose a payment method";
            }
          },
          4: () => "Customer agreement",
        },
        oG = (e, t) => {
          (0, es.Kk)(
            es.tw.CheckoutErrors,
            tF(
              e.map((e) => ({
                error_description: oz[e](t),
                error_type: Object.keys(tV)[e],
              }))
            )
          );
        };
      var oY = n(71432),
        oq = n(10509),
        oK = n(23930);
      function oW() {
        let e = (0, q.Z)(["\n  display: flex;\n  flex-direction: column;\n"]);
        return (
          (oW = function () {
            return e;
          }),
          e
        );
      }
      function oQ() {
        let e = (0, q.Z)([
          "\n  > div:first-child {\n    margin-top: ",
          ";\n  }\n  margin-left: ",
          ";\n  padding: 0;\n  border: none;\n\n  @media ",
          " {\n    margin-left: 0;\n  }\n",
        ]);
        return (
          (oQ = function () {
            return e;
          }),
          e
        );
      }
      function oH() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  align-items: center;\n  ",
          "\n",
        ]);
        return (
          (oH = function () {
            return e;
          }),
          e
        );
      }
      function oX() {
        let e = (0, q.Z)([
          "\n  ",
          ";\n  display: flex;\n  @media ",
          " {\n    ",
          ";\n  }\n",
        ]);
        return (
          (oX = function () {
            return e;
          }),
          e
        );
      }
      function oJ() {
        let e = (0, q.Z)(["\n  ", ";\n"]);
        return (
          (oJ = function () {
            return e;
          }),
          e
        );
      }
      function o$() {
        let e = (0, q.Z)([
          "\n  .MuiStepLabel-iconContainer {\n    h2 {\n      ",
          ";\n    }\n    ",
          "\n    display: inline-flex;\n    width: 100%;\n    justify-content: space-between;\n  }\n\n  .MuiStepLabel-labelContainer {\n    width: initial;\n  }\n  .MuiStepLabel-iconContainer {\n    flex: 1;\n  }\n",
        ]);
        return (
          (o$ = function () {
            return e;
          }),
          e
        );
      }
      function o0() {
        let e = (0, q.Z)(["\n  ", ";\n"]);
        return (
          (o0 = function () {
            return e;
          }),
          e
        );
      }
      let o1 = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-CheckoutStepperWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dfd38f90-0",
          })(oW()),
        o2 = K.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-CheckoutStepperCheckoutStepCheckoutStepContent",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dfd38f90-1",
          })(oQ(), R.zr.s4, (0, ta.Q1)(56), nb.j.mobileLargeMax),
        o6 = K.ZP.h2
          .attrs((e) => ({
            className: "coles-targeting-CheckoutStepperCheckoutStepIconHeader",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dfd38f90-2",
          })(oH(), W.rS.rdsText.heading_500),
        o4 = K.ZP.span
          .attrs((e) => ({
            className: "coles-targeting-CheckoutStepperCheckoutStepIcon",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dfd38f90-3",
          })(oX(), eR.XK.s6.right, nb.j.mobileLargeMax, eR.XK.s3.right),
        o3 = K.ZP.span
          .attrs((e) => ({
            className: "coles-targeting-CheckoutStepperCheckoutStepCheckIcon",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dfd38f90-4",
          })(oJ(), eR.XK.s4.left),
        o5 = (0, K.ZP)(oK.Z)
          .attrs((e) => ({
            className:
              "coles-targeting-CheckoutStepperCheckoutStepCheckoutStepLabel",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dfd38f90-5",
          })(o$(), W.rS.rdsText.heading_500, (e) =>
          "color: ".concat(e.color, ";")
        ),
        o8 = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-CheckoutStepperCheckoutStepLineDivider",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dfd38f90-6",
          })(o0(), eR.XK.s6.vertical),
        o7 = (e) => {
          let {
              isStepActive: t,
              isStepComplete: n,
              stepIcon: o,
              testId: r,
              heading: i,
            } = e,
            l = re({
              isStepActive: t,
              isStepComplete: n,
            });
          return (0, E.jsx)(o1, {
            children: (0, E.jsx)(o5, {
              "data-testid": r,
              color: l,
              StepIconComponent: () =>
                (0, E.jsxs)(o6, {
                  tabIndex: -1,
                  children: [
                    (0, E.jsx)(o4, {
                      children: o,
                    }),
                    i,
                    (0, E.jsx)(o3, {
                      children: (0, E.jsx)(o9, {
                        isStepActive: t,
                        isStepComplete: n,
                      }),
                    }),
                  ],
                }),
            }),
          });
        },
        o9 = (e) => {
          let { isStepActive: t, isStepComplete: n } = e;
          return !t && n
            ? (0, E.jsx)(oq.default, {
                title: "icon-check",
                color: W.rS.colorFeedback.success.primary.default,
              })
            : null;
        },
        re = (e) => {
          let { isStepActive: t, isStepComplete: n } = e;
          return n || t
            ? W.rS.colorForeground.primary
            : W.rS.colorForeground.secondary;
        };
      function rt() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (rt = function () {
            return e;
          }),
          e
        );
      }
      let rn = (0, K.ZP)(tf)
          .attrs((e) => ({
            className:
              "coles-targeting-ContactDetailsStyledStepErrorNotification",
            ...e,
          }))
          .withConfig({
            componentId: "sc-be1f76be-0",
          })(rt(), eR.XK.s4.vertical),
        ro = (e, t) => {
          var n;
          if (!e)
            return {
              firstName: "",
              lastName: "",
              email: "",
              phone: "",
            };
          if (t)
            return {
              ...e.contactDetails,
              phone: e.contactDetails.phone || "",
            };
          let o = null == e ? void 0 : e.shoppingConfiguration.shoppingMethod,
            r = null == e ? void 0 : e.addressProfile;
          return o === el.jY.DELIVERY || o === el.jY.REMOTE_DELIVERY
            ? {
                firstName: null == r ? void 0 : r.recipientFirstName,
                lastName: null == r ? void 0 : r.recipientLastName,
                email: null == r ? void 0 : r.email,
                phone:
                  (null == r ? void 0 : r.phone) ||
                  (null == e ? void 0 : e.contactDetails.phone) ||
                  "",
              }
            : {
                ...(null == e ? void 0 : e.contactDetails),
                phone:
                  (null == e
                    ? void 0
                    : null === (n = e.contactDetails) || void 0 === n
                    ? void 0
                    : n.phone) || "",
              };
        },
        rr = (e, t) => {
          if (e === el.jY.DELIVERY || e === el.jY.REMOTE_DELIVERY) {
            let n = t.mobile || t.phone;
            return {
              email: t.email,
              firstName: t.firstName,
              lastName: t.lastName,
              phone: ri(n),
            };
          }
          return {
            mobile: ri(t.mobile),
            phone: ri(t.phone),
          };
        },
        ri = (e) => (e ? e.replaceAll(" ", "") : ""),
        rl = (e) => {
          var t;
          let {
              checkoutDetails: n,
              showStepError: o,
              onContactDetailsSubmit: r,
              isSubmitting: i,
            } = e,
            [l, a] = (0, D.useState)(!1),
            [s, d] = (0, D.useState)(!1),
            u = null == n ? void 0 : n.shoppingConfiguration.shoppingMethod,
            [c] = (0, ed.z5)(),
            [p] = (0, ed.NG)(),
            m = null == n ? void 0 : n.addressProfile,
            [v] = (0, _.Vb)([M.GO.CheckoutOrderDetailsV2]),
            h = (null == n ? void 0 : n.orderId) || "",
            y =
              (null == n
                ? void 0
                : null === (t = n.shoppingConfiguration) || void 0 === t
                ? void 0
                : t.fulfillmentStoreId) || "",
            { contactDetails: g, defaultFormValues: f } = (0, D.useMemo)(() => {
              let e = ro(n, v) || {
                  firstName: "",
                  lastName: "",
                  email: "",
                  phone: "",
                },
                t = (0, B.mh)(e.phone) === el.sw.MOBILE,
                o = {
                  firstName: e.firstName,
                  lastName: e.lastName,
                  email: e.email,
                  mobile: t ? e.phone : "",
                  phone: t ? "" : e.phone,
                };
              return {
                contactDetails: e,
                defaultFormValues: o,
              };
            }, [n, v]),
            {
              control: b,
              reset: C,
              handleSubmit: S,
              trigger: x,
              formState: w,
              setFocus: I,
            } = (0, ek.cI)({
              defaultValues: f,
              mode: "all",
              shouldUnregister: !0,
            });
          if (
            ((0, D.useEffect)(() => {
              C(f);
            }, [C, f]),
            (0, D.useEffect)(() => {
              o && !w.isValid && x();
            }, [w, x, o]),
            !n)
          )
            return null;
          let P = s || !g.phone,
            T = async (e) => {
              try {
                u === el.jY.CLICK_AND_COLLECT
                  ? await p({
                      body: {
                        contacts: rr(el.jY.CLICK_AND_COLLECT, e),
                      },
                      shouldUseOrderDetailsV2: v
                        ? {
                            useOrderDetailsV2Flag: v,
                            storeId: y,
                            orderId: h,
                          }
                        : void 0,
                    }).unwrap()
                  : (u === el.jY.DELIVERY || u === el.jY.REMOTE_DELIVERY) &&
                    (await c({
                      addressId: null == m ? void 0 : m.id,
                      body: rr(u, e),
                      useOrderDetailsV2Flag: v,
                      storeId: y,
                      orderId: h,
                    }).unwrap()),
                  (0, es.Kk)(es.tw.CheckoutUpdateCustomerDetails);
              } catch (t) {
                throw (a(!0), t);
              }
            };
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(eE.eW, {
                title: "Your contact details couldn't be updated",
                description:
                  "Sorry, we can't update your contact details right now. Please try again in a few minutes.",
                btnText: "Return to checkout",
                isOpen: l,
                onBtnClick: () => a(!1),
                onClose: () => a(!1),
              }),
              P
                ? (0, E.jsxs)(E.Fragment, {
                    children: [
                      (0, E.jsx)(M.x4, {
                        shoppingMethod: u,
                        control: b,
                        reset: C,
                        setFocus: I,
                      }),
                      o && w.isValid && (0, E.jsx)(rn, {}),
                      (0, E.jsx)(M.qk, {
                        title: "contact-details",
                        onComplete: () => {
                          r(
                            S(T, () => {
                              throw Error();
                            })
                          );
                        },
                        isLoading: i,
                        label: "Continue to payment",
                      }),
                    ],
                  })
                : (0, E.jsxs)(E.Fragment, {
                    children: [
                      (0, E.jsx)(M.wO, {
                        name: "".concat(g.firstName, " ").concat(g.lastName),
                        email: g.email,
                        phone: g.phone,
                        onChangeButtonClick: () => d(!0),
                        contactDetailsToolTip:
                          "Contact details can be updated in account settings",
                        shoppingMethod: u,
                      }),
                      o && w.isValid && (0, E.jsx)(rn, {}),
                      (0, E.jsx)(M.qk, {
                        title: "contact-details",
                        onComplete: () => {
                          r(void 0);
                        },
                        label: "Continue to payment",
                      }),
                    ],
                  }),
            ],
          });
        },
        ra = (e) => (e === el.jY.CLICK_AND_COLLECT ? "View" : "Edit"),
        rs = (e) => {
          let {
              isStepActive: t,
              isStepComplete: n,
              isStepLocked: o,
              isSubmitting: r,
              onEdit: i,
              shouldUseOrderDetailsV2: l,
              checkoutDetails: a,
              onContactDetailsSubmit: s,
              showStepError: d,
            } = e,
            u = ro(a, l),
            c = t
              ? (0, E.jsx)(oF.default, {})
              : n
              ? (0, E.jsx)(oB.default, {})
              : (0, E.jsx)(o_.default, {});
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(o7, {
                heading: oz[2](),
                isStepComplete: n,
                isStepActive: t,
                testId: "step-3-label",
                stepIcon: c,
              }),
              (0, E.jsxs)(o2, {
                "data-testid": "step-3-content",
                children: [
                  t
                    ? (0, E.jsx)(rl, {
                        checkoutDetails: a,
                        showStepError: d,
                        onContactDetailsSubmit: s,
                        isSubmitting: r,
                      })
                    : n &&
                      (0, E.jsx)(M.wO, {
                        email: u.email,
                        name: "".concat(u.firstName, " ").concat(u.lastName),
                        phone: u.phone,
                        shoppingMethod:
                          null == a
                            ? void 0
                            : a.shoppingConfiguration.shoppingMethod,
                      }),
                  !t &&
                    n &&
                    (0, E.jsx)(nr.zx, {
                      variant: "basic",
                      "data-testid": "inspect-step-3",
                      onClick: () => {
                        o || i();
                      },
                      label: ra(
                        null == a
                          ? void 0
                          : a.shoppingConfiguration.shoppingMethod
                      ),
                      size: "small",
                    }),
                  (0, E.jsx)(o8, {
                    children: (0, E.jsx)(oY.iz, {
                      "aria-hidden": "true",
                    }),
                  }),
                ],
              }),
            ],
          });
        },
        rd = (e) => {
          let {
            isOrderDetailsSubmitError: t,
            resetOrderDetailsSubmitError: n,
          } = e;
          return (0, E.jsx)(eE.eW, {
            title: "Something went wrong",
            description: (0, E.jsxs)(E.Fragment, {
              children: [
                "We couldn't save your order details. Try again later, and if that doesn't work contact",
                " ",
                (0, E.jsx)(eo.rU, {
                  label: "Customer Care",
                  variant: "inline",
                  href: F.Ce.coles.help,
                  children: "Customer Care",
                }),
                ".",
              ],
            }),
            btnText: "Return to checkout",
            isOpen: t,
            onBtnClick: n,
            onClose: n,
          });
        };
      var ru = n(24575),
        rc = n(64368),
        rp = n(64395);
      let rm = function () {
          let e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
          return e.find((e) => e.selected);
        },
        rv = function () {
          let e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
          if (0 === e.length) return;
          if (1 === e.length) return e[0];
          let t = e.filter((e) => 1 !== e.optionId);
          return t[0];
        },
        rh = function () {
          let e =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : [],
            t = rm(e);
          return t || rv(e);
        },
        ry = (e) =>
          (null == e ? void 0 : e.optionId) === 8 ||
          (null == e ? void 0 : e.optionId) === 32,
        rg = (e) =>
          (null == e ? void 0 : e.optionId) === 4 ||
          (null == e ? void 0 : e.optionId) === 16 ||
          (null == e ? void 0 : e.optionId) === 128,
        rf = (e, t) => {
          if (!t || !e) return null;
          let n = (0, eV.aO)(t);
          return "Get your order in a reusable Swap-a-box for "
            .concat(n, " per order at check out. Earn a ")
            .concat(n, " credit when you return the boxes to us.");
        },
        rb = (e, t) => {
          switch (!0) {
            case rg(e):
              return "Now packed for you in shorter 100% recycled bags that carry the same weight as our standard paper bags while reducing product breakage";
            case ry(e):
              return rf(t, e.unitPrice);
            case null == e ? void 0 : e.isFlatFee:
            case !(null == e ? void 0 : e.quantity):
              return null;
            default:
              return "We estimate your order will need "
                .concat(e.quantity, " ")
                .concat((0, B._6)("bag", e.quantity), ".");
          }
        },
        rC = (e) => {
          switch (!0) {
            case 0 === e.unitPrice:
              return "Free";
            case ry(e):
            case e.isFlatFee:
              return "".concat((0, eV.aO)(e.unitPrice), " per order");
            default:
              return "".concat((0, eV.aO)(e.unitPrice), " each");
          }
        },
        rS = (e) => (ry(e) ? "Try me" : null),
        rx = (e) => {
          switch (!0) {
            case e.length >= 3:
              return W.rS.rdsDevice.desktopSmallMin;
            case 2 === e.length:
              return W.rS.rdsDevice.tabletLargeMin;
            default:
              return W.rS.rdsDevice.tabletSmallMin;
          }
        },
        rw = (e) =>
          e
            ? ""
                .concat(F.YM.PRODUCT_IMAGE_URL, "/")
                .concat(e[0], "/")
                .concat(e, ".jpg")
            : eU,
        rI = () => {
          var e, t, n, o, r, i;
          let { checkoutDetails: l } = (0, ep.wo)(),
            [a, s] = (0, D.useState)(
              null == l
                ? void 0
                : null === (e = l.orderAttributes) || void 0 === e
                ? void 0
                : null === (t = e.baggingOptions) || void 0 === t
                ? void 0
                : t.find((e) => e.selected)
            );
          return {
            options:
              null == l
                ? void 0
                : null === (n = l.orderAttributes) || void 0 === n
                ? void 0
                : n.baggingOptions,
            selectedBaggingOption: a,
            setSelectedBaggingOption: s,
            defaultSelectedOptionId:
              null ===
                (o = rh(
                  null == l
                    ? void 0
                    : null === (r = l.orderAttributes) || void 0 === r
                    ? void 0
                    : r.baggingOptions
                )) || void 0 === o
                ? void 0
                : o.optionId,
            shouldSetDefaultOption: !rm(
              null == l
                ? void 0
                : null === (i = l.orderAttributes) || void 0 === i
                ? void 0
                : i.baggingOptions
            ),
          };
        };
      function rP() {
        let e = (0, q.Z)([
          "\n  ",
          ";\n  display: flex;\n  border-radius: ",
          ";\n  padding: ",
          ";\n  align-items: center;\n  background-color: ",
          ";\n  img {\n    margin-right: ",
          ";\n  }\n  b {\n    ",
          ";\n  }\n",
        ]);
        return (
          (rP = function () {
            return e;
          }),
          e
        );
      }
      function rT() {
        let e = (0, q.Z)([
          "\n  position: absolute;\n  top: -10px;\n  line-height: 1;\n",
        ]);
        return (
          (rT = function () {
            return e;
          }),
          e
        );
      }
      K.ZP.figure
        .attrs((e) => ({
          className: "coles-targeting-BaggingOptionsTogetherToZero",
          ...e,
        }))
        .withConfig({
          componentId: "sc-3518ae6a-0",
        })(
        rP(),
        W.rS.rdsText.body_200,
        R.zr.s2,
        R.zr.s4,
        W.rS.colorBackground.secondary.default,
        R.zr.s4,
        W.rS.rdsText.body_200_bold
      );
      let rk = K.ZP.span.withConfig({
          componentId: "sc-3518ae6a-1",
        })(rT()),
        rj = (e) => {
          var t;
          let [n, o] = (0, _.Vb)([
              M.GO.ShowSwapaboxBaggingDescription,
              M.GO.ShowBaggingOptionBadges,
            ]),
            {
              isShoppingMethodDelivery: r,
              setSelectedBaggingOption: i,
              selectedBaggingOption: l,
              setBaggingPreference: a,
              deliveryOptionPref: s,
            } = e,
            { options: d = [] } = rI();
          (0, D.useEffect)(() => {
            l || i(d[0]);
          }, [d, i, l]);
          let u = (e) => {
              let t = d.find((t) => {
                var n;
                return (
                  (null === (n = t.optionId) || void 0 === n
                    ? void 0
                    : n.toString()) === e
                );
              });
              i(t),
                (0, es.Kk)(es.tw.Interaction, {
                  interaction: {
                    location: "checkout",
                    component: "packing preference",
                    description: null == t ? void 0 : t.displayName,
                  },
                });
            },
            c = Number(s) === el.TP.Unattended,
            p = rb(l, n),
            m = rx(d);
          return (0, E.jsxs)(eT.Xp, {
            children: [
              (0, E.jsx)(e0.w, {
                defaultValue:
                  null == l
                    ? void 0
                    : null === (t = l.optionId) || void 0 === t
                    ? void 0
                    : t.toString(),
                legend: "Your packing preference",
                name: "bagging-options",
                onChange: u,
                horizontal: !0,
                wrap: !1,
                breakpoint: m,
                margin: !0,
                children: d
                  .filter((e) => !(1 === e.optionId && c))
                  .map((e) => {
                    let t = o && rS(e),
                      n = rw(e.bagSKU),
                      r = 1 !== e.optionId;
                    return (0, E.jsx)(
                      e1.p,
                      {
                        dataTestId: "bagging-options",
                        breakpoint: m,
                        ariaDescribedBy: "bagging-option-description-".concat(
                          e.optionId
                        ),
                        label: (0, E.jsxs)(eF, {
                          children: [
                            r &&
                              (0, E.jsx)(eB, {
                                children: (0, E.jsx)(eE.fg, {
                                  width: 40,
                                  height: 40,
                                  src: n,
                                  alt: "",
                                  "aria-hidden": "true",
                                }),
                              }),
                            (0, E.jsxs)("div", {
                              children: [
                                (0, E.jsx)("h3", {
                                  children: e.displayName,
                                }),
                                (0, E.jsx)("p", {
                                  children: rC(e),
                                }),
                              ],
                            }),
                            t &&
                              (0, E.jsx)(rk, {
                                children: (0, E.jsx)(e2.C, {
                                  label: t,
                                  type: "guidance",
                                  size: "small",
                                }),
                              }),
                          ],
                        }),
                        value: e.optionId ? e.optionId.toString() : "",
                      },
                      e.optionId
                    );
                  }),
              }),
              (0, E.jsx)(e6.J, {
                name: "remember-bagging-pref",
                label: "Remember my packing preference",
                onChange: a,
              }),
              p &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  "data-testid": "bagging-preference-notification",
                  message: p,
                  type: "guidance",
                  role: "none",
                  ariaId: "bagging-option-description-".concat(
                    null == l ? void 0 : l.optionId
                  ),
                }),
              r &&
                (null == l ? void 0 : l.optionId) === 1 &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  "data-testid": "no-bags-notification",
                  message:
                    "We’ll unpack your order in your chosen spot, such as on a table or by the door",
                  type: "guidance",
                }),
            ],
          });
        };
      function rA() {
        let e = (0, q.Z)([
          "\n  margin-top: ",
          ";\n  .MuiFormHelperText-root {\n    margin-top: ",
          ";\n  }\n",
        ]);
        return (
          (rA = function () {
            return e;
          }),
          e
        );
      }
      let rE = K.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-DeliveryInstructionsDeliveryInstruction",
            ...e,
          }))
          .withConfig({
            componentId: "sc-dff83501-0",
          })(rA(), R.zr.s3, R.zr.none),
        rO = (e) =>
          (0, E.jsx)(rE, {
            children: (0, E.jsx)(e7.o, {
              id: "deliveryInstructionsTextInput",
              label: "Delivery instructions (optional)",
              dataTestid: "deliveryInstructionsTextInput",
              fullWidth: !0,
              maxLength: e.maxLength,
              value:
                null !== (x = e.deliveryInstructions) && void 0 !== x ? x : "",
              onChange: (t) => e.setDeliveryInstructions(t.currentTarget.value),
              description:
                "Add a note for the driver, e.g. leave my order around the side of the house.",
            }),
          }),
        rD = (e, t) => {
          var n;
          let [o, r] = (0, _.Vb)([
              M.GO.CheckoutOrderDetailsV2,
              eI.TP.TrolleyApiSaveSubstitutions,
            ]),
            [i] = (0, eg.Rf)(),
            [l, a] = (0, D.useState)(!1),
            [s, d] = (0, D.useState)(!1),
            [u, c] = (0, D.useState)(!1),
            [p, m] = (0, D.useState)(!1),
            {
              data: { allItems: v },
              refetch: h,
            } = (0, eI.K9)(!1, r),
            { checkoutDetails: y, refetch: g } = (0, ep.wo)(),
            [f] = (0, eg.xQ)(),
            b = (0, eu.ON)(),
            { data: C } = (0, N.xR)(),
            S = (0, D.useMemo)(() => (0, eA.oO)(v, e), [e, v]),
            x =
              null !== (n = null == y ? void 0 : y.minOrderValue) &&
              void 0 !== n
                ? n
                : 0,
            w = async (e) => {
              let n = (0, tr.aP)(C);
              m(!0), a(!1);
              try {
                await i({
                  body: {
                    items: e.map((e) => ({
                      productId: e.productId.toString(),
                      orderItemId: e.orderItemId,
                      quantity: "0",
                    })),
                    ageGateVerified: !!n,
                  },
                  storeId: b,
                }).unwrap();
                let r = await f({
                  storeId: b,
                  shouldUseOrderDetailsV2: o,
                }).unwrap();
                t(r);
                let l = await h();
                if (S < x || 0 === S) {
                  c(!0);
                  return;
                }
                (0, ti.Hm)(l.data), await g().unwrap();
              } catch (s) {
                d(!0);
              } finally {
                m(!1);
              }
            };
          return {
            setIsRemovingRestrictedItems: m,
            isRemovingRestrictedItems: p,
            isRestrictedItemsErrorModalOpen: s,
            setIsRestrictedItemsErrorModalOpen: d,
            onRemoveRestrictedItems: w,
            isRestrictedItemsModalOpen: l,
            setIsRestrictedItemsModalOpen: a,
            remainingTotalValue: S,
            isMOVModalOpen: u,
            minOrderValue: x,
          };
        };
      function rR() {
        let e = (0, q.Z)(["\n  margin-bottom: ", ";\n"]);
        return (
          (rR = function () {
            return e;
          }),
          e
        );
      }
      function rL() {
        let e = (0, q.Z)(["\n  color: ", ";\n  cursor: 'pointer';\n"]);
        return (
          (rL = function () {
            return e;
          }),
          e
        );
      }
      function rN() {
        let e = (0, q.Z)(["\n  margin-bottom: ", ";\n"]);
        return (
          (rN = function () {
            return e;
          }),
          e
        );
      }
      function rM() {
        let e = (0, q.Z)([
          "\n  margin-top: ",
          ";\n  legend {\n    margin-bottom: ",
          ";\n    color: ",
          ";\n  }\n",
        ]);
        return (
          (rM = function () {
            return e;
          }),
          e
        );
      }
      let rF = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionsSpinnerWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-86bafd73-0",
          })(rR(), R.zr.s8),
        rB = (0, K.ZP)(eo.Qj)
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionsButton",
            ...e,
          }))
          .withConfig({
            componentId: "sc-86bafd73-1",
          })(rL(), W.rS.colorForeground.primary),
        r_ = (0, K.ZP)(L.T)
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionsSpinner",
            ...e,
          }))
          .withConfig({
            componentId: "sc-86bafd73-2",
          })(rN(), (0, ta.Q1)(336)),
        rV = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-DeliveryOptionWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-86bafd73-3",
          })(rM(), R.zr.s6, R.zr.s3, W.rS.colorForeground.primary),
        rU = (e) => {
          if (1 === e.length) return e[0].optionId == el.TP.Unattended;
          if (2 === e.length) {
            let t = e.find((e) => e.optionId === el.TP.Signed);
            return !!t && !t.enabled;
          }
          return !1;
        },
        rZ = (e) => {
          let {
              onDeliveryOptionChange: t,
              deliveryOptionPref: n,
              restrictedItems: o = [],
              slot: r,
              availableDeliveryOptions: i,
              setSelectedBaggingOption: l,
              paydockFlypayOrderProcessHandler: a,
              assetsUrl: s,
            } = e,
            {
              isRemovingRestrictedItems: d,
              onRemoveRestrictedItems: u,
              isRestrictedItemsModalOpen: c,
              setIsRestrictedItemsModalOpen: p,
              setIsRestrictedItemsErrorModalOpen: m,
              isRestrictedItemsErrorModalOpen: v,
              isMOVModalOpen: h,
              minOrderValue: y,
              remainingTotalValue: g = 0,
            } = rD(o, a),
            f = Y(),
            { options: b = [] } = rI(),
            C = null == r ? void 0 : r.windowType,
            S = (e) => {
              t(e), Number(e) === el.TP.Unattended && l(rv(b));
            };
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(rV, {
                children: (0, E.jsx)(e0.w, {
                  defaultValue: String(n),
                  legend: "Delivery type",
                  name: "delivery-options",
                  onChange: S,
                  horizontal: !0,
                  margin: !0,
                  children: i.map((e) =>
                    (0, E.jsx)(
                      e1.p,
                      {
                        isDisabled:
                          !e.enabled ||
                          (o.length > 0 && e.optionId === el.TP.Unattended),
                        dataTestId: "delivery-options",
                        label: (0, E.jsx)(eF, {
                          children: (0, E.jsxs)("div", {
                            children: [
                              (0, E.jsxs)("h3", {
                                children: [
                                  e.optionId === el.TP.Unattended
                                    ? "Unattended delivery"
                                    : "Sign for delivery",
                                  !e.enabled && " (Unavailable)",
                                ],
                              }),
                              (0, E.jsx)("p", {
                                children:
                                  e.optionId === el.TP.Unattended
                                    ? "We’ll follow your instructions to safely leave your order"
                                    : "Someone must be at the address and show age/ID",
                              }),
                            ],
                          }),
                        }),
                        value: String(e.optionId),
                      },
                      e.optionId
                    )
                  ),
                }),
              }),
              rU(i) &&
                Number(n) === el.TP.Unattended &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  message:
                    C === ea.kW.windowType.PARTNERDELIVERY ||
                    C === ea.kW.windowType.PARTNERRAPID
                      ? (0, E.jsxs)(E.Fragment, {
                          children: [
                            "They’ll leave your order in a safe place at your delivery address.",
                            " ",
                            (0, E.jsx)(eo.rU, {
                              href: F.Ce.coles.Help.Delivery,
                              label: "More about our partner drivers.",
                              openInNewTab: !0,
                              variant: "inline",
                              size: "small",
                            }),
                          ],
                        })
                      : (0, E.jsx)(E.Fragment, {
                          children:
                            "Your order will be left in a safe place at your delivery address.",
                        }),
                  name:
                    C === ea.kW.windowType.PARTNERDELIVERY ||
                    C === ea.kW.windowType.PARTNERRAPID
                      ? "A Partner driver will deliver your order"
                      : "You've selected an unattended only slot",
                  type: "guidance",
                }),
              !rU(i) &&
                C === ea.kW.windowType.PARTNERDELIVERY &&
                (0, E.jsx)(eE.P_, {
                  hasIcon: !0,
                  isTransparent: !0,
                  message: (0, E.jsxs)(E.Fragment, {
                    children: [
                      "Partner drivers are given your name, address and contact details.",
                      " ",
                      (0, E.jsx)(eo.rU, {
                        href: F.Ce.coles.Help.Delivery,
                        label: "More about our partner drivers.",
                        openInNewTab: !0,
                        variant: "inline",
                        size: "small",
                      }),
                    ],
                  }),
                  name: "A Partner driver will deliver your order",
                  type: "guidance",
                }),
              Number(n) === el.TP.Signed &&
                o.length > 0 &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eE.P_, {
                      hasIcon: !0,
                      isTransparent: !0,
                      message: (0, E.jsxs)(E.Fragment, {
                        children: [
                          "If you'd like your delivery left unattended, some items will need to be removed from your trolley.\xa0",
                          (0, E.jsx)(rB, {
                            label: "Review items",
                            size: "small",
                            variant: "light",
                            onClick: () => p(!0),
                          }),
                        ],
                      }),
                      name: "Some items need to be signed for",
                      type: "guidance",
                    }),
                    (0, E.jsx)(to.mId, {
                      isOpen: !d && c,
                      onCancelClick: () => p(!1),
                      assetsUrl: s,
                      onRemoveItemsClick: () => u(o),
                      onModalClose: () => p(!1),
                      products: o,
                    }),
                  ],
                }),
              (0, E.jsx)(M.e3, {
                minimumOrderValue: y.toString(),
                onBackToTrolleyClick: f,
                spendMoreValue: y - g,
                isOpen: h,
              }),
              (0, E.jsx)(eE.eW, {
                title: "Something went wrong",
                description:
                  "Sorry, we couldn't remove the item. Try again later, or you can choose sign for order to keep them item.",
                btnText: "Return to checkout",
                isOpen: v,
                onBtnClick: () => m(!1),
                onClose: () => m(!1),
              }),
              (0, E.jsx)(tn.u, {
                isOpen: d,
                title: "",
                dividers: !1,
                isMobileFullScreen: !0,
                children: (0, E.jsx)(rF, {
                  children: (0, E.jsx)(r_, {
                    title: "Just a moment",
                    description: "Removing items",
                    ariaLabel: "Removing items",
                    size: "30",
                  }),
                }),
              }),
            ],
          });
        };
      function rz() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (rz = function () {
            return e;
          }),
          e
        );
      }
      function rG() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (rG = function () {
            return e;
          }),
          e
        );
      }
      let rY = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-OrderDetailsOrderDetailsContainer",
            ...e,
          }))
          .withConfig({
            componentId: "sc-2761f330-0",
          })(rz(), eR.XK.s6.top),
        rq = (0, K.ZP)(tf)
          .attrs((e) => ({
            className:
              "coles-targeting-OrderDetailsStyledStepErrorNotification",
            ...e,
          }))
          .withConfig({
            componentId: "sc-2761f330-1",
          })(rG(), eR.XK.s6.top),
        rK = (e, t) =>
          (null == e
            ? void 0
            : e.map((e) => {
                var n;
                return {
                  ...e,
                  selected:
                    (null == t ? void 0 : t.toString()) ===
                    (null == e
                      ? void 0
                      : null === (n = e.optionId) || void 0 === n
                      ? void 0
                      : n.toString()),
                };
              })) || [],
        rW = function (e, t) {
          let { storeId: n, orderId: o, shouldUseOrderDetailsV2: r } = t,
            i =
              arguments.length > 2 && void 0 !== arguments[2]
                ? arguments[2]
                : [];
          return ed.l9.util.updateQueryData(
            "getCheckoutOrderDetails",
            {
              orderId: o,
              storeId: n,
              colesIdBarcode: String((0, tw.getCookie)(tI.LJ.ColesIdBarcode)),
              shouldUseOrderDetailsV2: r,
            },
            (t) => {
              if (null == t ? void 0 : t.orderAttributes) {
                var n, o, r, l, a, s, d, u, c, p;
                (null === (n = t.shoppingConfiguration) || void 0 === n
                  ? void 0
                  : n.shoppingMethod) === el.jY.REMOTE_DELIVERY
                  ? (t.orderAttributes = {
                      ...t.orderAttributes,
                      delivery: {
                        options: i.length
                          ? i
                          : (null === (o = t.orderAttributes) || void 0 === o
                              ? void 0
                              : null === (r = o.delivery) || void 0 === r
                              ? void 0
                              : r.options) || [],
                        instructions:
                          null !== (s = e.deliveryInstructions) && void 0 !== s
                            ? s
                            : void 0,
                        remote: {
                          providerAccount:
                            null == e
                              ? void 0
                              : null === (l = e.remote) || void 0 === l
                              ? void 0
                              : l.providerAccount,
                          deliveryAddress:
                            null == e
                              ? void 0
                              : null === (a = e.remote) || void 0 === a
                              ? void 0
                              : a.deliveryAddress,
                        },
                      },
                    })
                  : (t.orderAttributes = {
                      ...t.orderAttributes,
                      delivery: {
                        options: i.length
                          ? i
                          : (null === (d = t.orderAttributes) || void 0 === d
                              ? void 0
                              : null === (u = d.delivery) || void 0 === u
                              ? void 0
                              : u.options) || [],
                        instructions:
                          null !== (p = e.deliveryInstructions) && void 0 !== p
                            ? p
                            : void 0,
                      },
                      baggingOptions:
                        null === (c = t.orderAttributes.baggingOptions) ||
                        void 0 === c
                          ? void 0
                          : c.map((t) => ({
                              ...t,
                              selected:
                                Number(e.baggingOptionId) ===
                                Number(t.optionId),
                            })),
                    });
              }
            }
          );
        };
      function rQ() {
        let e = (0, q.Z)([
          "\n  margin: ",
          " 0 0 0;\n\n  .MuiInputBase-root {\n    max-width: 443px;\n  }\n  .notification {\n    margin-top: ",
          ";\n  }\n",
        ]);
        return (
          (rQ = function () {
            return e;
          }),
          e
        );
      }
      function rH() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  align-items: center;\n  margin-bottom: ",
          ";\n  ",
          "\n",
        ]);
        return (
          (rH = function () {
            return e;
          }),
          e
        );
      }
      let rX = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-DeliveryDetails",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f1cf797c-0",
          })(rQ(), R.zr.s6, R.zr.s4),
        rJ = K.ZP.h2
          .attrs((e) => ({
            className: "coles-targeting-DeliveryDetailsSubheading",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f1cf797c-1",
          })(rH(), R.zr.s3, W.rS.rdsText.body_500_bold),
        r$ = (e) => {
          let { control: t, register: n } = e,
            o = t._defaultValues;
          return (0, E.jsxs)(rX, {
            children: [
              (0, E.jsx)(rJ, {
                children: "For delivery orders",
              }),
              (0, E.jsx)(ek.Qr, {
                name: "finalAddress",
                control: t,
                render: (e) => {
                  let {
                    field: { value: t },
                    fieldState: { error: r },
                  } = e;
                  return (0, E.jsx)(e7.o, {
                    id: "finalAddress",
                    label: "Confirm your final address",
                    dataTestid: "delivery-final-address",
                    fullWidth: !0,
                    maxLength: 128,
                    defaultValue: o.finalAddress,
                    value: t,
                    description:
                      "Add small details to your address to help delivery drivers find you, i.e. Lot 4 to Lot 4a.",
                    error: !!r,
                    helperText: r && r.message,
                    ...n("finalAddress", {
                      required:
                        "This doesn't look right. Make sure your address is populated",
                      minLength: {
                        value: 15,
                        message:
                          "This doesn't look right. Make sure your address is populated",
                      },
                    }),
                  });
                },
              }),
              (0, E.jsx)(ek.Qr, {
                name: "customerAccountNumber",
                control: t,
                render: (e) => {
                  let {
                    field: { value: t },
                    fieldState: { error: r },
                  } = e;
                  return (0, E.jsx)(e7.o, {
                    id: "customerAccountNumber",
                    label: "Customer account number (optional)",
                    dataTestid: "customer-account-number",
                    fullWidth: !0,
                    maxLength: 20,
                    defaultValue: o.customerAccountNumber,
                    value: t,
                    description:
                      "This is your account number with the delivery provider.",
                    ...n("customerAccountNumber"),
                    error: !!r,
                    helperText: r && r.message,
                  });
                },
                rules: {
                  validate: (e) =>
                    (0, tA.$0)(e, "Enter a valid customer account number"),
                },
              }),
              (0, E.jsx)(eE.P_, {
                hasIcon: !0,
                isTransparent: !0,
                "data-testid": "remote-delivery-desclaimer",
                name: "Third-party freight costs",
                message:
                  "Charges exclude freight costs from the third-party provider you choose. Contact the provider to organise payment separately. ",
                type: "guidance",
                className: "notification",
              }),
            ],
          });
        },
        r0 = (e) => {
          var t, n, o, r, i;
          let {
              shoppingMethodSummary: l,
              restrictedItems: a,
              orderDetailsPreferences: s,
              showStepError: d,
              checkoutDetails: u,
              refetchCheckoutDetails: c,
              title: p,
              onSubmit: m,
              isSubmitting: v,
              paydockFlypayOrderProcessHandler: h,
              assetsUrl: y,
            } = e,
            {
              setSelectedBaggingOption: g,
              selectedBaggingOption: f,
              defaultSelectedOptionId: b,
              shouldSetDefaultOption: C,
            } = rI(),
            [S] = (0, _.Vb)([M.GO.CheckoutOrderDetailsV2]),
            x = l.shoppingMethodType === el.jY.DELIVERY,
            w = l.shoppingMethodType === el.jY.REMOTE_DELIVERY,
            [I, P] = (0, D.useState)(
              (null == u
                ? void 0
                : null === (t = u.addressProfile) || void 0 === t
                ? void 0
                : t.deliveryInstructions) ||
                (null === (n = s.delivery) || void 0 === n
                  ? void 0
                  : n.instructions)
            ),
            T = null === (o = s.delivery) || void 0 === o ? void 0 : o.remote,
            k = null == T ? void 0 : T.deliveryAddress,
            j = k || (l.selectedLocation ? l.selectedLocation : ""),
            A = (0, ej.TL)(),
            [O, R] = (0, D.useState)(!1),
            L = (0, G.$)(),
            [N, F] = (0, D.useState)(
              (0, eA.FT)(
                null == s
                  ? void 0
                  : null === (r = s.delivery) || void 0 === r
                  ? void 0
                  : r.options,
                a
              )
            ),
            B = (0, eu.ON)(),
            [V, { reset: U }] = (0, ed.hr)(),
            [Z] = (0, eg.xQ)(),
            {
              control: Y,
              handleSubmit: q,
              register: K,
            } = (0, ek.cI)({
              defaultValues: {
                finalAddress: j,
                customerAccountNumber: null == T ? void 0 : T.providerAccount,
              },
              mode: "onChange",
              shouldFocusError: !0,
            }),
            W = (e) => {
              var t;
              let n;
              let o = (0, eu.uz)(),
                r = {
                  deliveryOptionId: String(N),
                  deliveryInstructions: null != I ? I : "",
                  baggingOptionSaveToProfile: O,
                  baggingOptionId:
                    (null == f
                      ? void 0
                      : null === (t = f.optionId) || void 0 === t
                      ? void 0
                      : t.toString()) || (null == b ? void 0 : b.toString()),
                  remote: {
                    deliveryAddress: e.finalAddress,
                    providerAccount: e.customerAccountNumber,
                  },
                };
              if (w) {
                let { baggingOptionId: i, ...l } = r;
                n = l;
              } else {
                let { remote: a, ...s } = r;
                n = s;
              }
              return (
                o.shoppingMethod === el.jY.CLICK_AND_COLLECT &&
                  (delete n.deliveryOptionId, delete n.deliveryInstructions),
                n
              );
            },
            Q = async (e) => {
              try {
                var t, n, o, r, i;
                if (v) return;
                let l = W(e),
                  a = rK(
                    (null == s
                      ? void 0
                      : null === (t = s.delivery) || void 0 === t
                      ? void 0
                      : t.options) || [],
                    N
                  ),
                  d =
                    (null ===
                      (n =
                        null == s
                          ? void 0
                          : null === (o = s.delivery) || void 0 === o
                          ? void 0
                          : null === (r = o.options) || void 0 === r
                          ? void 0
                          : r.find((e) => e.optionId === N)) || void 0 === n
                      ? void 0
                      : n.displayName) || "";
                if (
                  (await V({
                    orderId: (null == u ? void 0 : u.orderId) || "",
                    body: {
                      ...{
                        storeId: B,
                        ...l,
                      },
                      storeId: B,
                      addressId:
                        (null == u
                          ? void 0
                          : null === (i = u.shoppingConfiguration) ||
                            void 0 === i
                          ? void 0
                          : i.addressId) || "",
                    },
                  }).unwrap(),
                  A(
                    rW(
                      {
                        storeId: B,
                        ...l,
                      },
                      {
                        storeId: B,
                        orderId: (null == u ? void 0 : u.orderId) || "",
                        shouldUseOrderDetailsV2: S,
                      },
                      a
                    )
                  ),
                  (0, es.Kk)(es.tw.CheckoutUpdatePreference, eD(l, d)),
                  C || b !== (null == f ? void 0 : f.optionId))
                ) {
                  let p = await Z({
                    storeId: B,
                    shouldUseOrderDetailsV2: S,
                  }).unwrap();
                  h(p), await c().unwrap();
                }
              } catch (m) {
                throw (U(), m);
              }
            },
            { deliveryNote: H, ...X } = l;
          return (0, E.jsxs)(rY, {
            children: [
              (0, E.jsxs)(e_, {
                children: [
                  (0, E.jsx)(eO.G3, {
                    ...X,
                    isEditable: !0,
                    showSlot: !0,
                    onClickEditLocation: () => L(z.B5.ShoppingMethod),
                    onClickEditSlot: () => L(z.B5.SlotSelector),
                    isCheckout: !0,
                  }),
                  w &&
                    (0, E.jsx)(r$, {
                      control: Y,
                      register: K,
                    }),
                  x &&
                    (0, E.jsx)(rZ, {
                      slot: s.slot,
                      restrictedItems: a,
                      availableDeliveryOptions:
                        (null == s
                          ? void 0
                          : null === (i = s.delivery) || void 0 === i
                          ? void 0
                          : i.options) || [],
                      deliveryOptionPref: N,
                      onDeliveryOptionChange: F,
                      setSelectedBaggingOption: g,
                      paydockFlypayOrderProcessHandler: h,
                      assetsUrl: y,
                    }),
                  (x || w) &&
                    (0, E.jsx)(rO, {
                      deliveryInstructions: I,
                      setDeliveryInstructions: P,
                      maxLength: w ? 200 : 400,
                    }),
                  !w &&
                    (0, E.jsx)(rj, {
                      deliveryOptionPref: N,
                      isShoppingMethodDelivery: x,
                      setSelectedBaggingOption: g,
                      selectedBaggingOption: f,
                      setBaggingPreference: R,
                    }),
                ],
              }),
              d && (0, E.jsx)(rq, {}),
              (0, E.jsx)(M.qk, {
                title: p,
                isLoading: v,
                onComplete: () => q(m(Q))(),
                label: "Continue to trolley & substitutions",
              }),
            ],
          });
        };
      ((s = w || (w = {})).CC = "CC"),
        (s.SD = "SD"),
        (s.MC = "MC"),
        (s.SL = "SL"),
        (s.CE = "CE"),
        (s.UD = "UD"),
        (s.HD = "HD"),
        (s.RD = "RD");
      let r1 = (e, t) => {
          var n, o, r, i, l, a, s, d, u;
          let c;
          let p = null == e ? void 0 : e.shoppingConfiguration.shoppingMethod;
          p === el.jY.CLICK_AND_COLLECT
            ? (c = ""
                .concat(
                  null == e
                    ? void 0
                    : null === (l = e.location) || void 0 === l
                    ? void 0
                    : l.locationName,
                  "\n"
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (a = e.location) || void 0 === a
                    ? void 0
                    : a.address,
                  ", "
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (s = e.location) || void 0 === s
                    ? void 0
                    : s.suburb,
                  " "
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (d = e.location) || void 0 === d
                    ? void 0
                    : d.state,
                  " "
                )
                .concat(
                  null == e
                    ? void 0
                    : null === (u = e.location) || void 0 === u
                    ? void 0
                    : u.postcode
                ))
            : (p === el.jY.DELIVERY || p === el.jY.REMOTE_DELIVERY) &&
              (null == e ? void 0 : e.addressProfile) &&
              (c = (0, eu.yd)(null == e ? void 0 : e.addressProfile));
          let { badgeText: m, badgeTooltipText: v } = r2({
            shoppingMethod: p,
            subShoppingMethod:
              null == e
                ? void 0
                : null === (n = e.orderAttributes) || void 0 === n
                ? void 0
                : n.subShoppingMethod,
            subShoppingMethodDesc:
              null == e
                ? void 0
                : null === (o = e.orderAttributes) || void 0 === o
                ? void 0
                : o.subShoppingMethodDesc,
          });
          return {
            badgeText: m,
            badgeTooltipText: v,
            deliveryNote:
              null == e
                ? void 0
                : null === (r = e.orderAttributes) || void 0 === r
                ? void 0
                : null === (i = r.delivery) || void 0 === i
                ? void 0
                : i.instructions,
            shoppingMethodType:
              null == e ? void 0 : e.shoppingConfiguration.shoppingMethod,
            selectedLocation: c,
            ...(p === el.jY.REMOTE_DELIVERY &&
              t && {
                remoteProvider: (0, eu.cK)(t),
              }),
            selectedSlot:
              null == e ? void 0 : e.orderAttributes.slot.windowTime,
            slotWindowType:
              null == e ? void 0 : e.orderAttributes.slot.windowType,
            slotWindowTypeDisplayBadge:
              null == e
                ? void 0
                : e.orderAttributes.slot.windowTypeDisplayBadge,
          };
        },
        r2 = (e) => {
          let {
              shoppingMethod: t,
              subShoppingMethod: n,
              subShoppingMethodDesc: o,
            } = e,
            r = t === el.jY.CLICK_AND_COLLECT && o;
          switch (!0) {
            case r && n === w.CC:
              return {
                badgeText: o,
                badgeTooltipText:
                  "Park in a Click & Collect bay and we'll bring your order to your car.",
              };
            case r && n === w.MC:
              return {
                badgeText: o,
                badgeTooltipText: "Collect your order from Coles van.",
              };
            case r && n === w.SL:
              return {
                badgeText: o,
                badgeTooltipText:
                  "Collect your order from a temperature-controlled locker.",
              };
            default:
              return {
                badgeText: "",
                badgeTooltipText: "",
              };
          }
        },
        r6 = (e, t) => {
          if (!t) return "";
          let n = oz[0](e),
            o = t;
          return (
            o &&
              ((o = o.replace(",", "")).includes("Tomorrow") &&
                (o = o.replace("Tomorrow", "tomorrow")),
              o.includes("Today") && (o = o.replace("Today", "today")),
              (o = (o = o.replace(/:00/g, "")).replace(" to ", "-"))),
            n + ", " + (o ? " " + o : "")
          );
        };
      function r4() {
        let e = (0, q.Z)(["\n  margin: ", " 0;\n"]);
        return (
          (r4 = function () {
            return e;
          }),
          e
        );
      }
      function r3() {
        let e = (0, q.Z)([
          "\n  &:not(:last-child) {\n    display: inline-block;\n    margin-right: ",
          ";\n  }\n",
        ]);
        return (
          (r3 = function () {
            return e;
          }),
          e
        );
      }
      let r5 = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-OrderDetailsSummaryWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f6f3bec1-0",
          })(r4(), R.zr.s4),
        r8 = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-OrderDetailsSummarySelectedSlotWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-f6f3bec1-1",
          })(r3(), R.zr.s2),
        r7 = (e) => {
          var t, n, o, r, i, l, a, s, d, u;
          let {
              shoppingMethodSummary: c,
              checkoutDetails: p,
              restrictedItems: m,
              onEdit: v,
            } = e,
            {
              shoppingMethodType: h,
              selectedLocation: y,
              selectedSlot: g,
              remoteProvider: f,
              slotWindowType: b,
              slotWindowTypeDisplayBadge: C,
            } = c,
            S =
              null == p
                ? void 0
                : null === (t = p.orderAttributes) || void 0 === t
                ? void 0
                : null === (n = t.delivery) || void 0 === n
                ? void 0
                : n.options,
            x =
              null == p
                ? void 0
                : null === (o = p.orderAttributes) || void 0 === o
                ? void 0
                : null === (r = o.delivery) || void 0 === r
                ? void 0
                : null === (i = r.remote) || void 0 === i
                ? void 0
                : i.deliveryAddress,
            w =
              null == p
                ? void 0
                : null === (l = p.orderAttributes) || void 0 === l
                ? void 0
                : null === (a = l.delivery) || void 0 === a
                ? void 0
                : null === (s = a.remote) || void 0 === s
                ? void 0
                : s.providerAccount,
            I = (0, eA.FT)(S, m),
            P = null == S ? void 0 : S.find((e) => e.optionId === I),
            T =
              null == p
                ? void 0
                : null === (d = p.orderAttributes) || void 0 === d
                ? void 0
                : d.baggingOptions,
            k = h === el.jY.DELIVERY || h === el.jY.REMOTE_DELIVERY,
            j = h === el.jY.REMOTE_DELIVERY,
            A = h === el.jY.CLICK_AND_COLLECT,
            O = (0, B.kK)(y || ""),
            D = (0, G.$)();
          return (0, E.jsxs)(r5, {
            children: [
              (0, E.jsx)(eT.kg, {
                children: A
                  ? "Click & Collect"
                  : k
                  ? "Delivery"
                  : "Remote delivery",
              }),
              j
                ? (0, E.jsxs)(E.Fragment, {
                    children: [
                      (0, E.jsxs)(eT.XP, {
                        children: [
                          (0, E.jsx)("b", {
                            children: "For",
                          }),
                          " ",
                          y || "",
                        ],
                      }),
                      (0, E.jsxs)(eT.XP, {
                        children: [
                          (0, E.jsx)("b", {
                            children: "Via",
                          }),
                          " ",
                          f || "",
                        ],
                      }),
                    ],
                  })
                : (0, E.jsx)(eT.XP, {
                    children: O,
                  }),
              (0, E.jsx)(eo.Qj, {
                onClick: () => D(z.B5.ShoppingMethod),
                label: "Change ".concat(
                  A ? "Click & Collect location" : "delivery address"
                ),
              }),
              g &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "When",
                    }),
                    (0, E.jsxs)(eT.XP, {
                      children: [
                        (0, E.jsx)(r8, {
                          children: g,
                        }),
                        (0, E.jsx)(eE.bs, {
                          windowType: b,
                          windowTypeDisplayBadge: C,
                        }),
                      ],
                    }),
                  ],
                }),
              (0, E.jsx)(eo.Qj, {
                onClick: () => D(z.B5.SlotSelector),
                label: "Change ".concat(
                  A ? "Click & Collect" : "delivery",
                  " slot"
                ),
              }),
              k &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Delivery type",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children: (0, E.jsx)(r8, {
                        children:
                          (null == P ? void 0 : P.optionId) === el.TP.Unattended
                            ? "Unattended delivery"
                            : "Sign for delivery",
                      }),
                    }),
                    (0, E.jsx)(eo.Qj, {
                      onClick: () => v(),
                      label: "Change delivery type",
                    }),
                  ],
                }),
              j &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Final delivery address",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children: x || y,
                    }),
                    (0, E.jsx)(eT.kg, {
                      children: "Customer account number",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children: w || "Not provided",
                    }),
                  ],
                }),
              k &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Delivery instructions",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children:
                        (null == c ? void 0 : c.deliveryNote) ||
                        "No instructions set",
                    }),
                  ],
                }),
              !j &&
                (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(eT.kg, {
                      children: "Packing preference",
                    }),
                    (0, E.jsx)(eT.XP, {
                      children:
                        null ===
                          (u =
                            null == T
                              ? void 0
                              : T.find((e) =>
                                  null == e ? void 0 : e.selected
                                )) || void 0 === u
                          ? void 0
                          : u.displayName,
                    }),
                    (0, E.jsx)(eo.Qj, {
                      onClick: () => {
                        v(),
                          (0, es.Kk)(es.tw.Interaction, {
                            interaction: {
                              location: "checkout",
                              component: "packing preference",
                              description: "change packing preference",
                            },
                          });
                      },
                      label: "Change packing preference",
                    }),
                  ],
                }),
            ],
          });
        },
        r9 = (e) => {
          var t, n;
          let {
              isStepActive: o,
              isStepComplete: r,
              isStepLocked: i,
              isSubmitting: l,
              onSubmit: a,
              onEdit: s,
              shoppingMethodSummary: d,
              checkoutDetails: u,
              restrictedItems: c,
              refetchCheckoutDetails: p,
              showStepError: m,
              paydockFlypayOrderProcessHandler: v,
              assetsUrl: h,
            } = e,
            { shoppingMethodType: y, selectedSlot: g } = d,
            f = r6(y, g),
            b = o
              ? (0, E.jsx)(ru.default, {})
              : r
              ? (0, E.jsx)(rc.default, {})
              : (0, E.jsx)(rp.default, {});
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(o7, {
                heading: f,
                isStepComplete: r,
                isStepActive: o,
                testId: "step-1-label",
                stepIcon: b,
              }),
              (0, E.jsxs)(o2, {
                "data-testid": "step-1-content",
                children: [
                  o
                    ? (0, E.jsx)(r0, {
                        showStepError: m,
                        orderDetailsPreferences: {
                          delivery:
                            null == u
                              ? void 0
                              : null === (t = u.orderAttributes) || void 0 === t
                              ? void 0
                              : t.delivery,
                          slot:
                            null == u
                              ? void 0
                              : null === (n = u.orderAttributes) || void 0 === n
                              ? void 0
                              : n.slot,
                        },
                        onSubmit: a,
                        isSubmitting: l,
                        title: f,
                        shoppingMethodSummary: d,
                        restrictedItems: c,
                        refetchCheckoutDetails: p,
                        checkoutDetails: u,
                        paydockFlypayOrderProcessHandler: v,
                        assetsUrl: h,
                      })
                    : r &&
                      (0, E.jsx)(r7, {
                        checkoutDetails: u,
                        restrictedItems: c,
                        shoppingMethodSummary: d,
                        onEdit: s,
                      }),
                  !o &&
                    r &&
                    (0, E.jsx)(nr.zx, {
                      variant: "basic",
                      "data-testid": "inspect-step-1",
                      "aria-label": "Edit your order details",
                      onClick: () => {
                        i || s();
                      },
                      label: "Edit",
                      size: "small",
                    }),
                  (0, E.jsx)(o8, {
                    children: (0, E.jsx)(oY.iz, {
                      "aria-hidden": "true",
                    }),
                  }),
                ],
              }),
            ],
          });
        };
      var ie = n(3366),
        it = n(71731),
        io = n(62141);
      let ir = (e) => {
        var t;
        let { className: n } = e,
          { data: o } = (0, N.qt)(),
          r = null == o ? void 0 : o.isB2B,
          i =
            null == o
              ? void 0
              : null === (t = o.b2bAttributes) || void 0 === t
              ? void 0
              : t.hasSapAccount;
        return r && !i
          ? (0, E.jsx)(eE.P_, {
              className: n,
              "data-testid": "apply-creditaccount-guidance",
              hasIcon: !0,
              isTransparent: !0,
              isFullWidth: !0,
              message: (0, E.jsxs)(E.Fragment, {
                children: [
                  (0, E.jsx)("span", {
                    children: "We offer business credit accounts.",
                  }),
                  " ",
                  (0, E.jsx)(eo.rU, {
                    label: "Learn more about credit accounts",
                    ariaLabel: "Learn more about credit accounts",
                    href: "https://www.coles.com.au/help/business-accounts/apply-credit-account",
                    size: "small",
                    variant: "light",
                    openInNewTab: !0,
                  }),
                ],
              }),
              type: "guidance",
            })
          : null;
      };
      function ii() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (ii = function () {
            return e;
          }),
          e
        );
      }
      let il = (0, K.ZP)(ir)
        .attrs((e) => ({
          className: "coles-targeting-ApplyCreditAccountGuidance",
          ...e,
        }))
        .withConfig({
          componentId: "sc-58a5899c-0",
        })(ii(), eR.XK.s6.vertical);
      function ia() {
        let e = (0, q.Z)(["\n  ", "\n"]);
        return (
          (ia = function () {
            return e;
          }),
          e
        );
      }
      function is() {
        let e = (0, q.Z)(["\n  margin-top: ", ";\n  display: block;\n"]);
        return (
          (is = function () {
            return e;
          }),
          e
        );
      }
      function id() {
        let e = (0, q.Z)(["\n  margin-top: ", ";\n"]);
        return (
          (id = function () {
            return e;
          }),
          e
        );
      }
      let iu = (0, K.ZP)(tf)
        .attrs((e) => ({
          className: "coles-targeting-PaymentMethodStyledStepErrorNotification",
          ...e,
        }))
        .withConfig({
          componentId: "sc-16e8656a-0",
        })(ia(), eR.XK.s6.vertical);
      K.ZP.span
        .attrs((e) => ({
          className: "coles-targeting-flypayNotification",
          ...e,
        }))
        .withConfig({
          componentId: "sc-16e8656a-1",
        })(is(), R.zr.s4);
      let ic = (0, K.ZP)(nQ.v)
          .attrs((e) => ({
            ...e,
          }))
          .withConfig({
            componentId: "sc-16e8656a-2",
          })(id(), R.zr.s4),
        ip = (e) => {
          let { type: t, isOpen: n, onClose: o, onConfirm: r } = e;
          if (null === t) return null;
          let { cancelBtnText: i, confirmBtnText: l, ...a } = im(e);
          return (0, E.jsx)(tn.u, {
            ...a,
            isOpen: n,
            closeHandler: o,
            footer: (0, E.jsxs)(E.Fragment, {
              children: [
                (0, E.jsx)(nr.zx, {
                  label: i,
                  onClick: o,
                  size: "medium",
                  variant: "secondary",
                }),
                (0, E.jsx)(nr.zx, {
                  label: l,
                  onClick: r,
                  size: "medium",
                  variant: "primary",
                }),
              ],
            }),
          });
        },
        im = (e) => {
          let { type: t, flow: n } = e,
            o = {
              [el.sQ.ACCOUNT]: "Return to account",
              [el.sQ.CHECKOUT]: "Return to checkout",
              [el.sQ.SUBSCRIPTION]: "Return to account",
            };
          switch (t) {
            case el.QZ.linkDifferentPaypal:
              return {
                dataTestId: "payment-confirm-replace",
                title: "Using a different PayPal account?",
                description:
                  "Your previous PayPal account will be removed and replaced with your new PayPal details.",
                cancelBtnText: o[n],
                confirmBtnText: "Use new account",
              };
            default:
            case el.QZ.linkNewPaypal:
              return {
                dataTestId: "payment-confirm-new",
                title: "PayPal account needs to be linked",
                description:
                  "To use PayPal as a payment method please link your account.",
                cancelBtnText: o[n],
                confirmBtnText: "Link PayPal account",
              };
            case el.QZ.linkDifferentFlypay:
              return {
                dataTestId: "flypay-confirm-replace",
                title: "Using a different flypay account?",
                description:
                  "Your previous flypay account will be removed and replaced with your new flypay details.",
                cancelBtnText: o[n],
                confirmBtnText: "Use new account",
              };
            case el.QZ.linkNewFlypay:
              return {
                dataTestId: "flypay-confirm-new",
                title: "flypay account needs to be linked",
                description:
                  "To use flypay as a payment method please link your account.",
                cancelBtnText: o[n],
                confirmBtnText: "Link flypay account",
              };
            case el.QZ.payWithLinkedFlypay:
              return {
                dataTestId: "flypay-confirm-linked",
                title: "flypay account needs to be authorized",
                description:
                  "To use flypay as a payment method please authorize your account.",
                cancelBtnText: o[n],
                confirmBtnText: "Authorize flypay account",
              };
          }
        };
      var iv = n(94449),
        ih = n(54717),
        iy = n(74144);
      F.YM.COLES_MPGS_URL;
      let ig = {
          number: ex.q4.cardNumberProps.id,
          expiryMonth: ex.q4.expiryMonthProps.id,
          expiryYear: ex.q4.expiryYearProps.id,
          securityCode: ex.q4.cvvProps.id,
        },
        ib = "Please enter a valid",
        iC = "is required",
        iS = (e, t) => {
          let n = ex.q4;
          return {
            ...n,
            isSubmitting: t === nB.S.submitting,
            cvvProps: {
              ...n.cvvProps,
              helperText: ix(
                "".concat(ib, " CVV"),
                "CVV ".concat(iC),
                e.cvvValidity
              ),
            },
            cardNumberProps: {
              ...n.cardNumberProps,
              helperText: ix(
                "".concat(ib, " card number"),
                "Card number ".concat(iC),
                e.cardNumberValidity
              ),
            },
            expiryMonthProps: {
              ...n.expiryMonthProps,
              helperText: ix(
                "".concat(ib, " expiry month"),
                "Expiry month ".concat(iC),
                e.expiryMonthValidity
              ),
            },
            expiryYearProps: {
              ...n.expiryYearProps,
              helperText: ix(
                "".concat(ib, " expiry year"),
                "Expiry year ".concat(iC),
                e.expiryYearValidity
              ),
            },
          };
        },
        ix = (e, t, n) =>
          n === el.Gz.invalid ? e : n === el.Gz.missing ? t : "",
        iw = (e, t) =>
          e === nB.h.loadFail
            ? "Failed to connect to merchant services."
            : t
            ? "Unexpected error occurred"
            : "",
        iI = (e) => {
          let { onError: t, showSaveToProfile: n = !1, mpgsVersion: o } = e,
            r = (0, ih.eo)(o);
          (0, iy.d)(r, ig);
          let i = (0, iv.I0)(),
            l = (0, ej.CG)(nU.B),
            a = (0, D.useMemo)(
              () => ({
                ...iS(l.formFieldValidity, l.submitStatus),
                showSaveToProfile: n,
                onSaveToProfile: (e) => {
                  i((0, nZ.Q5)(e));
                },
              }),
              [i, l.formFieldValidity, l.submitStatus, n]
            );
          return (
            (0, D.useEffect)(() => {
              let e = iw(l.initStatus, l.unexpectedError);
              if (l.initStatus === nB.h.initSuccess) {
                var n;
                null === (n = window.PaymentSession) ||
                  void 0 === n ||
                  n.setFocusStyle(
                    [
                      el.fX.expiryMonth,
                      el.fX.expiryYear,
                      el.fX.nameOnCard,
                      el.fX.securityCode,
                      el.fX.number,
                    ],
                    ex.id
                  );
              } else e.length && (i((0, nZ.eH)()), t && t());
            }, [i, l.initStatus, l.unexpectedError, t]),
            (0, E.jsx)(ex.RH, {
              isLoaded: l.initStatus === nB.h.initSuccess,
              creditCardProps: null != a ? a : ex.q4,
            })
          );
        };
      function iP(e) {
        let {
            paymentMethodFlow: t,
            payPal: n,
            creditCard: o,
            paymentMethod: r,
            modalState: i,
            paymentTypeState: l,
            sapAccount: a,
            isLoading: s,
            restrictedItems: d = [],
            mpgsVersion: u,
          } = e,
          [c, p] = (0, _.Vb)([
            M.GO.CheckoutFlypayEnabled,
            M.GO.CheckoutShowFlypayRetirementMessage,
          ]),
          m = iT({
            showCheckoutFlypayRetirementMessage: p,
            paymentTypes: r.supportedPaymentTypes,
          }),
          v = m.map((e) => ({
            label: ik(e, t),
            ariaLabel: ij(e, t),
            key: e,
            value: e,
            content: iA({
              type: e,
              payPal: n,
              creditCard: o,
              modalState: i,
              paymentMethodFlow: t,
              sapAccount: a,
              restrictedItems: d,
              mpgsVersion: u,
              isFlypayV2IntegrationEnabled: c,
            }),
          }));
        return (0, E.jsx)(ei.n, {
          isLoaded: !s,
          skeletonLayout: (0, E.jsx)(n2.O, {
            height: "25px",
            width: "256px",
            mt: "16px",
          }),
          children: (0, E.jsx)(eE.q5, {
            id: "checkout-payment-methods",
            radioGroupAriaLabel: "Select payment method",
            defaultValue: l.selectedPaymentType,
            itemsList: v,
            onChange: (e) => {
              (0, es.Kk)(es.tw.CheckoutUpdatePayment, n6(e)),
                l.setSelectedPaymentType(e);
            },
          }),
        });
      }
      let iT = (e) => {
          let { paymentTypes: t, showCheckoutFlypayRetirementMessage: n } = e;
          return n ? t.filter((e) => e !== el.uG.Flypay) : t;
        },
        ik = (e, t) =>
          e === el.uG.Card
            ? (0, E.jsx)(ex._g, {
                label: ij(e, t),
              })
            : e === el.uG.PayPal
            ? (0, E.jsx)(ex.Zu, {})
            : e === el.uG.Flypay
            ? (0, E.jsx)(ex.oz, {})
            : e === el.uG.BillMeLater
            ? (0, E.jsx)(ex.PL, {})
            : void 0,
        ij = (e, t) =>
          e === el.uG.Card
            ? t === el.sQ.SUBSCRIPTION
              ? "Add credit or debit card"
              : "Debit/credit card"
            : e === el.uG.PayPal
            ? "PayPal"
            : e === el.uG.Flypay
            ? "flypay"
            : e === el.uG.BillMeLater
            ? "Credit account"
            : "",
        iA = (e) => {
          var t, n;
          let {
            type: o,
            payPal: r,
            creditCard: i,
            sapAccount: l,
            modalState: a,
            paymentMethodFlow: s,
            restrictedItems: d = [],
            mpgsVersion: u,
            isFlypayV2IntegrationEnabled: c,
          } = e;
          if (o === el.uG.BillMeLater)
            return (0, E.jsx)(ex.bD, {
              sapAccount: l,
            });
          if (o === el.uG.Card)
            return (0, E.jsx)(ex.Wg, {
              showSavedCard: i.showCardPaymentData,
              onBackToSaved: () => {
                i.setShowCardPaymentData(!0);
              },
              onSwapToPaymentCapture: () => {
                i.setShowCardPaymentData(!1);
              },
              savedCard:
                null === (t = i.paymentData) || void 0 === t ? void 0 : t.data,
              cardCapturePanel: (0, E.jsx)(iI, {
                mpgsVersion: u,
                showSaveToProfile: s === el.sQ.CHECKOUT,
                onError: () =>
                  a.setErrorModal({
                    isOpen: !0,
                    type: el.t.mpgsLoadError,
                  }),
              }),
            });
          if (o === el.uG.PayPal) {
            let p =
              null === (n = r.paymentData) || void 0 === n ? void 0 : n.data;
            return (0, E.jsx)(ex.MK, {
              onLinkPayPal: r.onLinkPayPal,
              savedPayPal: p,
              showSavedAccount: Boolean(p),
              paypal: r.paypal,
              onUseDifferentAccount: () =>
                a.setConfirmModal({
                  flow: s,
                  type: el.QZ.linkDifferentPaypal,
                  isOpen: !0,
                  onConfirm: r.onLinkPayPal,
                }),
              closeLinkPayPalPopup: r.closeLinkPayPalPopup,
            });
          }
          return null;
        },
        iE = (e) => {
          let {
              paymentMethodFlow: t,
              showStepError: n,
              paymentTypeState: o,
              paymentMethod: r,
              restrictedItems: i = [],
              onSubmit: l,
              isSubmitting: a,
              mpgsVersion: s,
              onComplete: d,
              setPaymentMethodRequest: u,
              onError: c,
              isFlypayV2IntegrationEnabled: p,
              storeId: m,
              orderId: v,
              paydockFlypaySavePaymentHandler: h,
            } = e,
            [y] = (0, _.Vb)([M.GO.CheckoutShowFlypayRetirementMessage]),
            [g, f] = (0, D.useState)(y);
          (0, D.useEffect)(() => {
            f(y);
          }, [y]);
          let b = nV(t, r),
            {
              continueCreditAccount: C,
              sapAccount: S,
              isSavingCreditAccount: x,
            } = n_({
              modalState: b,
              paymentMethod: r,
              onComplete: d,
              onError: c,
            }),
            w = (0, ex.Sj)(t, r, o, b, d, c),
            I = nG(r, b, d, u, c),
            [P, { isLoading: T }] = (0, ed.Y2)(),
            k = async () => {
              let e = r.paymentMethods.find(
                (e) =>
                  e.name === el.uG.Flypay && void 0 !== e.paymentOrchestrator
              );
              if (!e || !e.paymentOrchestrator) {
                b.setErrorModal({
                  isOpen: !0,
                  type: el.t.saveFlypayError,
                });
                return;
              }
              try {
                let t = await P({
                  orderId: v,
                  body: {
                    name: ea.FD.name.FLYPAY,
                    storeId: m,
                    paymentOrchestrator:
                      null == e ? void 0 : e.paymentOrchestrator,
                  },
                }).unwrap();
                h(t), d();
              } catch (n) {
                b.setErrorModal({
                  isOpen: !0,
                  type: el.t.saveFlypayError,
                });
              }
            },
            j =
              w.paypalSaveLoading ||
              I.mpgs.submitStatus === nB.S.submitting ||
              I.isSavingCreditCard ||
              x ||
              T;
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(il, {}),
              (0, E.jsx)(iP, {
                restrictedItems: i,
                isLoading: j,
                paymentMethodFlow: t,
                payPal: w,
                creditCard: I,
                paymentMethod: r,
                modalState: b,
                paymentTypeState: o,
                sapAccount: S,
                mpgsVersion: s,
              }),
              n && (0, E.jsx)(iu, {}),
              g &&
                (0, E.jsx)(ic, {
                  onClose: () => {
                    f(!1);
                  },
                  hasIcon: !0,
                  isFullWidth: !0,
                  type: "guidance",
                  name: "flypay is currently unavailable",
                  message:
                    "flypay is temporarily unavailable as we're improving the experience. We apologise for any inconvenience this may cause. Please choose another payment method to complete your order. Thank you.\xa0",
                }),
              (0, E.jsx)(M.qk, {
                title: ((e) => {
                  switch (e) {
                    case el.uG.BillMeLater:
                      return "Pay with credit account";
                    case el.uG.Card:
                      return "Pay with debit or credit card";
                    case el.uG.PayPal:
                      return "Pay with PayPal";
                    case el.uG.Flypay:
                      return "Pay with flypay";
                    default:
                      return "Choose a payment method";
                  }
                })((null == o ? void 0 : o.completedPaymentType) || void 0),
                label: "Continue to review order summary",
                isLoading: a,
                onComplete: () => {
                  l();
                  let e = o.selectedPaymentType;
                  e === el.uG.BillMeLater && C(),
                    e === el.uG.Card
                      ? I.continueCard()
                      : e === el.uG.PayPal
                      ? w.continuePaypal()
                      : e === el.uG.Flypay && k();
                },
              }),
              (0, E.jsx)(ip, {
                flow: t,
                type: b.confirmModal.type,
                isOpen: b.confirmModal.isOpen,
                onClose: () => {
                  c(),
                    b.confirmModal.onClose && b.confirmModal.onClose(),
                    b.setConfirmModal({
                      flow: t,
                      type: null,
                      isOpen: !1,
                    });
                },
                onConfirm: () => {
                  c(),
                    b.confirmModal.onConfirm && b.confirmModal.onConfirm(),
                    b.setConfirmModal({
                      flow: t,
                      type: null,
                      isOpen: !1,
                    });
                },
              }),
              (0, E.jsx)(nY.w, {
                flow: t,
                type: b.errorModal.type,
                isOpen: b.errorModal.isOpen,
                onClose: () => {
                  c(),
                    b.setErrorModal({
                      type: b.errorModal.type,
                      isOpen: !1,
                    });
                },
                refetchGetPaymentMethod: r.refetchGetPaymentMethod,
                resetPaypalSaveState: w.resetPaypalSaveState,
                selectPaymentMethod: (e) => o.setSelectedPaymentType(e),
              }),
            ],
          });
        },
        iO = (e) => {
          var t, n, o, r, i, l, a;
          let {
              isStepActive: s,
              isStepComplete: d,
              isStepLocked: u,
              isSubmitting: c,
              onSubmit: p,
              onEdit: m,
              paymentMethod: v,
              paymentTypeState: h,
              restrictedItems: y,
              showStepError: g,
              mpgsVersion: f,
              onComplete: b,
              setPaymentMethodRequest: C,
              onError: S,
              completedPaymentType: x,
              isFlypayV2IntegrationEnabled: w,
              storeId: I,
              orderId: P,
              paydockFlypaySavePaymentHandler: T,
            } = e,
            k = s
              ? (0, E.jsx)(ie.default, {})
              : d
              ? (0, E.jsx)(it.default, {})
              : (0, E.jsx)(io.default, {});
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(o7, {
                heading: oz[3](x, {
                  isActive: s,
                }),
                isStepComplete: d,
                isStepActive: s,
                testId: "step-4-label",
                stepIcon: k,
              }),
              (0, E.jsxs)(o2, {
                "data-testid": "step-4-content",
                children: [
                  s
                    ? (0, E.jsx)(iE, {
                        orderId: P,
                        mpgsVersion: f,
                        isSubmitting: c,
                        restrictedItems: y,
                        paymentMethod: v,
                        paymentMethodFlow: el.sQ.CHECKOUT,
                        paymentTypeState: h,
                        showStepError: g,
                        onSubmit: p,
                        onComplete: b,
                        onError: S,
                        setPaymentMethodRequest: C,
                        isFlypayV2IntegrationEnabled: w,
                        storeId: I,
                        paydockFlypaySavePaymentHandler: T,
                      })
                    : d &&
                      (0, E.jsxs)("div", {
                        children: [
                          (0, E.jsx)(eT.kg, {
                            children:
                              h.completedPaymentType === el.uG.BillMeLater
                                ? "Coles for Business credit account"
                                : h.completedPaymentType === el.uG.Flypay
                                ? "You have chosen flypay as your payment method"
                                : h.completedPaymentType === el.uG.Card
                                ? "Card ending in ".concat(
                                    null == v
                                      ? void 0
                                      : null ===
                                          (t = v.savedPaymentMethodForOrder) ||
                                        void 0 === t
                                      ? void 0
                                      : null === (n = t.data) || void 0 === n
                                      ? void 0
                                      : n.cardEndingNumber
                                  )
                                : "Linked PayPal account",
                          }),
                          (0, E.jsx)(eT.XP, {
                            marginBottom: !0,
                            children:
                              h.completedPaymentType === el.uG.BillMeLater
                                ? (0, ex.Xn)({
                                    sapAccount:
                                      null == v
                                        ? void 0
                                        : null ===
                                            (o =
                                              v.savedPaymentMethodForOrder) ||
                                          void 0 === o
                                        ? void 0
                                        : o.data,
                                  })
                                : h.completedPaymentType === el.uG.Flypay
                                ? ""
                                : h.completedPaymentType === el.uG.Card
                                ? "Expires ".concat(
                                    null == v
                                      ? void 0
                                      : null ===
                                          (r = v.savedPaymentMethodForOrder) ||
                                        void 0 === r
                                      ? void 0
                                      : null === (i = r.data) || void 0 === i
                                      ? void 0
                                      : i.cardExpiry
                                  )
                                : null == v
                                ? void 0
                                : null === (l = v.savedPaymentMethodForOrder) ||
                                  void 0 === l
                                ? void 0
                                : null === (a = l.data) || void 0 === a
                                ? void 0
                                : a.email,
                          }),
                        ],
                      }),
                  !s &&
                    d &&
                    (0, E.jsx)(nr.zx, {
                      variant: "basic",
                      "data-testid": "inspect-step-4",
                      onClick: () => {
                        u || m();
                      },
                      label: "Edit",
                      size: "small",
                    }),
                ],
              }),
            ],
          });
        };
      var iD = n(25251),
        iR = n(67385),
        iL = n(13178);
      function iN() {
        let e = (0, q.Z)(["\n  ", ";\n  ", "\n"]);
        return (
          (iN = function () {
            return e;
          }),
          e
        );
      }
      function iM() {
        let e = (0, q.Z)([
          "\n  ",
          ";\n  .MuiFormGroup-root {\n    margin-top: ",
          ";\n",
        ]);
        return (
          (iM = function () {
            return e;
          }),
          e
        );
      }
      function iF() {
        let e = (0, q.Z)(["\n  height: ", ";\n"]);
        return (
          (iF = function () {
            return e;
          }),
          e
        );
      }
      function iB() {
        let e = (0, q.Z)(["\n  ", ";\n  color: ", ";\n"]);
        return (
          (iB = function () {
            return e;
          }),
          e
        );
      }
      function i_() {
        let e = (0, q.Z)(["\n  ", ";\n  ", "\n"]);
        return (
          (i_ = function () {
            return e;
          }),
          e
        );
      }
      function iV() {
        let e = (0, q.Z)([
          "\n  h3 {\n    ",
          ";\n    color: ",
          ";\n  }\n  p {\n    ",
          "\n    color: ",
          ";\n  }\n",
        ]);
        return (
          (iV = function () {
            return e;
          }),
          e
        );
      }
      let iU = (0, K.ZP)(e6.J)
        .attrs((e) => ({
          className: "coles-targeting-SubstitutePreferenceRememberCheckbox",
          ...e,
        }))
        .withConfig({
          componentId: "sc-ae4f7cd7-0",
        })(iN(), eR.XK.s1.top, eR.XK.s4.bottom);
      (0, K.ZP)(e_)
        .attrs((e) => ({
          className: "coles-targeting-SubstitutePreferenceRadioContainer",
          ...e,
        }))
        .withConfig({
          componentId: "sc-ae4f7cd7-1",
        })(iM(), eR.XK.s6.top, R.zr.s3),
        (0, K.ZP)(e1.p).withConfig({
          componentId: "sc-ae4f7cd7-2",
        })(iF(), (0, ta.Q1)(70));
      let iZ = K.ZP.div
          .attrs((e) => ({
            className:
              "coles-targeting-SubstitutePreferenceRememberCheckboxLabel",
            ...e,
          }))
          .withConfig({
            componentId: "sc-ae4f7cd7-3",
          })(iB(), W.rS.rdsText.body_300, W.rS.colorForeground.primary),
        iz = (0, K.ZP)(e6.J)
          .attrs((e) => ({
            className:
              "coles-targeting-SubstitutePreferenceAllowSubstitutionsCheckbox",
            ...e,
          }))
          .withConfig({
            componentId: "sc-ae4f7cd7-4",
          })(i_(), eR.XK.s1.top, eR.XK.s4.bottom),
        iG = K.ZP.span
          .attrs((e) => ({
            className:
              "coles-targeting-SubstitutePreferenceAllowSubstitutionsCheckboxLabel",
            ...e,
          }))
          .withConfig({
            componentId: "sc-ae4f7cd7-5",
          })(
          iV(),
          W.rS.rdsText.body_300_bold,
          W.rS.colorForeground.primary,
          W.rS.rdsText.body_300,
          W.rS.colorForeground.secondary
        );
      ((d = I || (I = {})).DontAllowSubstitute = "0"),
        (d.AllowSubstitute = "1");
      let iY = (e) => {
        let {
            substitutableItemsCount: t,
            substitutableItemsTotal: n,
            substitutePref: o,
            setSubstitutePref: r,
          } = e,
          [i] = (0, _.Vb)([M.GO.CheckoutPreferenceSubstitutionsCheckboxes]);
        return (0, E.jsxs)(E.Fragment, {
          children: [
            (0, E.jsx)(iz, {
              name: "substitute-preference",
              isChecked: o === I.AllowSubstitute,
              isDisabled: 0 === n,
              label: (0, E.jsxs)(iG, {
                children: [
                  (0, E.jsxs)("h3", {
                    children: ["Allow substitutions (", t, "/", n, ")"],
                  }),
                  (0, E.jsx)("p", {
                    children:
                      "We'll replace with available substitutions and remember your preferences for next time. You won't be charged for unavailable items.",
                  }),
                ],
              }),
              onChange: r,
            }),
            !i &&
              (0, E.jsx)(iU, {
                name: "remember-substitute-pref",
                isChecked: e.rememberPref,
                label: (0, E.jsx)(iZ, {
                  children: "Remember my substitution preference",
                }),
                onChange: e.setRememberPref,
              }),
          ],
        });
      };
      function iq() {
        let e = (0, q.Z)(["\n  ", ";\n"]);
        return (
          (iq = function () {
            return e;
          }),
          e
        );
      }
      function iK() {
        let e = (0, q.Z)([
          "\n  .product-quantity-wrapper {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    .MuiCheckbox-root {\n      padding-bottom: 0;\n    }\n    .coles-targeting-CheckBoxCheckboxContainer {\n      display: flex;\n      align-items: center;\n    }\n\n    .MuiFormControlLabel-root {\n      align-items: center;\n    }\n    > p {\n      margin-top: ",
          ";\n    }\n  }\n\n  .coles-targeting-ProductInTrolleyImageWrapper {\n    width: ",
          ";\n  }\n\n  .quantity-utils-wrapper {\n    display: flex;\n    flex-direction: row;\n    @media ",
          " {\n      flex-direction: column;\n      margin-top: ",
          ";\n    }\n  }\n\n  [role='alert'] {\n    margin-bottom: ",
          ";\n  }\n",
        ]);
        return (
          (iK = function () {
            return e;
          }),
          e
        );
      }
      function iW() {
        let e = (0, q.Z)([
          "\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  .coles-targeting-CheckoutStepperUndoButton {\n    margin: ",
          " ",
          ";\n  }\n\n  @media ",
          " {\n    flex-direction: column-reverse;\n    margin-top: ",
          ";\n    gap: ",
          ";\n    & > div,\n    .coles-targeting-CheckoutStepperUndoButton {\n      margin: 0;\n    }\n  }\n",
        ]);
        return (
          (iW = function () {
            return e;
          }),
          e
        );
      }
      let iQ = K.ZP.ul
          .attrs((e) => ({
            className: "coles-targeting-TrolleyReviewContinuityListWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-6961ae48-0",
          })(iq(), (e) =>
          e.showSubstitutionCheckboxes ? "".concat(eR.XK.s8.left, ";}") : ""
        ),
        iH = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-TrolleyReviewWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-6961ae48-1",
          })(
          iK(),
          R.zr.s3,
          (0, ta.Q1)(60),
          nb.j.tabletSmallMax,
          R.zr.s2,
          R.zr.s3
        ),
        iX = K.ZP.div
          .attrs((e) => ({
            className: "coles-targeting-TrolleyReviewButtonsWrapper",
            ...e,
          }))
          .withConfig({
            componentId: "sc-6961ae48-2",
          })(iW(), R.zr.s6, R.zr.s3, nb.j.mobileMax, R.zr.s2, R.zr.s3),
        iJ = (e, t) => {
          let { storeId: n, orderId: o, shouldUseOrderDetailsV2: r } = t;
          return ed.l9.util.updateQueryData(
            "getCheckoutOrderDetails",
            {
              storeId: n,
              orderId: o,
              colesIdBarcode: String((0, tw.getCookie)(tI.LJ.ColesIdBarcode)),
              shouldUseOrderDetailsV2: r,
            },
            (t) => {
              if (null == t ? void 0 : t.orderAttributes) {
                var n;
                t.orderAttributes = {
                  ...t.orderAttributes,
                  substituteOptions:
                    null === (n = t.orderAttributes.substituteOptions) ||
                    void 0 === n
                      ? void 0
                      : n.map((t) => ({
                          ...t,
                          selected:
                            String(t.optionId) === e.substitutionOptionId,
                        })),
                };
              }
            }
          );
        },
        i$ = (e) => {
          let t = e.map((e) => {
            let {
              orderItemId: t,
              productId: n,
              itemSubstitutionSelected: o,
            } = e;
            return {
              orderItemId: t,
              itemSubstitutionSelected: o,
              partNumber: String(n),
            };
          });
          return t.filter(
            (e) => "ExcludedFromSubstitution" !== e.itemSubstitutionSelected
          );
        },
        i0 = function () {
          let e =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : [],
            t =
              null == e
                ? void 0
                : e.find((e) => {
                    let { selected: t } = e;
                    return t;
                  });
          return (null == t ? void 0 : t.optionId) !== void 0
            ? String(null == t ? void 0 : t.optionId)
            : void 0;
        },
        i1 = (e, t, n) =>
          e.map((e) =>
            e.orderItemId === t
              ? {
                  ...e,
                  itemSubstitutionSelected: n
                    ? ea.jG.itemSubstitutionSelected.SUBSTITUTABLE
                    : ea.jG.itemSubstitutionSelected.NON_SUBSTITUTABLE,
                }
              : e
          ),
        i2 = (e, t) =>
          e.map((e) => ({
            ...e,
            itemSubstitutionSelected: t
              ? ea.jG.itemSubstitutionSelected.SUBSTITUTABLE
              : ea.jG.itemSubstitutionSelected.NON_SUBSTITUTABLE,
          })),
        i6 = (e, t, n) => {
          var o;
          let r = e.find((e) => e.orderItemId === t),
            i = r.quantity,
            l = n - i,
            a =
              l <= 0
                ? es.tw.InteractionRemoveFromTrolley
                : es.tw.InteractionAddToTrolley;
          (0, es.Kk)(a, {
            interaction: {
              products: [
                {
                  brand: r.product.brand,
                  name: r.product.name,
                  sku: r.productId,
                  quantity: Math.abs(l),
                  price:
                    null === (o = r.product) || void 0 === o
                      ? void 0
                      : o.pricing.now,
                },
              ],
            },
          });
        },
        i4 = (e, t, n) => {
          i6(e, t, n);
          let o = no()(e),
            r = o.map((e) =>
              e.orderItemId === t
                ? {
                    ...e,
                    quantity: n,
                  }
                : e
            ),
            i = r.map((e) => {
              var t;
              let n =
                  null === (t = e.product) || void 0 === t ? void 0 : t.pricing,
                o = (0, eI.Qb)({
                  pricing: n,
                  qty: e.quantity,
                  allItems: r,
                });
              return {
                ...e,
                itemTotal: o.total,
                itemSaving: o.saving,
              };
            });
          return i;
        },
        i3 = (e, t) =>
          t.map((t) => {
            var n, o, r, i;
            let l = e.find((e) => e.orderItemId === t.orderItemId),
              a = {
                productId:
                  null === (n = l.productId) || void 0 === n
                    ? void 0
                    : n.toString(),
                orderItemId: l.orderItemId,
                adSource:
                  null !== (r = null == l ? void 0 : l.adSource) && void 0 !== r
                    ? r
                    : void 0,
                adId:
                  null !== (i = null == l ? void 0 : l.adId) && void 0 !== i
                    ? i
                    : void 0,
              };
            return (
              (null == l ? void 0 : l.quantity) !==
                (null == t ? void 0 : t.quantity) && (a.quantity = l.quantity),
              (null === (o = l.product) || void 0 === o
                ? void 0
                : o.excludedFromSubstitution) ||
                (a.itemSubstitutionSelected = l.itemSubstitutionSelected),
              a
            );
          }),
        i5 = (e, t) =>
          e.map((e) =>
            t.indexOf(e.productId + "") > -1
              ? {
                  ...e,
                  quantity: 0,
                  itemSaving: 0,
                  itemTotal: 0,
                }
              : e
          );
      function i8() {
        let e = (0, q.Z)(["\n  margin-bottom: ", ";\n"]);
        return (
          (i8 = function () {
            return e;
          }),
          e
        );
      }
      let i7 = (0, K.ZP)(eE.P_).withConfig({
          componentId: "sc-5294666c-0",
        })(i8(), R.zr.s6),
        i9 = (0, D.forwardRef)((e, t) => {
          let { minOrderValue: n, totalPrice: o } = e,
            r = (0, G.$)(),
            i = (0, D.useRef)(null),
            l = (0, D.useCallback)(
              (e) => {
                e.preventDefault(), r(z.B5.ShopCategories);
              },
              [r]
            );
          return ((0, D.useImperativeHandle)(t, () => ({
            focusOnMov() {
              var e;
              null === (e = i.current) || void 0 === e || e.focus();
            },
            scrollToMov() {
              (0, B.hE)(i.current, 400);
            },
          })),
          o < n)
            ? (0, E.jsx)(i7, {
                "data-testid": "trolley-review-mov-notification",
                type: "warning",
                hasIcon: !0,
                isFullWidth: !0,
                role: "status",
                message: (0, E.jsxs)("div", {
                  tabIndex: -1,
                  ref: i,
                  children: [
                    (0, E.jsxs)("p", {
                      children: [
                        "Spend ",
                        (0, eV.aO)(n - o),
                        " more to meet the $",
                        n,
                        " order minimum. Minimum order value required to place your order.",
                      ],
                    }),
                    (0, E.jsx)(eo.rU, {
                      label: "Shop Products",
                      variant: "inline",
                      size: "small",
                      onClick: l,
                      href: "#",
                    }),
                  ],
                }),
              })
            : null;
        });
      function le() {
        let e = (0, q.Z)(["\n  ", ";\n  margin-bottom: ", ";\n"]);
        return (
          (le = function () {
            return e;
          }),
          e
        );
      }
      function lt() {
        let e = (0, q.Z)(["\n  margin-bottom: -", ";\n"]);
        return (
          (lt = function () {
            return e;
          }),
          e
        );
      }
      let ln = K.ZP.p.withConfig({
          componentId: "sc-1a72ad43-0",
        })(le(), W.rS.rdsText.body_200_bold, R.zr.s3),
        lo = (0, K.ZP)(eE.P_).withConfig({
          componentId: "sc-1a72ad43-1",
        })(lt(), R.zr.s5),
        lr = (e, t) =>
          t.filter((t) => e.find((e) => e.productId === t.productId + "")),
        li = (e) => {
          var t;
          let n = {
            [ea.qj.validationCode.AGE_RESTRICTION]: "Age restricted product",
            [ea.qM.failedCode.OUT_OF_RANGE]: "Out of range",
            [ea.qM.failedCode.OUT_OF_STOCK]: "Out of stock",
            [ea.qM.failedCode.NO_VALID_PRICE]: "No valid price",
            [ea.qM.failedCode.NOT_BUYABLE]: "No valid price",
          };
          return null !== (t = n[e]) && void 0 !== t ? t : "No valid price";
        },
        ll = (e) => {
          let {
              assetsUrl: t,
              failedItems: n,
              items: o,
              onCloseModal: r,
              onRemoveAndContinue: i,
              isLoading: l,
            } = e,
            a = Y(),
            s = lr(n, o);
          return 0 == s.length
            ? null
            : (0, E.jsxs)(tn.u, {
                isMobileFullScreen: !0,
                title: "Review items",
                "data-testid": "trolley-review-unavailable-items-modal",
                dividers: !1,
                footer: (0, E.jsxs)(E.Fragment, {
                  children: [
                    (0, E.jsx)(nr.zx, {
                      label: "Back to trolley",
                      size: "large",
                      variant: "link",
                      onClick: a,
                    }),
                    (0, E.jsx)(nr.zx, {
                      label: "Remove items(s) and continue",
                      size: "large",
                      variant: "primary",
                      onClick: i,
                      isLoading: l,
                    }),
                  ],
                }),
                isOpen: !0,
                closeHandler: r,
                children: [
                  (0, E.jsx)(lo, {
                    "data-testid":
                      "trolley-review-unavailable-items-notification",
                    type: "warning",
                    hasIcon: !0,
                    isFullWidth: !0,
                    role: "status",
                    message: (0, E.jsxs)(E.Fragment, {
                      children: [
                        (0, E.jsx)(ln, {
                          children: "There are some issues with your items.",
                        }),
                        (0, E.jsx)("p", {
                          children: "You can remove these items to continue.",
                        }),
                      ],
                    }),
                  }),
                  (0, E.jsx)("ul", {
                    children: s.map((e) => {
                      var o, r, i;
                      return (0, E.jsx)(
                        "li",
                        {
                          children: (0, E.jsx)(to.gxx, {
                            assetsUrl: (
                              null == e
                                ? void 0
                                : null === (o = e.product) || void 0 === o
                                ? void 0
                                : null === (r = o.restrictions) || void 0 === r
                                ? void 0
                                : r.tobaccoAgeRestrictionFlag
                            )
                              ? null !== B.kD && void 0 !== B.kD
                                ? B.kD
                                : ""
                              : t,
                            shoppingItem: {
                              ...e,
                              validation: {
                                validationDescription: (0, E.jsx)(eE.BK, {
                                  unavailableItemDisplayText: li(
                                    null ===
                                      (i = n.find((t) => {
                                        let { productId: n } = t;
                                        return e.productId + "" === n;
                                      })) || void 0 === i
                                      ? void 0
                                      : i.failedCode
                                  ),
                                }),
                              },
                            },
                            skipValidationCodeCheck: !0,
                            showQtyPicker: !1,
                          }),
                        },
                        "product-in-trolley-unavailable-".concat(e.productId)
                      );
                    }),
                  }),
                ],
              });
        },
        la = (e) => {
          var t, n, o, r, i, l, a, s;
          let {
              assetsUrl: d = "",
              showStepError: u,
              showSubstitutionCheckboxes: c,
              showFlybuyContinuity: p,
              checkoutDetails: m,
              isSubmitting: v,
              refetchCheckoutDetails: h,
              onTrolleyReviewSubmit: y,
              paydockFlypayValidateTrolleyHandler: g,
            } = e,
            [f, b, C] = (0, _.Vb)([
              M.GO.CheckoutQuantityPicker,
              M.GO.CheckoutOrderDetailsV2,
              eI.TP.TrolleyApiSaveSubstitutions,
            ]),
            S = (0, eI.K9)(!1, C),
            { allItems: x, minOrderValue: w } = S.data,
            [P, T] = (0, D.useState)(no()(x)),
            k = (0, D.useRef)([]),
            [j, A] = (0, D.useState)(!0),
            [O, R] = (0, D.useState)(!1),
            [L, N] = (0, D.useState)([]),
            [V] = (0, ed.hr)(),
            [U] = (0, ed.OL)(),
            [Z] = (0, ed.Iq)(),
            [Y] = (0, eg.F5)(),
            q = (0, G.$)(),
            K = (0, to.x4v)(),
            W = j ? (null == P ? void 0 : P.slice(0, 10)) : P,
            { continuityItems: Q, regularItems: H } = (0, eI.K5)(W || []),
            {
              customerCredits: X,
              isCustomerContinuityOptedIn: J,
              customerContinuityOptError: $,
            } = (0, nl.O)(
              null === (t = S.data) || void 0 === t
                ? void 0
                : t.customerContinuityData
            ),
            ee = !X || !J || $,
            et = (0, ej.TL)(),
            en = (0, eu.ON)(),
            er = (0, D.useRef)(null),
            ei = (0, D.useRef)([]);
          ei.current = [];
          let el = (0, D.useCallback)((e) => {
              T((t) => i2(t, e));
            }, []),
            ec = (0, D.useMemo)(
              () =>
                null == P
                  ? void 0
                  : P.filter((e) => {
                      var t;
                      return !(null === (t = e.product) || void 0 === t
                        ? void 0
                        : t.excludedFromSubstitution);
                    })
                      .filter(
                        (e) =>
                          e.itemSubstitutionSelected ===
                          ea.gV.itemSubstitutionSelected.SUBSTITUTABLE
                      )
                      .filter((e) => 0 !== e.quantity).length,
              [P]
            ),
            ep = (0, D.useMemo)(
              () =>
                null == P
                  ? void 0
                  : P.filter((e) => {
                      var t;
                      return !(null == e
                        ? void 0
                        : null === (t = e.product) || void 0 === t
                        ? void 0
                        : t.excludedFromSubstitution);
                    }).filter((e) => 0 !== e.quantity).length,
              [P]
            ),
            em = (0, D.useMemo)(
              () => JSON.stringify(x) !== JSON.stringify(P),
              [x, P]
            ),
            ev = ec > 0 ? I.AllowSubstitute : I.DontAllowSubstitute;
          (0, D.useEffect)(() => {
            var e;
            let t = i0(
              null == m
                ? void 0
                : null === (e = m.orderAttributes) || void 0 === e
                ? void 0
                : e.substituteOptions
            );
            t === I.DontAllowSubstitute && T((e) => i2(e, !1));
          }, [
            null == m
              ? void 0
              : null === (n = m.orderAttributes) || void 0 === n
              ? void 0
              : n.substituteOptions,
            en,
          ]);
          let eh = (e) =>
              e &&
              (null == ei ? void 0 : ei.current) &&
              (null == ei ? void 0 : ei.current.push(e)),
            ey = () => {
              A(!j),
                P &&
                  (null == P ? void 0 : P.length) > 9 &&
                  j &&
                  setTimeout(() => {
                    let e = null == ei ? void 0 : ei.current[10];
                    e && e.focus();
                  }, 10);
            },
            ef = ((null == P ? void 0 : P.length) && P.length > 10) || !1,
            [eb, eC] = (0, D.useState)(!1),
            eS = async () => {
              var e, t, n, o, r, i;
              let l = null == m ? void 0 : m.orderId;
              if (void 0 === ev || !l) return !1;
              let a = {
                storeId: en,
                substitutionOptionId: ev,
                ...(c
                  ? {}
                  : {
                      substitutionOptionSaveToProfile: eb,
                    }),
                deliveryInstructions:
                  (null ===
                    (e = null == m ? void 0 : m.orderAttributes.delivery) ||
                  void 0 === e
                    ? void 0
                    : e.instructions) || "",
              };
              try {
                if (c) {
                  if (f) {
                    if (eT < w)
                      return (
                        N([]),
                        null === (t = er.current) ||
                          void 0 === t ||
                          t.scrollToMov(),
                        null === (n = er.current) ||
                          void 0 === n ||
                          n.focusOnMov(),
                        !1
                      );
                    let s = i3(P, x);
                    try {
                      let d = await Z({
                          orderId: l,
                          body: {
                            storeId: en,
                            substitutionOptionId: ev,
                            orderItems: s,
                          },
                        }).unwrap(),
                        u =
                          null !== (o = d.failedItems) && void 0 !== o ? o : [];
                      if (
                        (N(
                          u.map((e) => ({
                            productId: e.productId,
                            failedCode: e.failedCode,
                          }))
                        ),
                        u.length > 0)
                      )
                        return (
                          (k.current = P),
                          T((e) =>
                            i5(
                              e,
                              u.map((e) => e.productId)
                            )
                          ),
                          !1
                        );
                    } catch (p) {
                      throw (R(!0), p);
                    }
                    let v =
                      s.filter((e) => (null == e ? void 0 : e.quantity) >= 0)
                        .length > 0;
                    if (v)
                      try {
                        let y = await Y({
                          storeId: en,
                          processOrder: !0,
                        }).unwrap();
                        g(y);
                        let S =
                            null !==
                              (i =
                                null === (r = y.orderValidations) ||
                                void 0 === r
                                  ? void 0
                                  : r.actionRequiredOrderItems) && void 0 !== i
                              ? i
                              : [],
                          j = S.map((e) => ({
                            productId: e.productId,
                            failedCode: e.validationCode,
                          }));
                        if ((N(j), S.length > 0))
                          return (
                            (k.current = P),
                            T((e) =>
                              i5(
                                e,
                                j.map((e) => e.productId)
                              )
                            ),
                            !1
                          );
                      } catch (A) {
                        throw (R(!0), A);
                      }
                    try {
                      await h().unwrap();
                    } catch (E) {
                      return !1;
                    }
                    (0, na.Yu)(
                      et(
                        eg.Qd.endpoints.getTrolleyDetails.initiate(
                          {
                            storeId: en,
                            sortBy: ni.j,
                            saveSubstitutions: C,
                          },
                          {
                            forceRefetch: !0,
                          }
                        )
                      )
                    ).then(
                      (e) => {
                        T(null == e ? void 0 : e.allItems);
                      },
                      (e) => (R(!0), !1)
                    );
                  } else {
                    let O = await U({
                      orderId: l,
                      body: {
                        storeId: en,
                        substitutionOptionId: ev,
                        orderItems: i$(P),
                      },
                    });
                    if (O.error) return R(!0), !1;
                    et(
                      iJ(a, {
                        storeId: en,
                        orderId: l || "",
                        shouldUseOrderDetailsV2: b,
                      })
                    );
                  }
                } else
                  await V({
                    orderId: l || "",
                    body: {
                      ...a,
                      storeId: en,
                    },
                  }).unwrap(),
                    et(
                      iJ(a, {
                        storeId: en,
                        orderId: l || "",
                        shouldUseOrderDetailsV2: b,
                      })
                    );
                (0, es.Kk)(
                  es.tw.CheckoutUpdatePreference,
                  eD({
                    substitutionOption:
                      Object.keys(I)[
                        Object.values(I).indexOf(a.substitutionOptionId)
                      ].toLowerCase(),
                    substitutionOptionSaveToProfile:
                      a.substitutionOptionSaveToProfile,
                    deliveryInstructions: a.deliveryInstructions,
                  })
                );
              } catch (D) {
                throw (R(!0), D);
              }
              return em;
            },
            ex = (e, t) => {
              T((n) => i1(n, e.orderItemId, t));
            },
            ew = (e) => {
              var t, n, o, r, i;
              let { item: l, ...a } = e;
              return (0, E.jsx)(to.gxx, {
                ref: eh,
                assetsUrl: (
                  null == l
                    ? void 0
                    : null === (t = l.product) || void 0 === t
                    ? void 0
                    : null === (n = t.restrictions) || void 0 === n
                    ? void 0
                    : n.tobaccoAgeRestrictionFlag
                )
                  ? B.kD
                  : d,
                withCheckbox: !0,
                limitOverride: K,
                showQtyPicker: f,
                isReadOnly: !f,
                checkboxProps: {
                  isInvisible:
                    null === (o = l.product) || void 0 === o
                      ? void 0
                      : o.excludedFromSubstitution,
                  onChange: (0, D.useCallback)((e) => ex(l, e), [l]),
                  isChecked:
                    !(null === (r = l.product) || void 0 === r
                      ? void 0
                      : r.excludedFromSubstitution) &&
                    (null == l ? void 0 : l.itemSubstitutionSelected) ===
                      ea.gV.itemSubstitutionSelected.SUBSTITUTABLE,
                  label: "Allow substitution",
                  size: "small",
                },
                subText:
                  (null === (i = l.product) || void 0 === i
                    ? void 0
                    : i.excludedFromSubstitution) && c
                    ? "No available substitute for this item"
                    : "",
                shoppingItem: l,
                updateTrolleyItemHandler: (e, t, n, o) => {
                  T((e) => i4(e, n, t));
                },
                onRemoveProduct: (e) => {
                  let { orderItemId: t } = e;
                  T((e) => i4(e, t, 0));
                },
                isCheckout: !0,
                showPromotionFlag: to.wcj.NotShow,
                ...a,
              });
            },
            eT = (0, D.useMemo)(
              () => P.map((e) => e.itemTotal).reduce((e, t) => e + t, 0),
              [P]
            ),
            ek = P.reduce((e, t) => e + t.quantity, 0),
            eA =
              (null === (o = S.slot) || void 0 === o ? void 0 : o.maxItems) ||
              Number.MAX_VALUE;
          return (0, E.jsxs)(iH, {
            children: [
              (0, E.jsx)(eI.HC, {
                maxItemQuantity: eA,
                deliverySlotWindowType:
                  null === (r = S.slot) || void 0 === r ? void 0 : r.windowType,
                onClickSelectSlot: () => q(z.B5.SlotSelector),
                totalQuantity: ek,
              }),
              (0, E.jsx)(i9, {
                totalPrice: eT,
                minOrderValue: w,
                ref: er,
              }),
              P &&
                (0, E.jsx)(iY, {
                  substitutePref: ev,
                  setSubstitutePref: (e) => {
                    el(e);
                  },
                  rememberPref: eb,
                  showSubstitutableItemsCount: c,
                  substitutableItemsCount: ec,
                  substitutableItemsTotal: ep,
                  setRememberPref: eC,
                }),
              p &&
                Q.length > 0 &&
                (0, E.jsx)(iQ, {
                  showSubstitutionCheckboxes: c,
                  "data-testid": "continuity-product-in-trolley-review",
                  children:
                    null ===
                      (i =
                        null == Q
                          ? void 0
                          : Q.filter((e) =>
                              null == e ? void 0 : e.quantity
                            )) || void 0 === i
                      ? void 0
                      : i.map((e) => {
                          var t;
                          return S.isFetching
                            ? (0, E.jsx)(
                                to.lR,
                                {},
                                "product-in-trolley-loader-".concat(e.productId)
                              )
                            : (0, E.jsx)(
                                "li",
                                {
                                  children: (0, E.jsx)(ew, {
                                    item: e,
                                    promotionalCreditsCost: ee
                                      ? ""
                                      : null ===
                                          (t = e.totalContinuityCredits) ||
                                        void 0 === t
                                      ? void 0
                                      : t.toString(),
                                    creditsBadgeType: J ? "badge" : "neutral",
                                  }),
                                },
                                e.productId
                              );
                        }),
                }),
              (0, E.jsx)("ul", {
                children:
                  null ===
                    (l =
                      null === (a = p ? H : W) || void 0 === a
                        ? void 0
                        : a.filter((e) => (null == e ? void 0 : e.quantity))) ||
                  void 0 === l
                    ? void 0
                    : l.map((e) =>
                        S.isFetching
                          ? (0, E.jsx)(
                              to.lR,
                              {},
                              "product-in-trolley-loader-".concat(e.productId)
                            )
                          : (0, E.jsx)(
                              "li",
                              {
                                children: (0, E.jsx)(ew, {
                                  item: e,
                                  withCheckbox: c,
                                }),
                              },
                              e.productId
                            )
                      ),
              }),
              ef &&
                (0, E.jsx)(eo.Qj, {
                  label: j ? "View all items" : "View less items",
                  size: "small",
                  iconEnd: j
                    ? "IconChevronDownOutline"
                    : "IconChevronUpOutline",
                  onClick: ey,
                }),
              u && (0, E.jsx)(tf, {}),
              (0, E.jsx)(eP._, {
                collectables:
                  null == m
                    ? void 0
                    : null === (s = m.orderAttributes) || void 0 === s
                    ? void 0
                    : s.collectableData,
                hasTitle: !0,
              }),
              (0, E.jsxs)(iX, {
                children: [
                  f &&
                    em &&
                    (0, E.jsx)(nr.zx, {
                      className: "coles-targeting-CheckoutStepperUndoButton",
                      label: "Undo changes",
                      size: "medium",
                      variant: "secondary",
                      "data-testid": "undo-change-button",
                      onClick: () => {
                        T(x),
                          (0, es.Kk)(es.tw.Interaction, {
                            interaction: {
                              location: "checkout",
                              component: "trolley",
                              description: "undo changes",
                            },
                          });
                      },
                    }),
                  (0, E.jsx)(M.qk, {
                    title: "Review trolley & substitutions",
                    onComplete: () => {
                      y(eS);
                    },
                    isLoading: v,
                    label: "Continue to your details",
                    isDisabled: ek > eA,
                  }),
                ],
              }),
              O &&
                (0, E.jsx)(eE.eW, {
                  title: "Something went wrong",
                  dataTestId: "trolley-review-error-modal",
                  description: (0, E.jsxs)(E.Fragment, {
                    children: [
                      "Sorry, we couldn't save your order details. Try again later, and if that doesn't work contact",
                      " ",
                      (0, E.jsx)(eo.rU, {
                        label: "Customer Care",
                        variant: "inline",
                        href: F.Ce.coles.help,
                        children: "Customer Care",
                      }),
                      ".",
                    ],
                  }),
                  btnText: "Return to checkout",
                  isOpen: !0,
                  onBtnClick: () => R(!1),
                  onClose: () => R(!1),
                }),
              L.length > 0 &&
                (0, E.jsx)(ll, {
                  assetsUrl: d,
                  failedItems: L,
                  items: P,
                  onCloseModal: () => {
                    T(k.current), N([]);
                  },
                  onRemoveAndContinue: () => {
                    y(eS);
                  },
                  isLoading: v,
                }),
            ],
          });
        },
        ls = (e) => {
          let {
            totalQuantity: t,
            showSubstitutionCheckboxes: n,
            trolleyItems: o,
            onChangeSubstitutionsClick: r,
            collectables: i,
          } = e;
          return (0, E.jsxs)(eT.XP, {
            marginBottom: !0,
            children: [
              t || 0,
              " items in your trolley",
              (0, E.jsx)("br", {}),
              n &&
                (0, E.jsx)(t5, {
                  trolleyItems: o,
                }),
              (0, E.jsx)("br", {}),
              (0, E.jsx)(eo.Qj, {
                label: "Change substitutions",
                onClick: r,
              }),
              (0, E.jsx)(eP._, {
                collectables: i,
                hasTitle: !0,
              }),
            ],
          });
        },
        ld = (e) => {
          var t;
          let {
              isStepActive: n,
              isStepComplete: o,
              isStepLocked: r,
              isSubmitting: i,
              onEdit: l,
              checkoutDetails: a,
              trolleyItems: s,
              showSubstitutionCheckboxes: d,
              showFlybuyContinuity: u,
              refetchCheckoutDetails: c,
              onTrolleyReviewSubmit: p,
              assetsUrl: m,
              showStepError: v,
              paydockFlypayValidateTrolleyHandler: h,
            } = e,
            y = n
              ? (0, E.jsx)(iD.default, {})
              : o
              ? (0, E.jsx)(iR.default, {})
              : (0, E.jsx)(iL.default, {});
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsx)(o7, {
                heading: oz[1](),
                isStepComplete: o,
                isStepActive: n,
                testId: "step-2-label",
                stepIcon: y,
              }),
              (0, E.jsxs)(o2, {
                "data-testid": "step-2-content",
                children: [
                  n
                    ? (0, E.jsx)(la, {
                        checkoutDetails: a,
                        refetchCheckoutDetails: c,
                        onTrolleyReviewSubmit: p,
                        isSubmitting: i,
                        assetsUrl: m,
                        showSubstitutionCheckboxes: d,
                        showFlybuyContinuity: u,
                        showStepError: v,
                        paydockFlypayValidateTrolleyHandler: h,
                      })
                    : o &&
                      (0, E.jsx)(ls, {
                        collectables:
                          null == a
                            ? void 0
                            : null === (t = a.orderAttributes) || void 0 === t
                            ? void 0
                            : t.collectableData,
                        totalQuantity:
                          (null == a ? void 0 : a.totalQuantity) || 0,
                        trolleyItems: s,
                        onChangeSubstitutionsClick: l,
                        showSubstitutionCheckboxes: d,
                      }),
                  !n &&
                    o &&
                    (0, E.jsx)(nr.zx, {
                      variant: "basic",
                      "data-testid": "inspect-step-2",
                      "aria-label": "Edit step 2",
                      onClick: () => {
                        r || l();
                      },
                      label: "Edit",
                      size: "small",
                    }),
                  (0, E.jsx)(o8, {
                    children: (0, E.jsx)(oY.iz, {
                      "aria-hidden": "true",
                    }),
                  }),
                ],
              }),
            ],
          });
        };
      var lu = n(26990);
      ((u = P || (P = {}))[(u.initialising = 0)] = "initialising"),
        (u[(u.ready = 1)] = "ready"),
        (u[(u.success = 2)] = "success"),
        (u[(u.paymentAuthorised = 3)] = "paymentAuthorised"),
        (u[(u.orderSubmissionInitiated = 4)] = "orderSubmissionInitiated"),
        (u[(u.orderSubmissionSucceeded = 5)] = "orderSubmissionSucceeded"),
        (u[(u.orderSubmissionFailed = 6)] = "orderSubmissionFailed"),
        ((c = T || (T = {}))[(c.idle = 0)] = "idle"),
        (c[(c.pending = 1)] = "pending"),
        (c[(c.succeeded = 2)] = "succeeded"),
        (c[(c.failed = 3)] = "failed"),
        ((p = k || (k = {}))[(p.flypayCrashed = 0)] = "flypayCrashed"),
        ((m = j || (j = {}))[(m.pending = 0)] = "pending"),
        (m[(m.failed = 1)] = "failed"),
        (m[(m.enabled = 2)] = "enabled"),
        (m[(m.disabled = 3)] = "disabled");
      let lc = {
          sdkIsAvailable: j.pending,
          enabledViaFlag: j.pending,
          enableViaBackEnd: j.pending,
          walletToken: void 0,
          accessToken: void 0,
          refreshToken: void 0,
          flowState: P.initialising,
          orderTotal: void 0,
          authTokenSaveRequired: !1,
          orderSubmissionProgress: T.idle,
          authSaveProgress: T.idle,
          errorToDisplay: void 0,
          initialisationOutcomeReported: !1,
        },
        lp = () => {
          let e = (0, lu.createSlice)({
            name: "paydockFlypay",
            initialState: lc,
            reducers: {
              setSdkAvailability: (e, t) => {
                e.sdkIsAvailable = t.payload;
              },
              setPaydockBackendSupport: (e, t) => {
                e.enableViaBackEnd = t.payload;
              },
              setWalletToken: (e, t) => {
                e.walletToken = t.payload;
              },
              applyFeatureFlagValue: (e, t) => {
                e.enabledViaFlag = t.payload;
              },
              setFlowState: (e, t) => {
                e.flowState = t.payload;
              },
              setOrderTotal: (e, t) => {
                e.orderTotal = t.payload;
              },
              setAuthTokenSaveRequired: (e, t) => {
                e.authTokenSaveRequired = t.payload;
              },
              setAuthTokens: (e, t) => {
                "accessToken" in t.payload &&
                  (e.accessToken = t.payload.accessToken),
                  "refreshToken" in t.payload &&
                    (e.refreshToken = t.payload.refreshToken);
              },
              setOrderSubmissionProgress: (e, t) => {
                e.orderSubmissionProgress = t.payload;
              },
              setAuthSaveProgress: (e, t) => {
                e.authSaveProgress = t.payload;
              },
              markInitOutcomeReported: (e) => {
                e.initialisationOutcomeReported = !0;
              },
            },
          });
          return {
            ...e,
            actions: {
              ...e.actions,
            },
          };
        };
      var lm = n(72035);
      let lv = (e, t) => {
        if (e.initialisationOutcomeReported) return;
        let n =
          e.enableViaBackEnd === j.disabled || e.enabledViaFlag === j.disabled;
        if (n) return;
        let o =
          e.enableViaBackEnd === j.pending || e.enabledViaFlag === j.pending;
        if (o) return;
        let r =
          e.enableViaBackEnd === j.enabled &&
          e.enabledViaFlag === j.enabled &&
          e.sdkIsAvailable === j.enabled;
        if (r) {
          (0, eS.pb)(
            "Checkout flypay initialisation",
            eS.tv.Flypay,
            void 0,
            void 0,
            void 0,
            {
              [eS.Qy.outcome]: "\uD83D\uDC4D",
            }
          ),
            t();
          return;
        }
        let i =
          e.enableViaBackEnd === j.failed ||
          e.enabledViaFlag === j.failed ||
          e.sdkIsAvailable === j.failed;
        if (i) {
          (0, eS.pb)(
            "Checkout flypay initialisation",
            eS.tv.Flypay,
            void 0,
            void 0,
            void 0,
            {
              [eS.Qy.outcome]: "\uD83D\uDC4E",
            }
          ),
            t();
          return;
        }
      };
      ((v = A || (A = {})).initialisationFailed = "initialisation-failed"),
        (v.contractViolation = "contract-violation");
      let lh = (e) => {
          let {
              reducer: t,
              getInitialState: n,
              actions: o,
              submitOrder: r,
            } = e,
            [i, l] = (0, D.useReducer)(t, n()),
            {
              setAuthTokens: a,
              setWalletToken: s,
              setSdkAvailability: d,
              applyFeatureFlagValue: u,
              setPaydockBackendSupport: c,
              setOrderSubmissionProgress: p,
              markInitOutcomeReported: m,
            } = o,
            v = (e) => e.find((e) => e.name === el.uG.Flypay),
            {
              enabledViaFlag: h,
              enableViaBackEnd: y,
              sdkIsAvailable: g,
              initialisationOutcomeReported: f,
            } = i;
          (0, D.useEffect)(() => {
            lv(
              {
                enabledViaFlag: h,
                enableViaBackEnd: y,
                sdkIsAvailable: g,
                initialisationOutcomeReported: f,
              },
              () => {
                l(m());
              }
            );
          }, [h, y, g, f, l, m]);
          let b = (0, D.useCallback)(
              (e) => {
                l(d(e ? j.enabled : j.failed));
              },
              [l, d]
            ),
            C = (0, D.useCallback)(
              (e) => {
                l(u(e ? j.enabled : j.disabled));
              },
              [l, u]
            ),
            S = (0, D.useCallback)(
              (e, t) => {
                console.log("this is SDK error and context", e, t),
                  l(d(j.failed)),
                  (0, eS.tz)(
                    "Paydock SDK error while initialising Flypay",
                    eS.NI.ThirdpartyApi,
                    t || {},
                    [],
                    {
                      [eS.Qy.processName]: eS.tv.Flypay,
                      [eS.Qy.processStage]: eS.Iq.Initialisation,
                      [eS.Qy.errorSubtype]: e,
                    }
                  );
              },
              [l, d]
            ),
            x = (0, D.useCallback)(
              (e) => {
                let {
                  isFetching: t,
                  isLoading: n,
                  isSuccess: o,
                  isError: r,
                  paymentMethods: d,
                } = e;
                if (!t && !n && i.enableViaBackEnd === j.pending) {
                  if (o) {
                    let u = v(d);
                    if (void 0 === u) l(c(j.disabled));
                    else {
                      let p = !0;
                      if (u.isSelectedForCurrentOrder) {
                        var m, h, y, g, f, b, C;
                        let S =
                          null === (m = u.data) || void 0 === m
                            ? void 0
                            : m.walletToken;
                        if ("string" != typeof S)
                          (p = !1),
                            (0, eS.tz)(
                              "Contract violation while initialising Flypay",
                              eS.NI.ThirdpartyApi,
                              {},
                              [],
                              {
                                [eS.Qy.processName]: eS.tv.Flypay,
                                [eS.Qy.processStage]: eS.Iq.Initialisation,
                                [eS.Qy.errorSubtype]: lm.Ah.noWalletTokenInGet,
                              }
                            );
                        else {
                          l(s(S));
                          let x =
                              null === (h = u.data) || void 0 === h
                                ? void 0
                                : null === (y = h.savedPaymentSources) ||
                                  void 0 === y
                                ? void 0
                                : null === (g = y[0]) || void 0 === g
                                ? void 0
                                : g.accessToken,
                            w =
                              null === (f = u.data) || void 0 === f
                                ? void 0
                                : null === (b = f.savedPaymentSources) ||
                                  void 0 === b
                                ? void 0
                                : null === (C = b[0]) || void 0 === C
                                ? void 0
                                : C.refreshToken;
                          if (x || w) {
                            let I = {};
                            void 0 !== x && (I.accessToken = x),
                              void 0 !== w && (I.refreshToken = w),
                              l(a(I));
                          }
                        }
                      }
                      p ? l(c(j.enabled)) : l(c(j.failed));
                    }
                  } else
                    r &&
                      ((0, eS.tz)(
                        "Get payment methods failure while initialising flypay",
                        eS.NI.ThirdpartyApi,
                        {},
                        [],
                        {
                          [eS.Qy.processName]: eS.tv.Flypay,
                          [eS.Qy.processStage]: eS.Iq.Initialisation,
                          [eS.Qy.errorSubtype]: lm.Ah.getPaymentMethodsFailed,
                        }
                      ),
                      l(c(j.failed)));
                }
              },
              [i, l, c, a, s]
            ),
            w = (0, D.useCallback)(
              (e) => {
                var t, n;
                let r =
                  (null === (t = e.paymentData) || void 0 === t
                    ? void 0
                    : null === (n = t.paymentMetadata) || void 0 === n
                    ? void 0
                    : n.walletToken) || "";
                l(o.setWalletToken(r));
              },
              [o]
            ),
            I = (0, D.useCallback)(
              (e) => {
                var t, n;
                let r =
                  (null === (t = e.paymentData) || void 0 === t
                    ? void 0
                    : null === (n = t.paymentMetadata) || void 0 === n
                    ? void 0
                    : n.walletToken) || "";
                l(o.setWalletToken(r));
              },
              [o]
            ),
            P = (0, D.useCallback)(
              (e) => {
                var t, n;
                let r =
                  null === (t = e.paymentData) || void 0 === t
                    ? void 0
                    : null === (n = t.paymentMetadata) || void 0 === n
                    ? void 0
                    : n.walletToken;
                void 0 != r && l(o.setWalletToken(r));
              },
              [o]
            ),
            k = (0, D.useCallback)(
              () => (console.log("The user has acknowledged an error."), !0),
              []
            ),
            A = (0, D.useCallback)(
              (e) => {
                let { fpWalletToken: t } = e;
                void 0 !== t && l(s(t));
              },
              [l, s]
            ),
            E = (0, D.useCallback)((e) => !0, []),
            O = (0, D.useCallback)(
              (e) => (console.log("This is a click payload", e), !0),
              []
            ),
            R = (0, D.useCallback)(
              (e) => (console.log("This is a checkout open payload", e), !0),
              []
            ),
            L = (0, D.useCallback)(
              (e) => (console.log("This is a checkout close payload", e), !0),
              []
            ),
            N = (0, D.useCallback)(
              (e) => {
                console.log("This is a payment success payload", e),
                  i.orderSubmissionProgress === T.idle &&
                    (console.log(
                      "This is a payment success payload - calling submit order"
                    ),
                    l(p(T.pending)),
                    r()
                      .then((e) => l(p(T.succeeded)))
                      .catch(() => l(p(T.failed))));
              },
              [i, l, r, p]
            ),
            M = (0, D.useCallback)(
              (e) => (console.log("This is a payment error payload", e), !0),
              []
            ),
            F = (0, D.useCallback)(
              (e) => (
                console.log("This is a button unavailable payload", e), !0
              ),
              []
            ),
            B = {
              flypayIsAvailable:
                i.sdkIsAvailable === j.enabled &&
                i.enableViaBackEnd === j.enabled &&
                i.enabledViaFlag === j.enabled,
              walletToken: i.walletToken,
              accessToken: i.accessToken,
              refreshToken: i.refreshToken,
              errorToDisplay: i.errorToDisplay,
            };
          return {
            onSdkLoadResolved: b,
            onEnableFlagAvailable: C,
            onSdkInitialisationError: S,
            onGetPaymentMethods: x,
            onSavePaymentMethod: A,
            onProcessOrder: w,
            onValidateTrolley: I,
            onPromoCodeChange: P,
            onSdkUnavailable: F,
            onSdkClick: O,
            onSdkCheckoutOpen: R,
            onSdkCheckoutClose: L,
            onSdkPaymentSuccess: N,
            onSdkPaymentError: M,
            onSdkAuthTokensChanged: E,
            onErrorAcknowledged: k,
            state: B,
          };
        },
        ly = (e) => {
          var t;
          let { assetsUrl: n = "" } = e,
            [o, r, i, l, a, s, d, u] = (0, _.Vb)([
              M.GO.PlaceOrder3DS,
              M.GO.PlaceOrder3DSServiceWorker,
              M.GO.CheckoutPreferenceSubstitutionsCheckboxes,
              eI.TP.FlybuyContinuity,
              M.GO.CheckoutOrderDetailsV2,
              M.GO.DeviceFingerprintingEnabled,
              eI.TP.TrolleyApiSaveSubstitutions,
              M.GO.CheckoutFlypayEnabled,
            ]),
            c = (0, B.tv)(),
            p = (0, D.useRef)(!1),
            [m, v] = (0, D.useState)(null),
            [h, y] = (0, D.useState)(!1),
            [g, f] = (0, D.useState)(!1),
            [b, S] = (0, D.useState)(!1),
            [x, w] = (0, D.useState)(!1),
            [I, P] = (0, D.useState)(!1),
            [T, k] = (0, D.useState)(null),
            j = (0, D.useRef)(null),
            A = (0, D.useRef)(null),
            [O, R] = (0, D.useState)(!1),
            [N, F] = (0, D.useState)(!1),
            V = (0, eC.ss)(),
            U = eh((e) => eZ(e)),
            Z = ey((e) => eZ(e)),
            z = (0, eu.ub)(),
            [G, Y] = (0, D.useState)({
              type: null,
              isOpen: !1,
            }),
            {
              checkoutDetails: q,
              trolleyItems: K,
              reviewTrolley: W,
              isLoading: Q,
              error: H,
              refetch: X,
            } = (0, ep.wo)(),
            { restrictedItems: J, isRestrictedItemsLoading: $ } = (0, ep.LL)(),
            {
              remoteProvider: ee,
              trolleyHasItems: eo,
              data: ed,
            } = (0, eI.K9)(!1, d),
            ec = r1(q, ee),
            em = (0, ti.I0)(),
            [ev, eg] = (0, D.useState)(""),
            [eP, ek] = (0, D.useState)(void 0),
            { trackSubmission: ej } = (0, M.iS)({
              proceed: s,
              onGeneration: (e) => {
                eg(e);
              },
              onFailure: (e) => {
                ek(e);
              },
              beaconCreationTimeout: 1e4,
              collectorInstantiationTimeout: 5e3,
              fingerprintGenerationTimeout: 6e4,
              instantiationPollRate: 100,
            }),
            { reducer: eA, getInitialState: eE, actions: eO } = lp(),
            {
              state: {
                walletToken: eD,
                flypayIsAvailable: eR,
                errorToDisplay: eL,
              },
              onEnableFlagAvailable: eN,
              onSdkLoadResolved: eM,
              onSdkInitialisationError: eF,
              onGetPaymentMethods: eB,
              onSavePaymentMethod: e_,
              onProcessOrder: eV,
              onValidateTrolley: eU,
              onPromoCodeChange: eZ,
              onSdkUnavailable: ez,
              onSdkClick: eG,
              onSdkCheckoutOpen: eY,
              onSdkCheckoutClose: eq,
              onSdkPaymentSuccess: eK,
              onSdkPaymentError: eW,
              onSdkAuthTokensChanged: eQ,
              onErrorAcknowledged: eH,
            } = lh({
              reducer: eA,
              getInitialState: eE,
              actions: eO,
              submitOrder: () => tC(),
              saveAuthTokens: (e) => Promise.resolve(!0),
            }),
            { isReady: eX, createButton: eJ } = (0, M.HT)({
              proceed: u,
              onError: eF,
            }),
            e$ = ef(eV);
          (0, D.useEffect)(() => {
            eM(eX);
          }, [eM, eX]),
            (0, D.useEffect)(() => {
              eN(u);
            }, [eN, u]);
          let [e0, e1] = (0, D.useState)(!1),
            [, e2] = (0, B._)(B.BU.Local.NudgingModalLastShownDate),
            [, , { removeItem: e6 }] = (0, en.Z)(B.BU.Local.UpfrontMethod),
            e4 = (0, eb.Vc)(el.sQ.CHECKOUT, !0),
            {
              isSuccess: e3,
              savedPaymentMethodForOrder: e5,
              paymentMethods: e8,
              refetchGetPaymentMethod: e7,
              mpgsVersion: e9,
            } = e4;
          (0, D.useEffect)(() => {
            eB(e4);
          }, [eB, e4]);
          let te = (0, eb.A1)(e8),
            {
              selectedPaymentType: tt,
              setCompletedPaymentType: tn,
              completedPaymentType: to,
            } = te,
            [tr, tl] = (0, D.useState)(void 0),
            { isSyncing: ta } = (0, ep.Ez)({
              startSyncing: !!em && eo && !!J,
              restrictedItems: J,
              paydockFlypayOrderProcessHandler: eV,
            }),
            { show: ts, isLoading: td } = oi(),
            tu = !Q && !H && !$ && !!(e3 && tt) && !ta && !td,
            tc = oU({
              isOrderDetailsComplete: h,
              isTrolleyReviewComplete: g,
              isContactDetailsComplete: b,
              isPaymentMethodComplete: x,
            }),
            tp = (e) => tc.includes(e) && N;
          (0, D.useEffect)(() => {
            if (tu && !p.current) {
              p.current = !0;
              let e = tK(q),
                t = tq(q, W),
                n = tG(q, a),
                o = tY(to, e5 || null);
              y(e),
                f(t),
                S(n),
                w(o),
                v(
                  oV([
                    ["OrderDetails", e],
                    ["TrolleyReview", t],
                    ["ContactDetails", n],
                    ["PaymentMethod", o],
                  ])
                );
            }
          }, [tu, q, W, a]),
            (0, es.A4)(
              () => {
                let e =
                  null == q
                    ? void 0
                    : q.shoppingConfiguration.fulfillmentStoreId;
                return (
                  null != q &&
                  !!q.orderId &&
                  !!e &&
                  !!z &&
                  !!tt &&
                  !!K &&
                  !!tu && {
                    data: oA({
                      orderDetails: q,
                      trolleySummary: ed,
                      shoppingMethod: z,
                      storeId: e,
                      error: null != H ? H : null,
                      trolleyItems: K,
                      paymentType: tt,
                      completedSteps: tU({
                        0: h,
                        1: g,
                        2: b,
                        3: x,
                      }),
                      colesPlusSignUp: ts,
                    }),
                    eventType: es.tw.CheckoutLoaded,
                  }
                );
              },
              [K, null == q ? void 0 : q.orderId, H, z, ts, tu],
              !0
            ),
            (0, es.A4)(
              () =>
                tu && {
                  data: {
                    checkout: {
                      state: {
                        coles_plus_sign_up: ts,
                      },
                    },
                  },
                  eventType: es.tw.CheckoutUpdateState,
                },
              [ts],
              !1
            );
          let tm = (e) => async (t) => {
              try {
                oE(1, "your order details"),
                  k("OrderDetails"),
                  await e(t),
                  y(!0),
                  v(
                    oV([
                      ["OrderDetails", !0],
                      ["TrolleyReview", g],
                      ["ContactDetails", b],
                      ["PaymentMethod", x],
                    ])
                  ),
                  k(null);
              } catch (n) {
                k(null), P(!0);
              }
            },
            tv = async (e) => {
              try {
                oE(2, "Review trolley & substitutions"), k("TrolleyReview");
                let t = await e(),
                  n = x;
                if (t) {
                  let o = await e7().unwrap(),
                    r = (0, eb.Ch)(
                      (null == o ? void 0 : o.paymentMethods) || []
                    ),
                    i = eb.u1[null == r ? void 0 : r.name];
                  n = tY(i, r || null);
                }
                let l = [
                  ["TrolleyReview", !0],
                  ["ContactDetails", b],
                  ["PaymentMethod", n],
                ];
                f(!0), v(oV(l)), k(null);
              } catch (a) {
                k(null);
              }
            },
            th = async (e) => {
              try {
                oE(3, "Check your details"),
                  k("ContactDetails"),
                  e && (await e()),
                  S(!0),
                  v(
                    oV([
                      ["ContactDetails", !0],
                      ["PaymentMethod", x],
                    ])
                  ),
                  k(null);
              } catch (t) {
                k(null);
              }
            },
            ty = () => {
              oE(4, "Choose payment method"), k("PaymentMethod");
            },
            tg = () => {
              tn(tt), w(!0), v(null), k(null);
            },
            tf = () => {
              k(null);
            },
            tb = () => {
              let e = oV([
                ["OrderDetails", h],
                ["TrolleyReview", g],
                ["ContactDetails", b],
                ["PaymentMethod", x],
              ]);
              if (null !== e) {
                var t;
                F(!0),
                  v(e),
                  oG(
                    tc,
                    (null == q
                      ? void 0
                      : null === (t = q.shoppingConfiguration) || void 0 === t
                      ? void 0
                      : t.shoppingMethod) || ""
                  );
                return;
              }
              o && to === el.uG.Card ? e1(!0) : tC();
            },
            tC = async () => {
              var e, t, n, o, r;
              (0, es.Kk)(es.tw.Interaction, {
                interaction: {
                  location: "checkout",
                  component: "cta",
                  description: "place order",
                },
              });
              try {
                let i = {
                  salesChannel: ea.Aw.salesChannel.CUSP,
                  flybuysBarcode:
                    (null == q
                      ? void 0
                      : null === (e = q.orderAttributes) || void 0 === e
                      ? void 0
                      : e.flybuysBarcode) || void 0,
                  staffDiscountNum:
                    (null == q
                      ? void 0
                      : null === (t = q.orderAttributes) || void 0 === t
                      ? void 0
                      : t.staffDiscountNum) || void 0,
                };
                ev
                  ? (ej(),
                    (0, eS.pb)("success", eS.tv.Fingerprinting),
                    (i.collectorPayload = ev))
                  : void 0 !== eP
                  ? (0, eS.pb)(
                      "failure",
                      eS.tv.Fingerprinting,
                      "error",
                      void 0,
                      void 0,
                      {
                        [eS.Qy.errorSubtype]: eP.message,
                      }
                    )
                  : (0, eS.pb)(
                      "failure",
                      eS.tv.Fingerprinting,
                      "error",
                      void 0,
                      void 0,
                      {
                        [eS.Qy.errorSubtype]:
                          "Order submitted before fingerprinting completed",
                      }
                    );
                let l = await V.placeOrder(
                  i,
                  (null == q ? void 0 : q.orderId) || ""
                );
                e2(et.ou.now().toISODate()), e6(), (0, ew.N$)();
                let a = O ? "?".concat(oS.a.SingleClickSignUp) : "";
                return c.replace("order-confirmation".concat(a)), l;
              } catch (d) {
                let s =
                  (null == d
                    ? void 0
                    : null === (n = d.data) || void 0 === n
                    ? void 0
                    : null === (o = n.errors) || void 0 === o
                    ? void 0
                    : null === (r = o[0]) || void 0 === r
                    ? void 0
                    : r.errorCode) || "";
                throw (
                  (Y({
                    type: on(s),
                    isOpen: !0,
                  }),
                  d)
                );
              }
            },
            tS = V.isPlacingOrder || V.isOrderPlaced,
            tx =
              !e$.isOrderProcessSaving &&
              h &&
              g &&
              b &&
              x &&
              !U.isApplyingPromo &&
              !Z.isRemovingPromo,
            tw = null === m,
            tI = to === el.uG.Flypay && !!eR && tu,
            [tP, tT] = (0, D.useState)(!1),
            tk = () => {
              tT(() => !0);
            },
            { renderFlypayButton: tj } = (0, M.YJ)({
              placeFlypayOrderButtonRef: A,
              walletToken: eD,
              shouldRenderFlypayButton: tI,
              shouldDisableFlypayButton: !tx || !tw,
              onError: tk,
              createFlypay2Button: (e) => {
                let { walletToken: t, containerSelector: n } = e;
                return eJ({
                  walletToken: t,
                  containerSelector: n,
                  handlers: {
                    success: (e) => {
                      console.log(
                        "\uD83C\uDF81 overall flypay failure handler"
                      ),
                        eK(e);
                    },
                    failure: (e) => {
                      console.log(
                        "\uD83D\uDD25 overall flypay failure handler",
                        e
                      ),
                        eW(e);
                    },
                    buttonFailure: (e) => {
                      console.log("\uD83D\uDC80 button failure handler", e),
                        ez(e);
                    },
                    sdkFailure: (e) => {
                      console.log("⚡ sdk failure handler", e);
                    },
                    auth: (e) => {
                      console.log("\uD83D\uDD11 auth handler", e), eQ(e);
                    },
                    click: (e) => {
                      console.log("\uD83D\uDC46 click handler", e), eG(e);
                    },
                    checkoutOpen: (e) => {
                      console.log("▶️ checkout open handler", e), eY(e);
                    },
                    checkoutClose: (e) => {
                      console.log("⏹️ checkout close handler", e), eq(e);
                    },
                  },
                });
              },
            });
          return (0, E.jsxs)(E.Fragment, {
            children: [
              (0, E.jsxs)(eT.oB, {
                "data-pii": !0,
                children: [
                  (0, E.jsx)("h1", {
                    className: "sr-only",
                    children: "Checkout",
                  }),
                  o &&
                    (null == q ? void 0 : q.orderId) &&
                    e0 &&
                    (0, E.jsx)(ou.A, {
                      useServiceWorker: r,
                      orderId: q.orderId,
                      flow: el.sQ.CHECKOUT,
                      onClose: (e) => {
                        e1(!1), e && v("PaymentMethod");
                      },
                      onCancel: () => {
                        e1(!1);
                      },
                      onSuccess: () => {
                        e1(!1), tC();
                      },
                    }),
                  tS &&
                    (0, E.jsx)(eT.K9, {
                      children: (0, E.jsx)(L.T, {
                        title: "Just a few moments",
                        description: "Placing your order",
                      }),
                    }),
                  (0, E.jsx)(eT.bm, {
                    "aria-hidden": !1,
                    children: (0, E.jsxs)(eT.Rt, {
                      children: [
                        (0, E.jsx)(er.JX, {
                          xs: 12,
                          md: 7,
                          lg: 8,
                          children: (0, E.jsx)(eT.M9, {
                            children: (0, E.jsxs)(ei.n, {
                              isLoaded: tu,
                              skeletonLayout: (0, E.jsx)(M.H2, {}),
                              children: [
                                (0, E.jsx)(r9, {
                                  showStepError: tp(0),
                                  isStepActive: "OrderDetails" === m,
                                  isStepComplete: h,
                                  isStepLocked: !!T,
                                  isSubmitting: "OrderDetails" === T,
                                  onSubmit: tm,
                                  onEdit: () => {
                                    v("OrderDetails");
                                  },
                                  shoppingMethodSummary: ec,
                                  checkoutDetails: q,
                                  restrictedItems: J,
                                  refetchCheckoutDetails: X,
                                  paydockFlypayOrderProcessHandler: eV,
                                }),
                                (0, E.jsx)(ld, {
                                  showStepError: tp(1),
                                  isStepActive: "TrolleyReview" === m,
                                  isStepComplete: g,
                                  isStepLocked: !!T,
                                  isSubmitting: "TrolleyReview" === T,
                                  onTrolleyReviewSubmit: tv,
                                  onEdit: () => {
                                    v("TrolleyReview");
                                  },
                                  refetchCheckoutDetails: X,
                                  checkoutDetails: q,
                                  trolleyItems: K,
                                  showSubstitutionCheckboxes: i,
                                  assetsUrl: n,
                                  showFlybuyContinuity: l,
                                  paydockFlypayValidateTrolleyHandler: eU,
                                }),
                                (0, E.jsx)(rs, {
                                  showStepError: tp(2),
                                  isStepActive: "ContactDetails" === m,
                                  isStepComplete: b,
                                  isStepLocked: !!T,
                                  isSubmitting: "ContactDetails" === T,
                                  onContactDetailsSubmit: th,
                                  onEdit: () => {
                                    v("ContactDetails");
                                  },
                                  checkoutDetails: q,
                                  shouldUseOrderDetailsV2: a,
                                }),
                                (0, E.jsx)(iO, {
                                  orderId:
                                    (null == q ? void 0 : q.orderId) || "",
                                  showStepError: tp(3),
                                  onError: tf,
                                  onComplete: tg,
                                  storeId:
                                    (null == q
                                      ? void 0
                                      : q.shoppingConfiguration
                                          .fulfillmentStoreId) || "",
                                  setPaymentMethodRequest: tl,
                                  restrictedItems: J,
                                  paymentTypeState: te,
                                  paymentMethod: e4,
                                  isStepActive: "PaymentMethod" === m,
                                  isStepComplete: x,
                                  isStepLocked: !!T,
                                  isSubmitting: "PaymentMethod" === T,
                                  onSubmit: ty,
                                  mpgsVersion: e9,
                                  onEdit: () => {
                                    v("PaymentMethod");
                                  },
                                  completedPaymentType: to,
                                  isFlypayV2IntegrationEnabled: u,
                                  paydockFlypaySavePaymentHandler: e_,
                                }),
                                (0, E.jsx)(oC, {
                                  paymentMethodCreateRequest: tr,
                                  storeId:
                                    null == q
                                      ? void 0
                                      : q.shoppingConfiguration
                                          .fulfillmentStoreId,
                                  onSuccess: () => R(!0),
                                }),
                              ],
                            }),
                          }),
                        }),
                        (0, E.jsx)(er.JX, {
                          xs: 12,
                          md: 5,
                          lg: 4,
                          children: (0, E.jsx)(eT.YE, {
                            ref: j,
                            children:
                              tu &&
                              (0, E.jsx)(nt, {
                                onPlaceOrderClick: tb,
                                unCompletedSteps: tc,
                                showStepError: N,
                                isAllStepsComplete: tx,
                                isAllStepsInactive: tw,
                                activeStepInd: oZ(m),
                                checkoutStepTitles: oz,
                                overrideSubmitWithWalletButton: tj,
                                placeFlypayOrderButtonRef: A,
                                showFlyPayButtonError: tP,
                                orderProcessHook: e$,
                                applyPromoHook: U,
                                removePromoHook: Z,
                              }),
                          }),
                        }),
                      ],
                    }),
                  }),
                  (0, E.jsx)(oe, {
                    type: G.type,
                    isOpen: G.isOpen,
                    sapAccountNumber:
                      null == e5
                        ? void 0
                        : null === (t = e5.data) || void 0 === t
                        ? void 0
                        : t.sapAccountNumber,
                    onClose: () => {
                      (G.type === C.threeDSAuthenticationDoNotProceed ||
                        G.type === C.creditCardInvalidError ||
                        G.type === C.creditAccountCheckError) &&
                        v("PaymentMethod"),
                        Y({
                          type: G.type,
                          isOpen: !1,
                        });
                    },
                  }),
                ],
              }),
              (0, E.jsx)(oM, {
                isOrderDetailsError: !!H && !I,
                refetchOrderDetails: X,
              }),
              (0, E.jsx)(rd, {
                resetOrderDetailsSubmitError: async () => {
                  await X(), P(!1);
                },
                isOrderDetailsSubmitError: I,
              }),
              eL &&
                (0, E.jsx)(ex.fc, {
                  isOpen: !!eL,
                  onClose: eH,
                  dataTestId: "flypay-error-modal",
                  errorToDisplay: eL,
                }),
            ],
          });
        };
      var lg = n(75173),
        lf = n(25052);
      let lb = (e) => {
          let { assetsUrl: t = "" } = e,
            [n] = (0, _.Vb)([M.GO.CheckoutStepperV2]);
          return n
            ? (0, E.jsx)(ly, {
                assetsUrl: t,
              })
            : (0, E.jsx)(oO, {
                assetsUrl: t,
              });
        },
        lC = (e) => {
          let { children: t } = e,
            { isLoggedIn: n, isFetching: o } = (0, N.aC)(),
            r = {
              ...lg.m,
              title: "Checkout | Coles",
              noindex: !0,
              nofollow: !0,
            };
          return o
            ? null
            : n
            ? (0, E.jsxs)(ee, {
                children: [
                  (0, E.jsx)(O.PB, {
                    ...r,
                  }),
                  (0, E.jsx)(oN, {}),
                  t,
                ],
              })
            : (0, E.jsx)(E.Fragment, {
                children: t,
              });
        },
        lS =
          ((h = (0, lf.m)(lb)),
          (e) => {
            let t = (0, B.tv)(),
              n = (0, ti.I0)();
            return !1 === n
              ? (t.replace(F.nB.Home),
                (0, E.jsx)("div", {
                  style: {
                    padding: R.zr.s8,
                  },
                  children: (0, E.jsx)(L.T, {
                    title: "Redirecting to homepage",
                  }),
                }))
              : (0, E.jsx)(h, {
                  ...e,
                });
          });
      lS.Layout = lC;
      var lx = lS;
    },
  },
  function (e) {
    e.O(0, [4316, 8094, 6510, 2719, 9774, 2888, 179], function () {
      return e((e.s = 7957));
    }),
      (_N_E = e.O());
  },
]);
